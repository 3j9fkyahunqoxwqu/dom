<!DOCTYPE html>
<title>Node.insertBefore</title>
<link rel="author" title="Ms2ger" href="mailto:ms2ger@gmail.com">
<link rel="help" href="../web-dom-core#dom-node-insertbefore">
<link rel="help" href="http://dev.w3.org/2006/webapi/WebIDL/#es-interface">
<body>
<script src="support/test.js"></script>
<script>
try {
  var len = document.body.childNodes.length;
  try {
    document.body.insertBefore(null, null);
    Test.fail("Exception should have been thrown.");
  } catch (e) {
    Test.is(e.code, DOMException.NOT_SUPPORTED_ERR);
  }
  Test.is(document.body.childNodes.length, len);

  var len = document.body.childNodes.length;
  try {
    document.body.insertBefore(null, document.body.firstChild);
    Test.fail("Exception should have been thrown.");
  } catch (e) {
    Test.is(e.code, DOMException.NOT_SUPPORTED_ERR);
  }
  Test.is(document.body.childNodes.length, len);

  try {
    document.body.insertBefore({'a':'b'}, document.body.firstChild);
    Test.fail("Exception should have been thrown.");
  } catch (e) {
    Test.ok(e instanceof TypeError, "Should have thrown TypeError.");
  }

  Test.separate();
  document.body.setAttribute("abc", "pass");
  var attr = document.body.attributes[0];
  Test.ok(attr, "No attribute node?");
  try {
    attr.insertBefore(document.createTextNode("fail"), null);
    Test.fail("Exception should have been thrown.");
  } catch (e) {
    Test.is(e.code, DOMException.HIERARCHY_REQUEST_ERR);
  }
  Test.is(attr.value, "pass");
  Test.is(attr.childNodes.length, 1);
  Test.is(attr.childNodes[0].nodeValue, "pass");
  try {
    attr.insertBefore(null, null);
    Test.fail("Exception should have been thrown.");
  } catch (e) {
    Test.is(e.code, DOMException.HIERARCHY_REQUEST_ERR);
  }
  Test.is(attr.value, "pass");
  Test.is(attr.childNodes.length, 1);
  Test.is(attr.childNodes[0].nodeValue, "pass");
} catch (e) {
  Test.fail("Exception was thrown.");
}
Test.finish();
</script>
