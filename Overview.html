<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"><html lang="en-US"><head>
  <meta content="text/html;charset=UTF-8" http-equiv="content-type">
  <title>Web DOM Core</title>
  <style type="text/css">
   pre.idl { border:solid thin; background:#eee; color:#000; padding:0.5em }
   pre.idl :link, pre.idl :visited { color:inherit; background:transparent }
   pre code { color:inherit; background:transparent }
   div.example { margin-left:1em; padding-left:1em; border-left:double; color:#222; background:#fcfcfc }
   .note { margin-left:2em; font-weight:bold; font-style:italic; color:#008000 }
   p.note::before { content:"Note: " }
   .XXX { padding:.5em; border:solid #f00 }
   p.XXX::before { content:"Issue: " }
   dl.switch { padding-left:2em }
   dl.switch > dt { text-indent:-1.5em }
   dl.switch > dt:before { content:'\21AA'; padding:0 0.5em 0 0; display:inline-block; width:1em; text-align:right; line-height:0.5em }
   dl.domintro { color: green; margin: 2em 0 2em 2em; padding: 0.5em 1em; border: none; background: #DDFFDD; }
   dl.domintro dt, dl.domintro dt * { color: black; text-decoration: none; }
   dl.domintro dd { margin: 0.5em 0 1em 2em; padding: 0; }
   dl.domintro dd p { margin: 0.5em 0; }
   dl.domintro:before { display: table; margin: -1em -0.5em -0.5em auto; width: auto; content: 'This box is non-normative. Implementation requirements are given below this box.'; color: red; border: solid 2px; background: white; padding: 0 0.25em; }
   em.ct { text-transform:lowercase; font-variant:small-caps; font-style:normal }
   dfn { font-weight:bold; font-style:normal }
   code { color:orangered }
   code :link, code :visited { color:inherit }
   hr:not(.top) { display:block; background:none; border:none; padding:0; margin:2em 0; height:auto }
   table { border-collapse:collapse; border-style:hidden hidden none hidden }
   table thead { border-bottom:solid }
   table tbody th:first-child { border-left:solid }
   table td, table th { border-left:solid; border-right:solid; border-bottom:solid thin; vertical-align:top; padding:0.2em }
   @media print {
     [data-anolis-spec]::after { content:"[" attr(data-anolis-spec) "]"; font-size:.6em; vertical-align:super; text-transform:uppercase }
   }
  </style>
  <link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet">
 </head>
 <body>

<div class="head">

<!--begin-logo-->
<p><a href="http://www.w3.org/"><img height="48" width="72" alt="W3C" src="http://www.w3.org/Icons/w3c_home"></a></p>
<!--end-logo-->
 <h1>Web DOM Core</h1>
 <h2 class="no-num no-toc" id="editor-s-draft-11-february-2011">Editor's Draft 11 February 2011</h2>

 <dl>
  <dt>This Version:
  <dd class="dontpublish"><a href="http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html">http://dvcs.w3.org/hg/domcore/raw-file/tip/Overview.html</a>
  <dt>Latest Version:
  <dd><a href="http://www.w3.org/TR/domcore/">http://www.w3.org/TR/domcore/</a>

  <dt>Previous Versions:
  <dd><a href="http://www.w3.org/TR/2010/WD-domcore-20101007/">http://www.w3.org/TR/2010/WD-domcore-20101007/</a>

  <dt>Editor:
  <dd><a href="http://annevankesteren.nl/">Anne van Kesteren</a>
    (<a href="http://www.opera.com/">Opera Software ASA</a>)
    &lt;<a href="mailto:annevk@opera.com">annevk@opera.com</a>&gt;
  <dd>Ms2ger (<a href="http://www.mozilla.org/">Mozilla Foundation</a>)
    &lt;<a href="mailto:ms2ger@gmail.com">ms2ger@gmail.com</a>&gt;
 </dl>

<!--begin-copyright-->
<p class="copyright"><a href="http://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> &copy; 2011 <a href="http://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>&reg;</sup> (<a href="http://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="http://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="http://www.keio.ac.jp/">Keio</a>), All Rights Reserved. W3C <a href="http://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="http://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="http://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply.</p>
<!--end-copyright-->
</div>

<hr class="top">

<h2 class="no-num no-toc" id="abstract">Abstract</h2>
<p>Web DOM Core defines the DOM Core part of the Web platform. The DOM is a
language- and platform neutral interface that allows programs and scripts to
dynamically access and update the content and structure of documents.



<h2 class="no-num no-toc" id="sotd">Status of this Document</h2>
<p><em>This section describes the status of this document at the time of its
publication. Other documents may supersede this document. A list of current W3C
publications and the latest revision of this technical report can be found in
the <a href="http://www.w3.org/TR/">W3C technical reports index</a> at
http://www.w3.org/TR/.</em>

<p>This is the 11 February 2011 Editor's Draft of Web DOM Core. Please send
comments to
<a href="mailto:public-webapps@w3.org?subject=%5BDOMCore%5D%20">public-webapps@w3.org</a>
(<a href="http://lists.w3.org/Archives/Public/public-webapps/">archived</a>)
with <samp>[DOMCore]</samp> at the start of the subject line.

<p>This document is produced by the
<a href="http://www.w3.org/2008/webapps/">Web Applications</a> (WebApps) Working
Group. The WebApps Working Group is part of the
<a href="http://www.w3.org/2006/rwc/Activity">Rich Web Clients Activity</a> in
the W3C <a href="http://www.w3.org/Interaction/">Interaction Domain</a>.

<p>This document was produced by a group operating under the
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004
W3C Patent Policy</a>. W3C maintains a
<a href="http://www.w3.org/2004/01/pp-impl/42538/status" rel="disclosure">public
list of any patent disclosures</a> made in connection with the deliverables of
the group; that page also includes instructions for disclosing a patent. An
individual who has actual knowledge of a patent which the individual believes
contains
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential
Claim(s)</a> must disclose the information in accordance with
<a href="http://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section
6 of the W3C Patent Policy</a>.

<p>Publication as a Working Draft does not imply endorsement by the W3C
Membership. This is a draft document and may be updated, replaced or
obsoleted by other documents at any time. It is inappropriate to cite this
document as other than work in progress.



<h2 class="no-num no-toc" id="table-of-contents">Table of Contents</h2>

<!--begin-toc-->
<ol class="toc">
 <li><a class="no-num" href="#goals">Goals</a></li>
 <li><a class="no-num" href="#issues">Issues</a></li>
 <li><a href="#common-infrastructure"><span class="secno">1 </span>Common infrastructure</a>
  <ol class="toc">
   <li><a href="#terminology"><span class="secno">1.1 </span>Terminology</a></li>
   <li><a href="#conformance-requirements"><span class="secno">1.2 </span>Conformance requirements</a>
    <ol class="toc">
     <li><a href="#dependencies"><span class="secno">1.2.1 </span>Dependencies</a></li>
     <li><a href="#extensibility"><span class="secno">1.2.2 </span>Extensibility</a></ol></li>
   <li><a href="#case-sensitivity"><span class="secno">1.3 </span>Case-sensitivity</a></li>
   <li><a href="#common-microsyntaxes"><span class="secno">1.4 </span>Common microsyntaxes</a>
    <ol class="toc">
     <li><a href="#common-parser-idioms"><span class="secno">1.4.1 </span>Common parser idioms</a></li>
     <li><a href="#space-separated-tokens"><span class="secno">1.4.2 </span>Space-separated tokens</a></ol></li>
   <li><a href="#dom-features"><span class="secno">1.5 </span>DOM features</a></li>
   <li><a href="#cloning-nodes"><span class="secno">1.6 </span>Cloning nodes</a></li>
   <li><a href="#namespaces"><span class="secno">1.7 </span>Namespaces</a></ol></li>
 <li><a href="#exceptions"><span class="secno">2 </span>Exceptions</a>
  <ol class="toc">
   <li><a href="#exception-domexception"><span class="secno">2.1 </span>Exception <code>DOMException</code></a></ol></li>
 <li><a href="#events"><span class="secno">3 </span>Events</a>
  <ol class="toc">
   <li><a href="#interface-event"><span class="secno">3.1 </span>Interface <code>Event</code></a></li>
   <li><a href="#interface-eventtarget"><span class="secno">3.2 </span>Interface <code>EventTarget</code></a></li>
   <li><a href="#dispatching-events"><span class="secno">3.3 </span>Dispatching Events</a></li>
   <li><a href="#creating-events"><span class="secno">3.4 </span>Creating Events</a></ol></li>
 <li><a href="#nodes-model"><span class="secno">4 </span>Nodes Model</a></li>
 <li><a href="#nodes"><span class="secno">5 </span>Nodes</a>
  <ol class="toc">
   <li><a href="#interface-node"><span class="secno">5.1 </span>Interface <code>Node</code></a></li>
   <li><a href="#interface-documentfragment"><span class="secno">5.2 </span>Interface <code>DocumentFragment</code></a></li>
   <li><a href="#interface-document"><span class="secno">5.3 </span>Interface <code>Document</code></a>
    <ol class="toc">
     <li><a href="#interface-domimplementation"><span class="secno">5.3.1 </span>Interface <code>DOMImplementation</code></a></ol></li>
   <li><a href="#interface-element"><span class="secno">5.4 </span>Interface <code>Element</code></a>
    <ol class="toc">
     <li><a href="#interface-attr"><span class="secno">5.4.1 </span>Interface <code>Attr</code></a></ol></li>
   <li><a href="#interface-documenttype"><span class="secno">5.5 </span>Interface <code>DocumentType</code></a></li>
   <li><a href="#interface-processinginstruction"><span class="secno">5.6 </span>Interface <code>ProcessingInstruction</code></a></li>
   <li><a href="#interface-characterdata"><span class="secno">5.7 </span>Interface <code>CharacterData</code></a></li>
   <li><a href="#interface-text"><span class="secno">5.8 </span>Interface <code>Text</code></a></li>
   <li><a href="#interface-comment"><span class="secno">5.9 </span>Interface <code>Comment</code></a></ol></li>
 <li><a href="#collections"><span class="secno">6 </span>Collections</a>
  <ol class="toc">
   <li><a href="#interface-nodelist"><span class="secno">6.1 </span>Interface <code>NodeList</code></a></li>
   <li><a href="#interface-htmlcollection"><span class="secno">6.2 </span>Interface <code>HTMLCollection</code></a></ol></li>
 <li><a href="#lists"><span class="secno">7 </span>Lists</a>
  <ol class="toc">
   <li><a href="#interface-domstringlist"><span class="secno">7.1 </span>Interface <code>DOMStringList</code></a></li>
   <li><a href="#interface-domtokenlist"><span class="secno">7.2 </span>Interface <code>DOMTokenList</code></a></li>
   <li><a href="#interface-domsettabletokenlist"><span class="secno">7.3 </span>Interface <code>DOMSettableTokenList</code></a></ol></li>
 <li><a href="#historical"><span class="secno">8 </span>Historical</a></li>
 <li><a class="no-num" href="#references">References</a>
  <ol class="toc">
   <li><a class="no-num" href="#normative-references">Normative references</a></li>
   <li><a class="no-num" href="#informative-references">Informative references</a></ol></li>
 <li><a class="no-num" href="#acknowledgements">Acknowledgements</a></ol>
<!--end-toc-->



<h2 class="no-num" id="goals">Goals</h2>

<ul>
 <li>Align DOM Core with needs of ECMAScript where possible.
 <li>Align DOM Core with existing implementations.
 <li>Simplify DOM Core as much as possible.
 <li>Import bits of HTML5 that ought to be in DOM Core.
 <li>Prevent a dependency on HTML5.
</ul>

<p>Obsoleting DOM Level 3 Core is not a goal. It is a fine specification for Java servers. Web DOM Core presents an alternative.

<p>New features might be added, once everything else is sort of stable.

<!--
 Ideas:
 - define id="" and class="" as applying to all elements
 - import http://www.w3.org/TR/ElementTraversal/
-->


<h2 class="no-num" id="issues">Issues</h2>

<ul class="XXX">
 <li>Node.baseURI
 <li>Node.compareDocumentPosition
 <li>Document.documentURI
 <li>Move DOMStringMap here?
 <li>Move Document.charset / Document.characterSet / Document.defaultCharset here?
</ul>


<h2 id="common-infrastructure"><span class="secno">1 </span>Common infrastructure</h2>
<h3 id="terminology"><span class="secno">1.1 </span>Terminology</h3>
<p>The term <dfn id="tree-order">tree order</dfn> means a pre-order, depth-first traversal of DOM nodes involved (through the <code title="dom-Node-parentNode"><a href="#dom-node-parentnode">parentNode</a></code>/<code title="dom-Node-childNodes"><a href="#dom-node-childnodes">childNodes</a></code> relationship).

<p>The term <dfn id="context-node">context node</dfn> means the <code><a href="#node">Node</a></code> on which the
method or attribute being discussed was called.

<p>The <dfn id="root-element-of-a-document-object">root element of a <code>Document</code> object</dfn> is that
<code><a href="#document">Document</a></code>'s first <code><a href="#element">Element</a></code> child, if any. If it does not
have one, the <code><a href="#document">Document</a></code> has no root element.

<p>The term <dfn id="root-element">root element</dfn>, when not referring to the
<a href="#root-element-of-a-document-object">root element of a <code>Document</code> object</a>, means the furthest
ancestor element node of whatever node is being discussed, or the node itself if
it has no ancestors. When the node is a part of the document, then the node's
<a href="#root-element">root element</a> is indeed the document's root element; however, if the
node is not currently part of the document tree, the root element will be an
orphaned node.

<p>When an element's <a href="#root-element">root element</a> is the
<a href="#root-element-of-a-document-object">root element of a <code>Document</code> object</a>, it is said to be
<dfn id="in-a-document">in a <code>Document</code></dfn>.

<p>A node's <dfn id="home-subtree">home subtree</dfn> is the subtree rooted at that
node's <a href="#root-element">root element</a>. When a node is <a href="#in-a-document">in a
<code>Document</code></a>, its <a href="#home-subtree">home subtree</a> is that
<code><a href="#document">Document</a></code>'s tree.

<p>The <dfn title="space character" id="space-character">space characters</dfn>, for the
purposes of this specification, are U+0020 SPACE, U+0009 CHARACTER
TABULATION (tab), U+000A LINE FEED (LF), U+000C FORM FEED (FF), and
U+000D CARRIAGE RETURN (CR).


<h3 id="conformance-requirements"><span class="secno">1.2 </span>Conformance requirements</h3>
<p>All diagrams, examples, and notes in this specification are
non-normative, as are all sections explicitly marked non-normative.
Everything else in this specification is normative.

<p>The key words "MUST", "MUST NOT", "REQUIRED", <!--"SHALL", "SHALL
NOT",--> "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
"OPTIONAL" in the normative parts of this document are to be
interpreted as described in RFC2119. For readability, these words do
not appear in all uppercase letters in this specification. <a href="#refsRFC2119">[RFC2119]</a>

<p>Requirements phrased in the imperative as part of algorithms
(such as "strip any leading space characters" or "return false and
terminate these steps") are to be interpreted with the meaning of the
key word ("must", "should", "may", etc) used in introducing the
algorithm.

<p>Conformance requirements phrased as algorithms or specific steps
may be implemented in any manner, so long as the end result is
equivalent. (In particular, the algorithms defined in this
specification are intended to be easy to follow, and not intended to
be performant.)

<p id="hardwareLimitations">User agents may impose
implementation-specific limits on otherwise unconstrained inputs,
e.g. to prevent denial of service attacks, to guard against running
out of memory, or to work around platform-specific limitations.

<p>When a method or an attribute is said to call another method or attribute, the user agent must invoke its internal API for that attribute or method so that e.g. the author can't change the behavior by overriding attributes or methods with custom properties or functions in ECMAScript.

<p>Unless otherwise stated, string comparisons are done in a <a href="#case-sensitive">case-sensitive</a> manner.

<h4 id="dependencies"><span class="secno">1.2.1 </span>Dependencies</h4>

<p>The IDL fragments in this specification must be interpreted as
required for conforming IDL fragments, as described in the Web IDL
specification. <a href="#refsWEBIDL">[WEBIDL]</a>

<p id="float-nan">Except where otherwise specified, if an IDL attribute that is a
floating point number type (<code class="external"><a href="http://dev.w3.org/2006/webapi/WebIDL/#idl-float">float</a></code>) is
assigned an Infinity or Not-a-Number (NaN) value, a <code title="dom-DOMException-NOT_SUPPORTED_ERR"><a href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a></code> exception must
be thrown.

<p>Except where otherwise specified, if a method with an argument that is a
floating point number type (<code class="external"><a href="http://dev.w3.org/2006/webapi/WebIDL/#idl-float">float</a></code>) is
passed an Infinity or Not-a-Number (NaN) value, a <code title="dom-DOMException-NOT_SUPPORTED_ERR"><a href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a></code> exception
must be thrown.

<p>Some of the terms used in this specification are defined in <cite>Web
IDL</cite>, <cite>XML</cite> and <cite>Namespaces in XML</cite>.
<a href="#refsWEBIDL">[WEBIDL]</a>
<a href="#refsXML">[XML]</a>
<a href="#refsXMLNS">[XMLNS]</a>

<h4 id="extensibility"><span class="secno">1.2.2 </span>Extensibility</h4>

<p>Vendor-specific proprietary extensions to this specification are
strongly discouraged. Authors must not use such extensions, as
doing so reduces interoperability and fragments the user base,
allowing only users of specific user agents to access the content in
question.

<p>If vendor-specific extensions are needed, the members should be
prefixed by vendor-specific strings to prevent clashes with future
versions of this specification. Extensions must be defined so that
the use of extensions neither contradicts nor causes the
non-conformance of functionality defined in the specification.
<!-- thanks to QA Framework -->

<p>When vendor-neutral extensions to this specification are needed,
either this specification can be updated accordingly, or an
extension specification can be written that overrides the
requirements in this specification. When someone applying this
specification to their activities decides that they will recognise
the requirements of such an extension specification, it becomes an
<dfn title="other applicable specifications" id="other-applicable-specifications">applicable
specification</dfn> for the purposes of conformance requirements in
this specification.
<!-- http://www.w3.org/mid/17E341CD-E790-422C-9F9A-69347EE01CEB@iki.fi -->


<h3 id="case-sensitivity"><span class="secno">1.3 </span>Case-sensitivity</h3>
<p>This specification defines several comparison operators for strings.

<p>Comparing two strings in a <dfn id="case-sensitive">case-sensitive</dfn> manner means comparing them exactly, codepoint for codepoint.

<p>Comparing two strings in a <dfn id="ascii-case-insensitive">ASCII case-insensitive</dfn> manner means comparing them exactly, codepoint for codepoint, except that the characters in the range U+0041 .. U+005A (i.e. LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z) and the corresponding characters in the range U+0061 .. U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z) are considered to also match.

<p><dfn title="converted to uppercase" id="converted-to-uppercase">Converting a string to uppercase</dfn> means replacing all characters in the range U+0061 .. U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z) with the corresponding characters in the range U+0041 .. U+005A (i.e. LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z).

<p><dfn title="converted to lowercase" id="converted-to-lowercase">Converting a string to lowercase</dfn> means replacing all characters in the range U+0041 .. U+005A (i.e. LATIN CAPITAL LETTER A to LATIN CAPITAL LETTER Z) with the corresponding characters in the range U+0061 .. U+007A (i.e. LATIN SMALL LETTER A to LATIN SMALL LETTER Z).

<p>A string <var title="">pattern</var> is a <dfn id="prefix-match">prefix match</dfn> for a string
<var title="">s</var> when <var title="">pattern</var> is not longer than
<var title="">s</var> and truncating <var title="">s</var> to
<var title="">pattern</var>'s length leaves the two strings as matches of each
other.


<h3 id="common-microsyntaxes"><span class="secno">1.4 </span>Common microsyntaxes</h3>
<h4 id="common-parser-idioms"><span class="secno">1.4.1 </span>Common parser idioms</h4>
<p>Some of the micro-parsers described below follow the pattern of having an
<var title="">input</var> variable that holds the string being parsed, and having a
<var title="">position</var> variable pointing at the next character to parse in
<var title="">input</var>.

<p>For parsers based on this pattern, a step that requires the user agent to
<dfn id="collect-a-sequence-of-characters">collect a sequence of characters</dfn> means that the following algorithm
must be run, with <var title="">characters</var> being the set of characters that
can be collected:

<ol>
 <li><p>Let <var title="">input</var> and <var title="">position</var> be the same
 variables as those of the same name in the algorithm that invoked these steps.

 <li><p>Let <var title="">result</var> be the empty string.

 <li><p>While <var title="">position</var> does not point past the end of
 <var title="">input</var> and the character at <var title="">position</var> is one of
 the <var title="">characters</var>, append that character to the end of
 <var title="">result</var> and advance <var title="">position</var> to the next
 character in <var title="">input</var>.

 <li><p>Return <var title="">result</var>.
</ol>

<p>The step <dfn id="skip-whitespace">skip whitespace</dfn> means that the user agent
must <a href="#collect-a-sequence-of-characters">collect a sequence of characters</a> that are <a title="space character" href="#space-character">space characters</a>. The collected
characters are not used.

<h4 id="space-separated-tokens"><span class="secno">1.4.2 </span>Space-separated tokens</h4>

<p>A <dfn id="set-of-space-separated-tokens">set of space-separated tokens</dfn> is a string containing
zero or more words (known as tokens) separated by one or more <a title="space character" href="#space-character">space characters</a>, where words consist
of any string of one or more characters, none of which are <a title="space character" href="#space-character">space characters</a>.

<p>A string containing a <a href="#set-of-space-separated-tokens">set of space-separated tokens</a>
may have leading or trailing <a title="space character" href="#space-character">space
characters</a>.

<p>An <dfn id="unordered-set-of-unique-space-separated-tokens">unordered set of unique space-separated tokens</dfn> is a
<a href="#set-of-space-separated-tokens">set of space-separated tokens</a> where none of the tokens
are duplicated.

<p>An <dfn id="ordered-set-of-unique-space-separated-tokens">ordered set of unique space-separated tokens</dfn> is a
<a href="#set-of-space-separated-tokens">set of space-separated tokens</a> where none of the tokens
are duplicated but where the order of the tokens is meaningful.

<p><a title="set of space-separated tokens" href="#set-of-space-separated-tokens">Sets of
space-separated tokens</a> sometimes have a defined set of
allowed values. When a set of allowed values is defined, the tokens
must all be from that list of allowed values; other values are
non-conforming. If no such set of allowed values is provided, then
all values are conforming.

<p class="note">How tokens in a <a href="#set-of-space-separated-tokens">set of space-separated
tokens</a> are to be compared (e.g. case-sensitively or not) is
defined on a per-set basis.

<div class="impl">

<p>When a user agent has to <dfn id="split-a-string-on-spaces">split a string on spaces</dfn>, it
must use the following algorithm:

<ol>
 <li><p>Let <var title="">input</var> be the string being parsed.

 <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>,
 initially pointing at the start of the string.

 <li><p>Let <var title="">tokens</var> be a list of tokens, initially empty.

 <li><p><a href="#skip-whitespace">Skip whitespace</a>.

 <li><p>While <var title="">position</var> is not past the end of
 <var title="">input</var>:

  <ol>
   <li><p><a href="#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are not
   <a title="space character" href="#space-character">space characters</a>.

   <li><p>Add the string collected in the previous step to
   <var title="">tokens</var>.

   <li><p><a href="#skip-whitespace">Skip whitespace</a>.
  </ol>

 <li><p>Return <var title="">tokens</var>.
</ol>

<p>When a user agent has to <dfn id="remove-a-token-from-a-string">remove a token from a string</dfn>,
it must use the following algorithm:

<ol>
 <li><p>Let <var title="">input</var> be the string being modified.

 <li><p>Let <var title="">token</var> be the token being removed. It will not
 contain any <a title="space character" href="#space-character">space characters</a>.

 <li><p>Let <var title="">output</var> be the output string, initially empty.

 <li><p>Let <var title="">position</var> be a pointer into <var title="">input</var>,
 initially pointing at the start of the string.

 <li><p><i title="">Loop</i>: If <var title="">position</var> is beyond the end of
 <var title="">input</var>, terminate these steps.

 <li>
  <p>If the character at <var title="">position</var> is a <a href="#space-character">space
  character</a>:

  <ol>
   <li><p>Append the character at <var title="">position</var> to the end of <var title="">output</var>.

   <li><p>Advance <var title="">position</var> so it points at the next character
   in <var title="">input</var>.

   <li><p>Return to the step labeled <i title="">loop</i>.
  </ol>

 <li><p>Otherwise, the character at <var title="">position</var> is the first
 character of a token. <a href="#collect-a-sequence-of-characters">Collect a sequence of characters</a> that are
 not <a title="space character" href="#space-character">space characters</a>, and let that be <var title="">s</var>.

 <li>
  <p>If <var title="">s</var> is exactly equal to <var title="">token</var>, then:

  <ol>
   <li><p><a href="#skip-whitespace">Skip whitespace</a> (in <var title="">input</var>).

   <li><p>Remove any <a title="space character" href="#space-character">space characters</a>
   currently at the end of <var title="">output</var>.

   <li><p>If <var title="">position</var> is not past the end of <var title="">input</var>, and <var title="">output</var> is not the empty string,
   append a single U+0020 SPACE character at the end of <var title="">output</var>.
  </ol>

 <li><p>Otherwise, append <var title="">s</var> to the end of <var title="">output</var>.

 <li><p>Return to the step labeled <i title="">loop</i>.
</ol>

<p class="note">This causes any occurrences of the token to be
removed from the string, and any spaces that were surrounding the
token to be collapsed to a single space, except at the start and end
of the string, where such spaces are removed.

</div>


<h3 id="dom-features"><span class="secno">1.5 </span>DOM features</h3>
<p>A <dfn title="concept-DOMfeature" id="concept-domfeature">DOM feature</dfn> is a unique,
<a href="#ascii-case-insensitive">ASCII case-insensitive</a> string that represents a certain feature of
the user agent.

<p>A <dfn title="concept-DOMfeatureversion" id="concept-domfeatureversion">DOM feature version</dfn> is a (<var title="">feature</var>,&nbsp;<var title="">version</var>) tuple, where <var title="">feature</var> is <a title="concept-DOMfeature" href="#concept-domfeature">DOM feature</a>
and <var title="">version</var> is a <a href="#case-sensitive">case-sensitive</a> string
representing a version number.
<!--of the form "<var title>major</var>.<var title>minor</var>".-->

<p>Specifications may define which <a title="concept-DOMfeature" href="#concept-domfeature">DOM
features</a> a user agent is to <dfn title="concept-support-DOMfeature" id="concept-support-domfeature">support</dfn>, as well as an associated list of
one or more <a href="#case-sensitive">case-sensitive</a> strings representing version numbers, and under which circumstances, when necessary for compatibility (i.e. because of historical use). Specifications must not introduce new <a title="concept-DOMfeature" href="#concept-domfeature">DOM
features</a> or new versions for existing features.

<p>A user agent must <dfn title="concept-support-DOMfeatureversion" id="concept-support-domfeatureversion">support</dfn>
a <a title="concept-DOMfeatureversion" href="#concept-domfeatureversion">DOM feature version</a> (<var title="">feature</var>,&nbsp;<var title="">version</var>) if it <a title="concept-support-DOMfeature" href="#concept-support-domfeature">supports</a> a <a title="concept-DOMfeature" href="#concept-domfeature">DOM feature</a> that is a <a href="#ascii-case-insensitive">ASCII
case-insensitive</a> match for <var title="">feature</var> and <var title="">version</var> is in the associated list of versions.

<p>A user agent must <a title="concept-support-DOMfeatureversion" href="#concept-support-domfeatureversion">support</a> the (<var title="">feature</var>,&nbsp;"") tuple if it <a title="concept-support-DOMfeature" href="#concept-support-domfeature">supports</a> a <a title="concept-DOMfeature" href="#concept-domfeature">DOM feature</a> that is a <a href="#ascii-case-insensitive">ASCII
case-insensitive</a> match for <var title="">feature</var>.

<p class="note">Authors are strongly discouraged from using <a title="concept-DOMfeature" href="#concept-domfeature">DOM features</a>, as they are notoriously unreliable
and imprecise. Authors are encouraged to rely on explicit feature testing or
graceful degradation.

<p>For historical reasons, user agents must <a title="concept-support-DOMfeatureversion" href="#concept-support-domfeatureversion">support</a> the
"XML" <a title="concept-DOMfeature" href="#concept-domfeature">DOM feature</a> with the versions "1.0"
and "2.0" associated with it, and the "Core" <a title="concept-DOMfeature" href="#concept-domfeature">DOM
feature</a> with the version "2.0" associated with it.

<!-- Chrome supports Core/1.0; Opera supports x/undefined -->


<h3 id="cloning-nodes"><span class="secno">1.6 </span>Cloning nodes</h3>
<p>To <dfn id="clone">clone</dfn> a <var title="">node</var>, with a
<var title="">new ownerDocument</var> and with a
<dfn id="clone-children-flag"><i>clone children flag</i></dfn>, these steps must be run:

<ol>
 <li><p>If <var title="">node</var> is a <code><a href="#document">Document</a></code> or
 <code><a href="#documenttype">DocumentType</a></code> node, throw a
 <code title="dom-DOMException-DATA_CLONE_ERR"><a href="#dom-domexception-data_clone_err">DATA_CLONE_ERR</a></code> exception
 and terminate these steps. <!--XXX wrong? -->
 <li>
  <p>Let <var title="">copy</var> be a new <code><a href="#node">Node</a></code> that implements the same interfaces as <var title="">node</var>, with <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to
  <var title="">new ownerDocument</var>. Also copy the following, depending on the
  <var title="">node</var>:
  <dl class="switch">
   <dt><code><a href="#element">Element</a></code>
   <dd><p>Its <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a>,
   <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a>,
   <a title="concept-element-local-name" href="#concept-element-local-name">local name</a>, and its
   associated collection of <code><a href="#attr">Attr</a></code> objects.

   <!--AttrExodus
   <dt><code>Attr</code>
   <dd><p><code title=dom-Attr-value>value</code>
   -->

   <dt><code><a href="#text">Text</a></code>
   <dt><code><a href="#comment">Comment</a></code>
   <dd><p>Its <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code>.

   <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>

   <dd><p>Its <a title="concept-PI-target" href="#concept-pi-target">target</a> and
   <a title="concept-PI-data" href="#concept-pi-data">data</a>.

   <dt>Any other node
   <dd><p>&mdash;
  </dl>
 <li><p>If the <i><a href="#clone-children-flag">clone children flag</a></i> is set, <a href="#clone">clone</a> all the children of <var title="">node</var> and append them to <var title="">copy</var>, with the same <var title="">new ownerDocument</var> and the <i><a href="#clone-children-flag">clone children flag</a></i> being set.
 <li><p>Return <var title="">copy</var>.
</ol>


<h3 id="namespaces"><span class="secno">1.7 </span>Namespaces</h3>
<p>The <dfn id="html-namespace">HTML namespace</dfn> is <code title="">http://www.w3.org/1999/xhtml</code>.

<p>The <dfn id="xml-namespace">XML namespace</dfn> is <code title="">http://www.w3.org/XML/1998/namespace</code>.

<p>The <dfn id="xmlns-namespace">XMLNS namespace</dfn> is <code title="">http://www.w3.org/2000/xmlns/</code>.


<h2 id="exceptions"><span class="secno">2 </span>Exceptions</h2>
<h3 id="exception-domexception"><span class="secno">2.1 </span>Exception <code><a href="#domexception">DOMException</a></code></h3>
<pre class="idl">exception <dfn id="domexception">DOMException</dfn> {
  const unsigned short <a title="dom-DOMException-INDEX_SIZE_ERR" href="#dom-domexception-index_size_err">INDEX_SIZE_ERR</a> = 1;
  const unsigned short <a title="dom-DOMException-DOMSTRING_SIZE_ERR" href="#dom-domexception-domstring_size_err">DOMSTRING_SIZE_ERR</a> = 2; // historical
  const unsigned short <a title="dom-DOMException-HIERARCHY_REQUEST_ERR" href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a> = 3;
  const unsigned short <a title="dom-DOMException-WRONG_DOCUMENT_ERR" href="#dom-domexception-wrong_document_err">WRONG_DOCUMENT_ERR</a> = 4;
  const unsigned short <a title="dom-DOMException-INVALID_CHARACTER_ERR" href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a> = 5;
  const unsigned short <a title="dom-DOMException-NO_DATA_ALLOWED_ERR" href="#dom-domexception-no_data_allowed_err">NO_DATA_ALLOWED_ERR</a> = 6; // historical
  const unsigned short <a title="dom-DOMException-NO_MODIFICATION_ALLOWED_ERR" href="#dom-domexception-no_modification_allowed_err">NO_MODIFICATION_ALLOWED_ERR</a> = 7;
  const unsigned short <a title="dom-DOMException-NOT_FOUND_ERR" href="#dom-domexception-not_found_err">NOT_FOUND_ERR</a> = 8;
  const unsigned short <a title="dom-DOMException-NOT_SUPPORTED_ERR" href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a> = 9;
  const unsigned short <a title="dom-DOMException-INUSE_ATTRIBUTE_ERR" href="#dom-domexception-inuse_attribute_err">INUSE_ATTRIBUTE_ERR</a> = 10; // historical
  const unsigned short <a title="dom-DOMException-INVALID_STATE_ERR" href="#dom-domexception-invalid_state_err">INVALID_STATE_ERR</a> = 11;
  const unsigned short <a title="dom-DOMException-SYNTAX_ERR" href="#dom-domexception-syntax_err">SYNTAX_ERR</a> = 12;
  const unsigned short <a title="dom-DOMException-INVALID_MODIFICATION_ERR" href="#dom-domexception-invalid_modification_err">INVALID_MODIFICATION_ERR</a> = 13;
  const unsigned short <a title="dom-DOMException-NAMESPACE_ERR" href="#dom-domexception-namespace_err">NAMESPACE_ERR</a> = 14;
  const unsigned short <a title="dom-DOMException-INVALID_ACCESS_ERR" href="#dom-domexception-invalid_access_err">INVALID_ACCESS_ERR</a> = 15;
  const unsigned short <a title="dom-DOMException-VALIDATION_ERR" href="#dom-domexception-validation_err">VALIDATION_ERR</a> = 16; // historical
  const unsigned short <a title="dom-DOMException-TYPE_MISMATCH_ERR" href="#dom-domexception-type_mismatch_err">TYPE_MISMATCH_ERR</a> = 17;
  const unsigned short <a title="dom-DOMException-SECURITY_ERR" href="#dom-domexception-security_err">SECURITY_ERR</a> = 18;
  const unsigned short <a title="dom-DOMException-NETWORK_ERR" href="#dom-domexception-network_err">NETWORK_ERR</a> = 19;
  const unsigned short <a title="dom-DOMException-ABORT_ERR" href="#dom-domexception-abort_err">ABORT_ERR</a> = 20;
  const unsigned short <a title="dom-DOMException-URL_MISMATCH_ERR" href="#dom-domexception-url_mismatch_err">URL_MISMATCH_ERR</a> = 21;
  const unsigned short <a title="dom-DOMException-QUOTA_EXCEEDED_ERR" href="#dom-domexception-quota_exceeded_err">QUOTA_EXCEEDED_ERR</a> = 22;
  const unsigned short <a title="dom-DOMException-TIMEOUT_ERR" href="#dom-domexception-timeout_err">TIMEOUT_ERR</a> = 23;
  const unsigned short <a title="dom-DOMException-DATA_CLONE_ERR" href="#dom-domexception-data_clone_err">DATA_CLONE_ERR</a> = 25;
  unsigned short <a title="dom-DOMException-code" href="#dom-domexception-code">code</a>;
  DOMString <a title="dom-DOMException-name" href="#dom-domexception-name">name</a>;
};</pre>

<p>The <dfn title="dom-DOMException-code" id="dom-domexception-code"><code>code</code></dfn> exception
field must return the code for the exception, which must be one of the
following:

<ul class="brief">
 <li><dfn title="dom-DOMException-INDEX_SIZE_ERR" id="dom-domexception-index_size_err"><code>INDEX_SIZE_ERR</code></dfn> (1):
 the index is not in the allowed range;
 <li><dfn title="dom-DOMException-DOMSTRING_SIZE_ERR" id="dom-domexception-domstring_size_err"><code>DOMSTRING_SIZE_ERR</code></dfn> (2):
 the text does not fit in a <code class="external"><a href="#domstring">DOMString</a></code>
 (historical);
 <li><dfn title="dom-DOMException-HIERARCHY_REQUEST_ERR" id="dom-domexception-hierarchy_request_err"><code>HIERARCHY_REQUEST_ERR</code></dfn> (3):
 the operation would yield an incorrect nodes model; <!-- XXXhierarchy -->
 <li><dfn title="dom-DOMException-WRONG_DOCUMENT_ERR" id="dom-domexception-wrong_document_err"><code>WRONG_DOCUMENT_ERR</code></dfn> (4):
 the object is in the wrong <code><a href="#document">Document</a></code>, a call to <code title="dom-Document-importNode"><a href="#dom-document-importnode">importNode</a></code> is required;
 <li><dfn title="dom-DOMException-INVALID_CHARACTER_ERR" id="dom-domexception-invalid_character_err"><code>INVALID_CHARACTER_ERR</code></dfn> (5):
 the string contains invalid characters;
 <li><dfn title="dom-DOMException-NO_DATA_ALLOWED_ERR" id="dom-domexception-no_data_allowed_err"><code>NO_DATA_ALLOWED_ERR</code></dfn> (6):
 data is specified for an object that does not support it (historical);
 <li><dfn title="dom-DOMException-NO_MODIFICATION_ALLOWED_ERR" id="dom-domexception-no_modification_allowed_err"><code>NO_MODIFICATION_ALLOWED_ERR</code></dfn> (7):
 the object can not be modified;
 <li><dfn title="dom-DOMException-NOT_FOUND_ERR" id="dom-domexception-not_found_err"><code>NOT_FOUND_ERR</code></dfn> (8):
 the object can not be found here;
 <li><dfn title="dom-DOMException-NOT_SUPPORTED_ERR" id="dom-domexception-not_supported_err"><code>NOT_SUPPORTED_ERR</code></dfn> (9):
 this operation is not supported;
 <li><dfn title="dom-DOMException-INUSE_ATTRIBUTE_ERR" id="dom-domexception-inuse_attribute_err"><code>INUSE_ATTRIBUTE_ERR</code></dfn> (10):
 the attribute is in use (historical)<!--createAttribute-->;
 <li><dfn title="dom-DOMException-INVALID_STATE_ERR" id="dom-domexception-invalid_state_err"><code>INVALID_STATE_ERR</code></dfn> (11):
 the object is in an invalid state;
 <li><dfn title="dom-DOMException-SYNTAX_ERR" id="dom-domexception-syntax_err"><code>SYNTAX_ERR</code></dfn> (12):
 the string did not match the expected pattern;
 <li><dfn title="dom-DOMException-INVALID_MODIFICATION_ERR" id="dom-domexception-invalid_modification_err"><code>INVALID_MODIFICATION_ERR</code></dfn> (13):
 the object can not be modified in this way;
 <li><dfn title="dom-DOMException-NAMESPACE_ERR" id="dom-domexception-namespace_err"><code>NAMESPACE_ERR</code></dfn> (14):
 the operation is not allowed by <cite>Namespaces in XML</cite>; <a href="#refsXMLNS">[XMLNS]</a>
 <li><dfn title="dom-DOMException-INVALID_ACCESS_ERR" id="dom-domexception-invalid_access_err"><code>INVALID_ACCESS_ERR</code></dfn> (15):
 the object does not support the operation or argument;
 <li><dfn title="dom-DOMException-VALIDATION_ERR" id="dom-domexception-validation_err"><code>VALIDATION_ERR</code></dfn> (16):
 the operation is invalid (historical);
 <li><dfn title="dom-DOMException-TYPE_MISMATCH_ERR" id="dom-domexception-type_mismatch_err"><code>TYPE_MISMATCH_ERR</code></dfn> (17):
 the type of the object does not match the expected type;
 <!-- XHR -->
 <li><dfn title="dom-DOMException-SECURITY_ERR" id="dom-domexception-security_err"><code>SECURITY_ERR</code></dfn> (18):
 the operation is insecure;
 <!-- XHR -->
 <li><dfn title="dom-DOMException-NETWORK_ERR" id="dom-domexception-network_err"><code>NETWORK_ERR</code></dfn> (19):
 a network error occurred;
 <!-- XHR -->
 <li><dfn title="dom-DOMException-ABORT_ERR" id="dom-domexception-abort_err"><code>ABORT_ERR</code></dfn> (20):
 the user aborted an operation;
 <!-- Workers -->
 <li><dfn title="dom-DOMException-URL_MISMATCH_ERR" id="dom-domexception-url_mismatch_err"><code>URL_MISMATCH_ERR</code></dfn> (21):
 the given URL does not match another URL;
 <!-- HTML -->
 <li><dfn title="dom-DOMException-QUOTA_EXCEEDED_ERR" id="dom-domexception-quota_exceeded_err"><code>QUOTA_EXCEEDED_ERR</code></dfn> (22):
 the quota has been exceeded;
 <!-- XHR2 -->
 <li><dfn title="dom-DOMException-TIMEOUT_ERR" id="dom-domexception-timeout_err"><code>TIMEOUT_ERR</code></dfn> (23):
 a timeout occurred;
 <!-- HTML -->
 <li><dfn title="dom-DOMException-DATA_CLONE_ERR" id="dom-domexception-data_clone_err"><code>DATA_CLONE_ERR</code></dfn> (25):
 the object can not be cloned;
</ul>

<p>The <dfn title="dom-DOMException-name" id="dom-domexception-name"><code>name</code></dfn> exception
field must return the name of the exception constant as a string.


<h2 id="events"><span class="secno">3 </span>Events</h2>

<h3 id="interface-event"><span class="secno">3.1 </span>Interface <code><a href="#event">Event</a></code></h3>

<pre class="idl">interface <dfn id="event">Event</dfn> {
  readonly attribute DOMString <a title="dom-Event-type" href="#dom-event-type">type</a>;
  readonly attribute <a href="#eventtarget">EventTarget</a> <a title="dom-Event-target" href="#dom-event-target">target</a>;
  readonly attribute <a href="#eventtarget">EventTarget</a> <a title="dom-Event-currentTarget" href="#dom-event-currenttarget">currentTarget</a>;

  const unsigned short <a title="dom-Event-CAPTURING_PHASE" href="#dom-event-capturing_phase">CAPTURING_PHASE</a> = 1;
  const unsigned short <a title="dom-Event-AT_TARGET" href="#dom-event-at_target">AT_TARGET</a> = 2;
  const unsigned short <a title="dom-Event-BUBBLING_PHASE" href="#dom-event-bubbling_phase">BUBBLING_PHASE</a> = 3;
  readonly attribute unsigned short <a title="dom-Event-eventPhase" href="#dom-event-eventphase">eventPhase</a>;

  void <a title="dom-Event-stopPropagation" href="#dom-event-stoppropagation">stopPropagation</a>();
  void <a title="dom-Event-stopImmediatePropagation" href="#dom-event-stopimmediatepropagation">stopImmediatePropagation</a>();

  readonly attribute boolean <a title="dom-Event-bubbles" href="#dom-event-bubbles">bubbles</a>;
  readonly attribute boolean <a title="dom-Event-cancelable" href="#dom-event-cancelable">cancelable</a>;
  void <a title="dom-Event-preventDefault" href="#dom-event-preventdefault">preventDefault</a>();
  readonly attribute boolean <a title="dom-Event-defaultPrevented" href="#dom-event-defaultprevented">defaultPrevented</a>;

  readonly attribute boolean <span title="dom-Event-isTrusted">isTrusted</span>;
  readonly attribute DOMTimeStamp <span title="dom-Event-timeStamp">timeStamp</span>;

  void <span title="dom-Event-initEvent">initEvent</span>(DOMString <var>type</var>, boolean <var>bubbles</var>, boolean <var>cancelable</var>);
};</pre>

<p>An <dfn title="concept-event" id="concept-event">event</dfn> allows for signaling that something has occurred. E.g. that an image has completed downloading.</p>

<p>Each <a title="concept-event" href="#concept-event">event</a> has a <dfn title="concept-event-name" id="concept-event-name">name</dfn> that can be any sequence of code units,
but not the empty string. The
<dfn title="dom-Event-type" id="dom-event-type"><code>type</code></dfn> attribute must
return the <a title="concept-event-name" href="#concept-event-name">name</a>.</p>
<!-- XXX set when initializing the event -->

<p>Each <a title="concept-event" href="#concept-event">event</a> has an associated
<dfn title="concept-event-target" id="concept-event-target">target</dfn> and
<dfn title="concept-event-current-target" id="concept-event-current-target">current target</dfn> identified
while <a title="concept-event-dispatch" href="#concept-event-dispatch">dispatching</a> the
<a title="concept-event" href="#concept-event">event</a>. The
<dfn title="dom-Event-target" id="dom-event-target"><code>target</code></dfn> attribute must return
the <a title="concept-event-target" href="#concept-event-target">target</a> and the
<dfn title="dom-Event-currentTarget" id="dom-event-currenttarget"><code>currentTarget</code></dfn>
attribute must return the
<a title="concept-event-current-target" href="#concept-event-current-target">current target</a>.

<p>Each <a title="concept-event" href="#concept-event">event</a> has a
<dfn title="concept-event-phase" id="concept-event-phase">phase</dfn>. The
<dfn title="dom-Event-eventPhase" id="dom-event-eventphase"><code>eventPhase</code></dfn> attribute must
return the current <a title="concept-event-phase" href="#concept-event-phase">phase</a>, which must
be one of the following:</p>
<dl>
 <dt><dfn title="dom-Event-CAPTURING_PHASE" id="dom-event-capturing_phase"><code>CAPTURING_PHASE</code></dfn> (numeric value 1)</dt>
 <dd><p>When an <a title="concept-event" href="#concept-event">event</a> is <a title="concept-event-dispatch" href="#concept-event-dispatch">dispatched</a> on a <a title="concept-node" href="#concept-node">node</a> it will be in this phase before it reaches
 its <a title="concept-event-target" href="#concept-event-target">target</a>.
 <dt><dfn title="dom-Event-AT_TARGET" id="dom-event-at_target"><code>AT_TARGET</code></dfn> (numeric value 2)
 <dd><p>When an <a title="concept-event" href="#concept-event">event</a> is <a title="concept-event-dispatch" href="#concept-event-dispatch">dispatched</a> it will be in this phase on its <a title="concept-event-target" href="#concept-event-target">target</a>.
 <dt><dfn title="dom-Event-BUBBLING_PHASE" id="dom-event-bubbling_phase"><code>BUBBLING_PHASE</code></dfn> (numeric value 3)
 <dd><p>When an <a title="concept-event" href="#concept-event">event</a> is <a title="concept-event-dispatch" href="#concept-event-dispatch">dispatched</a> on a <a title="concept-node" href="#concept-node">node</a> it will be in this phase after it reaches
 its <a title="concept-event-target" href="#concept-event-target">target</a>.
</dl>

<p>Each <a title="concept-event" href="#concept-event">event</a> has the following associated
flags that are all initially unset:</p>
<ul>
 <li><dfn id="propagation-flag">propagation flag</dfn>
 <li><dfn id="immediate-propagation-flag">immediate propagation flag</dfn>
 <li><dfn id="bubble-flag">bubble flag</dfn>
 <li><dfn id="cancel-flag">cancel flag</dfn>
 <li><dfn id="canceled-flag">canceled flag</dfn>
</ul>
<p>When the
<dfn title="dom-Event-stopPropagation" id="dom-event-stoppropagation"><code>stopPropagation()</code></dfn>
method is invoked the <a href="#propagation-flag">propagation flag</a> must be set.</p>
<p>When the
<dfn title="dom-Event-stopImmediatePropagation" id="dom-event-stopimmediatepropagation"><code>stopImmediatePropagation()</code></dfn>
method is invoked the <a href="#immediate-propagation-flag">immediate propagation flag</a> must be
set.</p>
<p>The <dfn title="dom-Event-bubbles" id="dom-event-bubbles"><code>bubbles</code></dfn> attribute
must return true if the <a href="#bubble-flag">bubble flag</a> is set and false otherwise.
<p>The <dfn title="dom-Event-cancelable" id="dom-event-cancelable"><code>cancelable</code></dfn>
attribute must return true if the <a href="#cancel-flag">cancel flag</a> is set and false
otherwise.
<p>When the
<dfn title="dom-Event-preventDefault" id="dom-event-preventdefault"><code>preventDefault()</code></dfn>
method is invoked and the <a href="#cancel-flag">cancel flag</a> is set the
<a href="#canceled-flag">canceled flag</a> must be set.
<p>The <dfn title="dom-Event-defaultPrevented" id="dom-event-defaultprevented"><code>defaultPrevented</code></dfn>
attribute must return true if the <a href="#canceled-flag">canceled flag</a> is set and
false otherwise.


<!-- "trusted" "timestamp" -->



<!-- initialize an event -->

<!--
XXX add CustomEvent here?!
-->

<h3 id="interface-eventtarget"><span class="secno">3.2 </span>Interface <code><a href="#eventtarget">EventTarget</a></code></h3>

<pre class="idl">interface <dfn id="eventtarget">EventTarget</dfn> {
  void <a title="dom-EventTarget-addEventListener" href="#dom-eventtarget-addeventlistener">addEventListener</a>(DOMString <var>type</var>, <a href="#eventlistener">EventListener</a> <var>listener</var>, optional boolean <var>capture</var>);
  void <a title="dom-EventTarget-removeEventListener" href="#dom-eventtarget-removeeventlistener">removeEventListener</a>(DOMString <var>type</var>, <a href="#eventlistener">EventListener</a> <var>listener</var>, optional boolean <var>capture</var>);
  boolean <span title="dom-EventTarget-dispatchEvent">dispatchEvent</span>(<a href="#event">Event</a> <var><a href="#event">event</a></var>);
};

interface <dfn id="eventlistener">EventListener</dfn> {
  void <span title="dom-EventListener-handleEvent">handleEvent</span>(<a href="#event">Event</a> <var><a href="#event">event</a></var>);
};</pre>

<p><code><a href="#eventtarget">EventTarget</a></code> is an object upon which an
<a title="concept-event" href="#concept-event">event</a> is <span>dispatched</span>
when something has occurred. Each <code><a href="#eventtarget">EventTarget</a></code> has an associated
list of <a title="concept-event-listener" href="#concept-event-listener">event listeners</a>.

<p>An <dfn title="concept-event-listener" id="concept-event-listener">event listener</dfn> is a handler
for a specific <a title="concept-event" href="#concept-event">event</a>. Each
<a title="concept-event-listener" href="#concept-event-listener">event listener</a> consists of a
<b>name</b> (of the <a title="concept-event" href="#concept-event">event</a>),
<b>listener</b>, and <b>capture</b> variable.

<p>When the
<dfn title="dom-EventTarget-addEventListener" id="dom-eventtarget-addeventlistener"><code>addEventListener(<var>type</var>, <var>listener</var>, <var>capture</var>)</code></dfn>
method is invoked the steps must be run:</p>
<ol>
 <li><p>If <var>type</var> is the empty string or <var>listener</var> is
 null terminate these steps.
 <li><p>If <var>capture</var> is omitted let <var>capture</var> be false.
 <li><p>Append an <a title="concept-event-listener" href="#concept-event-listener">event listener</a>
 to the associated list of
 <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> with <b>name</b>
 set to <var>type</var>, <b>listener</b> set to <var>listener</var>, and
 <b>capture</b> set to <var>capture</var>, unless there
 already is an <a title="concept-event-listener" href="#concept-event-listener">event listener</a> in
 that list with the same <b>name</b>, <b>listener</b>, and <b>capture</b>.
</ol>

<p>When the
<dfn title="dom-EventTarget-removeEventListener" id="dom-eventtarget-removeeventlistener"><code>removeEventListener(<var>type</var>, <var>listener</var>, <var>capture</var>)</code></dfn>
method is invoked the
<a title="concept-event-listener" href="#concept-event-listener">event listener</a> from the associated
list of <a title="concept-event-listener" href="#concept-event-listener">event listeners</a>, whose
<b>name</b> is <var>name</var>, <b>listener</b> is <var>listener</var>, and
<var>capture</var> is <b>capture</b>, must be removed (if any).</p>



<h3 id="dispatching-events"><span class="secno">3.3 </span>Dispatching Events</h3>
<!-- XXX could call this processing model; should it be a subsection? -->

<p>To <dfn title="concept-event-dispatch" id="concept-event-dispatch">dispatch</dfn> an
<a title="concept-event" href="#concept-event">event</a> run these steps:</p>
<!-- other specifications turn this into a requirement  -->

<ol>
 <li><p>Let <var>e</var> be the <a title="concept-event" href="#concept-event">event</a> that
 is dispatched.
 <li><p>Set <var>e</var>'s <a title="concept-event-target" href="#concept-event-target">target</a>
 to the object on which <var>e</var> is dispatched.
 <li>
  <dl>
   <dt>If <var>e</var>'s <a title="concept-event-target" href="#concept-event-target">target</a> is a
   <a title="concept-node" href="#concept-node">node</a>
   <dd>
    <ol>
     <li><p>Let <var>event path</var> be a static ordered list of all
     <a title="concept-ancestor-node" href="#concept-ancestor-node">ancestor nodes</a> of
     <var>e</var>'s <a title="concept-event-target" href="#concept-event-target">target</a> in
     <a href="#tree-order">tree order</a>.</li>
     <li><p>Set <var>e</var>'s <a title="concept-event-phase" href="#concept-event-phase">phase</a> to <span title="dom-Event-CAPTURE_PHASE">CAPTURE_PHASE</span>.
     <li><p>For each <a title="concept-node" href="#concept-node">node</a> in the
     <var>event path</var> <span title="XXX">invoke</span> its
     <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> as long as
     <var>e</var>'s <a href="#propagation-flag">propagation flag</a> is unset.</li>
     <li><p>Set <var>e</var>'s <a title="concept-event-phase" href="#concept-event-phase">phase</a> to <a title="dom-Event-AT_TARGET" href="#dom-event-at_target">AT_TARGET</a>.
     <li><p><span title="XXX">Invoke</span> <var>e</var>'s
     <a title="concept-event-target" href="#concept-event-target">event target</a>
     <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> if
     <var>e</var>'s <a href="#propagation-flag">propagation flag</a> is unset.
     <li>
      <p>If <var>e</var>'s <span title="concept-event-bubbles">bubbles</span>
      run these steps:</p>
      <ol>
       <li><p>Set <var>e</var>'s <a title="concept-event-phase" href="#concept-event-phase">phase</a> to <a title="dom-Event-BUBBLING_PHASE" href="#dom-event-bubbling_phase">BUBBLING_PHASE</a>.
       <li><p>Reverse the order of <var>event path</var>.
       <li><p>For each <a title="concept-node" href="#concept-node">node</a> in the
       <var>event path</var> <span title="XXX">invoke</span> its
       <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> as long as
       <var>e</var>'s <a href="#propagation-flag">propagation flag</a> is unset.</li>
      </ol>
    </ol>
   </dd>
   <dt>Otherwise</dt>
   <dd><p>Set <var>e</var>'s <a title="concept-event-phase" href="#concept-event-phase">phase</a> to
   <a title="dom-Event-AT_TARGET" href="#dom-event-at_target">AT_TARGET</a> and then
   <span title="XXX">Invoke</span> the
   <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> of
   <var>e</var>'s <a title="concept-event-target" href="#concept-event-target">target</a>.</dd>
  </dl>
 </li>
 <li class="XXX">report whether the event was canceled
 <li class="XXX">initialize the event (reset flags)
</ol>
<!-- XXX lets leave activation behavior to some other spec. HTML for now. -->

<p>To <dfn id="invoke">invoke</dfn> the <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> for an object run these steps:</p>
<ol>
 <li><p>Let <var>e</var> be the <a title="concept-event" href="#concept-event">event</a> for
 which the <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> are
 invoked.
 <li><p>If <var>e</var> does not yet have a
 <a title="concept-event-target" href="#concept-event-target">target</a>, let
 <a title="concept-event-target" href="#concept-event-target">target</a> be the object for
 which these steps are run.
 <li><p>Let
 <a title="concept-event-current-target" href="#concept-event-current-target">current target</a> be the
 object for which these steps are run.
 <li><p>As long as <var>e</var>'s <a href="#immediate-propagation-flag">immediate propagation flag</a> is
 unset go through the list <a title="concept-event-listener" href="#concept-event-listener">event listeners</a>
 associated with the
 <a title="concept-event-current-target" href="#concept-event-current-target">current target</a> and
 run them one-at-a-time.
 <!-- XXX find better wording? -->
 <!-- need to define "run" take into account "capture flag" -->
</ol>

<p class="note">The list of
<a title="concept-event-listener" href="#concept-event-listener">event listeners</a> can be manipulated
while <a title="concept-event-listener" href="#concept-event-listener">event listeners</a> are being
run.</p>


<h3 id="creating-events"><span class="secno">3.4 </span>Creating Events</h3>

<p class="note">Although the <code><a href="#document">Document</a></code> object is introduced later
it was thought better to describe the
<code title="dom-Document-createEvent">createEvent()</code> method here.

<p class="XXX">document.createEvent()</p>

<p class="XXX">We should do something about synthetic events for Web Workers too I think. Maybe that gives a chance to introduce a much simpler model? (We should carefully consider whether that is worth it though. How frequently are synthetic events used?)



<h2 id="nodes-model"><span class="secno">4 </span>Nodes Model</h2>
<p><code><a href="#node">Node</a></code> objects (simply called <dfn title="concept-node" id="concept-node">nodes</dfn>) form a tree-based structure. Each node, except for <code><a href="#document">Document</a></code> objects, has zero or one <dfn title="concept-parent-node" id="concept-parent-node">parent nodes</dfn>. A <code><a href="#document">Document</a></code> object cannot have a <a title="concept-parent-node" href="#concept-parent-node">parent node</a>.</p>
<p>A node <var>A</var> is a <dfn title="concept-child-node" id="concept-child-node">child node</dfn> of a node <var>B</var> if and only if <var>B</var> is the <a title="concept-parent-node" href="#concept-parent-node">parent node</a> of <var>A</var>.</p>
<p>The tree-based structure is constrained by the following node hierarchy expressed as a relationship between the type of node and its allowed <span title="concpet-child-node">child nodes</span>:</p>
<dl>
 <dt><code><a href="#document">Document</a></code>
 <dd>
  <p>In <a href="#tree-order">tree order</a>:
  <ol>
   <li><p>Zero or more nodes each of which is either
   <code><a href="#processinginstruction">ProcessingInstruction</a></code> or <code><a href="#comment">Comment</a></code>.
   <li><p>Optionally one <code><a href="#documenttype">DocumentType</a></code> node.
   <li><p>Zero or more nodes each of which is either
   <code><a href="#processinginstruction">ProcessingInstruction</a></code> or <code><a href="#comment">Comment</a></code>.
   <li><p>Optionally one <code><a href="#element">Element</a></code> node.
   <li><p>Zero or more nodes each of which is either
   <code><a href="#processinginstruction">ProcessingInstruction</a></code> or <code><a href="#comment">Comment</a></code>.
  </ol>
 <dt><code><a href="#documentfragment">DocumentFragment</a></code>
 <dt><code><a href="#element">Element</a></code>
 <dd><p>Zero or more nodes each of which is one of <code><a href="#element">Element</a></code>,
 <code><a href="#processinginstruction">ProcessingInstruction</a></code>, <code><a href="#comment">Comment</a></code>, or
 <code><a href="#text">Text</a></code>.
 <dt><code><a href="#documenttype">DocumentType</a></code>
 <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>
 <dt><code><a href="#comment">Comment</a></code>
 <dt><code><a href="#text">Text</a></code>
 <dd><p>None.
</dl>
<p>A node, or the <span title="concpet-child-node">child nodes</span> in case of a <code><a href="#documentfragment">DocumentFragment</a></code> object, are said to <dfn id="violate-the-node-hierarchy">violate the node hierarchy</dfn> of another node if inserting them within the other node's
<a href="#home-subtree">home subtree</a> would violate the constraints listed above.</p>
<p class="note">Operations that would cause a node to <a href="#violate-the-node-hierarchy">violate the node hierarchy</a> of another node will throw a <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>.</p>
<p>Besides <a title="concept-parent-node" href="#concept-parent-node">parent node</a> and <a title="concept-child-node" href="#concept-child-node">child node</a> various other terms are used for tree-based structures.</p>
<p>A node <var>A</var> is called a <dfn title="concept-descendant-node" id="concept-descendant-node">descendant node</dfn> of a node <var>B</var>, if either <var>A</var> is a <a title="concept-child-node" href="#concept-child-node">child node</a> of <var>B</var> or <var>A</var> is a <a title="concept-child-node" href="#concept-child-node">child node</a> of a node <var>C</var> that is a <a title="concept-descendant-node" href="#concept-descendant-node">descendant node</a> of <var>B</var>.</p>
<p>A node <var>A</var> is called an <dfn title="concept-ancestor-node" id="concept-ancestor-node">ancestor node</dfn> of a node <var>B</var> if and only if <var>B</var> is a <a title="concept-descendant-node" href="#concept-descendant-node">descendant node</a> of <var>A</var>.</p>
<p>A node <var>A</var> is called a <dfn title="concept-sibling-node" id="concept-sibling-node">sibling node</dfn> of a node <var>B</var>, if and only if <var>B</var> and <var>A</var> share the same <a title="concept-parent-node" href="#concept-parent-node">parent node</a>.
<var>A</var> is a <dfn title="concept-preceding-sibling-node" id="concept-preceding-sibling-node">preceding sibling node</dfn> of <var>B</var> if <var>A</var> and <var>B</var> are <a title="concept-sibling-node" href="#concept-sibling-node">siblings</a> and <var>A</var> comes before <var>B</var> in their shared parent node.
<var>A</var> is a <dfn title="concept-following-sibling-node" id="concept-following-sibling-node">following sibling node</dfn> of <var>B</var> if <var>A</var> and <var>B</var> are <a title="concept-sibling-node" href="#concept-sibling-node">siblings</a> and <var>A</var> comes after <var>B</var> in their shared parent node.

<!--AttrExodus -->

<!-- XXXhierarchy - make sure to expand DocumentFragment before checking -->


<h2 id="nodes"><span class="secno">5 </span>Nodes</h2>
<h3 id="interface-node"><span class="secno">5.1 </span>Interface <code><a href="#node">Node</a></code></h3>
<pre class="idl">interface <dfn id="node">Node</dfn> {
  const unsigned short <a title="dom-Node-ELEMENT_NODE" href="#dom-node-element_node">ELEMENT_NODE</a> = 1;
  const unsigned short <a title="dom-Node-ATTRIBUTE_NODE" href="#dom-node-attribute_node">ATTRIBUTE_NODE</a> = 2; // historical
  const unsigned short <a title="dom-Node-TEXT_NODE" href="#dom-node-text_node">TEXT_NODE</a> = 3;
  const unsigned short <a title="dom-Node-CDATA_SECTION_NODE" href="#dom-node-cdata_section_node">CDATA_SECTION_NODE</a> = 4; // historical
  const unsigned short <a title="dom-Node-ENTITY_REFERENCE_NODE" href="#dom-node-entity_reference_node">ENTITY_REFERENCE_NODE</a> = 5; // historical
  const unsigned short <a title="dom-Node-ENTITY_NODE" href="#dom-node-entity_node">ENTITY_NODE</a> = 6; // historical
  const unsigned short <a title="dom-Node-PROCESSING_INSTRUCTION_NODE" href="#dom-node-processing_instruction_node">PROCESSING_INSTRUCTION_NODE</a> = 7;
  const unsigned short <a title="dom-Node-COMMENT_NODE" href="#dom-node-comment_node">COMMENT_NODE</a> = 8;
  const unsigned short <a title="dom-Node-DOCUMENT_NODE" href="#dom-node-document_node">DOCUMENT_NODE</a> = 9;
  const unsigned short <a title="dom-Node-DOCUMENT_TYPE_NODE" href="#dom-node-document_type_node">DOCUMENT_TYPE_NODE</a> = 10;
  const unsigned short <a title="dom-Node-DOCUMENT_FRAGMENT_NODE" href="#dom-node-document_fragment_node">DOCUMENT_FRAGMENT_NODE</a> = 11;
  const unsigned short <a title="dom-Node-NOTATION_NODE" href="#dom-node-notation_node">NOTATION_NODE</a> = 12; // historical
  readonly attribute unsigned short <a title="dom-Node-nodeType" href="#dom-node-nodetype">nodeType</a>;<!-- NodeExodus

  readonly attribute DOMString <span title=dom-Node-namespaceURI>namespaceURI</span>;
  readonly attribute DOMString <span title=dom-Node-prefix>prefix</span>;
  readonly attribute DOMString <span title=dom-Node-localName>localName</span>;-->
  readonly attribute DOMString <a title="dom-Node-nodeName" href="#dom-node-nodename">nodeName</a>;

  readonly attribute DOMString <a title="dom-Node-baseURI" href="#dom-node-baseuri">baseURI</a>;

  <!--AttrExodus
  boolean <span title=dom-Node-hasAttributes>hasAttributes</span>();
  readonly attribute <span>NamedNodeMap</span> <span title=dom-Node-attributes>attributes</span>;

  -->readonly attribute <a href="#document">Document</a> <a title="dom-Node-ownerDocument" href="#dom-node-ownerdocument">ownerDocument</a>;
  readonly attribute <a href="#node">Node</a> <a title="dom-Node-parentNode" href="#dom-node-parentnode">parentNode</a>;
  readonly attribute <a href="#element">Element</a> <a title="dom-Node-parentElement" href="#dom-node-parentelement">parentElement</a>;
  boolean <a title="dom-Node-hasChildNodes" href="#dom-node-haschildnodes">hasChildNodes</a>();
  readonly attribute <a href="#nodelist">NodeList</a> <a title="dom-Node-childNodes" href="#dom-node-childnodes">childNodes</a>;
  readonly attribute <a href="#node">Node</a> <a title="dom-Node-firstChild" href="#dom-node-firstchild">firstChild</a>;
  readonly attribute <a href="#node">Node</a> <a title="dom-Node-lastChild" href="#dom-node-lastchild">lastChild</a>;
  readonly attribute <a href="#node">Node</a> <a title="dom-Node-previousSibling" href="#dom-node-previoussibling">previousSibling</a>;
  readonly attribute <a href="#node">Node</a> <a title="dom-Node-nextSibling" href="#dom-node-nextsibling">nextSibling</a>;

  const unsigned short <a title="dom-Node-DOCUMENT_POSITION_DISCONNECTED" href="#dom-node-document_position_disconnected">DOCUMENT_POSITION_DISCONNECTED</a> = 0x01;
  const unsigned short <a title="dom-Node-DOCUMENT_POSITION_PRECEDING" href="#dom-node-document_position_preceding">DOCUMENT_POSITION_PRECEDING</a> = 0x02;
  const unsigned short <a title="dom-Node-DOCUMENT_POSITION_FOLLOWING" href="#dom-node-document_position_following">DOCUMENT_POSITION_FOLLOWING</a> = 0x04;
  const unsigned short <a title="dom-Node-DOCUMENT_POSITION_CONTAINS" href="#dom-node-document_position_contains">DOCUMENT_POSITION_CONTAINS</a> = 0x08;
  const unsigned short <a title="dom-Node-DOCUMENT_POSITION_CONTAINED_BY" href="#dom-node-document_position_contained_by">DOCUMENT_POSITION_CONTAINED_BY</a> = 0x10;
  const unsigned short <a title="dom-Node-DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC" href="#dom-node-document_position_implementation_specific">DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC</a> = 0x20;
  unsigned short <a title="dom-Node-compareDocumentPosition" href="#dom-node-comparedocumentposition">compareDocumentPosition</a>(<a href="#node">Node</a> <var title="">other</var>);

           attribute DOMString <a title="dom-Node-nodeValue" href="#dom-node-nodevalue">nodeValue</a>;
           attribute DOMString <a title="dom-Node-textContent" href="#dom-node-textcontent">textContent</a>;
  <a href="#node">Node</a> <a title="dom-Node-insertBefore" href="#dom-node-insertbefore">insertBefore</a>([NoNull] <a href="#node">Node</a> <var title="">newChild</var>, <a href="#node">Node</a> <var title="">refChild</var>);
  <a href="#node">Node</a> <a title="dom-Node-replaceChild" href="#dom-node-replacechild">replaceChild</a>([NoNull] <a href="#node">Node</a> <var title="">newChild</var>, [NoNull] <a href="#node">Node</a> <var title="">oldChild</var>);
  <a href="#node">Node</a> <a title="dom-Node-removeChild" href="#dom-node-removechild">removeChild</a>([NoNull] <a href="#node">Node</a> <var title="">oldChild</var>);
  <a href="#node">Node</a> <a title="dom-Node-appendChild" href="#dom-node-appendchild">appendChild</a>([NoNull] <a href="#node">Node</a> <var title="">newChild</var>);<!--
  void normalize();-->

  <a href="#node">Node</a> <a title="dom-Node-cloneNode" href="#dom-node-clonenode">cloneNode</a>(boolean <var title="">deep</var>);
  boolean <a title="dom-Node-isSameNode" href="#dom-node-issamenode">isSameNode</a>(<a href="#node">Node</a> <var title="">node</var>);
  boolean <a title="dom-Node-isEqualNode" href="#dom-node-isequalnode">isEqualNode</a>(<a href="#node">Node</a> <var title="">node</var>);

  DOMString <a title="dom-Node-lookupPrefix" href="#dom-node-lookupprefix">lookupPrefix</a>([TreatNullAs=EmptyString] DOMString <var title="">namespace</var>);
  DOMString <a title="dom-Node-lookupNamespaceURI" href="#dom-node-lookupnamespaceuri">lookupNamespaceURI</a>(DOMString? <var title="">prefix</var>);
  boolean <a title="dom-Node-isDefaultNamespace" href="#dom-node-isdefaultnamespace">isDefaultNamespace</a>([TreatNullAs=EmptyString] DOMString <var title="">namespace</var>);<!--
  DOMObject getFeature(DOMString feature, DOMString version);
  DOMUserData setUserData(DOMString key, DOMUserData data, UserDataHandler handler);
  DOMUserData getUserData(DOMString key);-->
};</pre>

<p>The <dfn title="dom-Node-nodeType" id="dom-node-nodetype"><code>nodeType</code></dfn> attribute
must return the type of the node, which must be one of the following:

<ul>
 <li><dfn title="dom-Node-ELEMENT_NODE" id="dom-node-element_node"><code>ELEMENT_NODE</code></dfn> (1);

 <li><dfn title="dom-Node-ATTRIBUTE_NODE" id="dom-node-attribute_node"><code>ATTRIBUTE_NODE</code></dfn> (2, historical);

 <li><dfn title="dom-Node-TEXT_NODE" id="dom-node-text_node"><code>TEXT_NODE</code></dfn> (3);

 <li><dfn title="dom-Node-CDATA_SECTION_NODE" id="dom-node-cdata_section_node"><code>CDATA_SECTION_NODE</code></dfn> (4, historical);

 <li><dfn title="dom-Node-ENTITY_REFERENCE_NODE" id="dom-node-entity_reference_node"><code>ENTITY_REFERENCE_NODE</code></dfn> (5, historical);

 <li><dfn title="dom-Node-ENTITY_NODE" id="dom-node-entity_node"><code>ENTITY_NODE</code></dfn> (6, historical);

 <li><dfn title="dom-Node-PROCESSING_INSTRUCTION_NODE" id="dom-node-processing_instruction_node"><code>PROCESSING_INSTRUCTION_NODE</code></dfn> (7);

 <li><dfn title="dom-Node-COMMENT_NODE" id="dom-node-comment_node"><code>COMMENT_NODE</code></dfn> (8);

 <li><dfn title="dom-Node-DOCUMENT_NODE" id="dom-node-document_node"><code>DOCUMENT_NODE</code></dfn> (9);

 <li><dfn title="dom-Node-DOCUMENT_TYPE_NODE" id="dom-node-document_type_node"><code>DOCUMENT_TYPE_NODE</code></dfn> (10);

 <li><dfn title="dom-Node-DOCUMENT_FRAGMENT_NODE" id="dom-node-document_fragment_node"><code>DOCUMENT_FRAGMENT_NODE</code></dfn> (11);

 <li><dfn title="dom-Node-NOTATION_NODE" id="dom-node-notation_node"><code>NOTATION_NODE</code></dfn> (12, historical).
</ul>

<p class="note">The constants marked historical can no longer be returned, but
are still exposed on the interface.

<!-- NodeExodus
<hr>

<p>The <dfn title=dom-Node-namespaceURI><code>namespaceURI</code></dfn> attribute must return the namespace that is associated with the node, if there is one and it's not the empty string, or null otherwise.

<p>The <dfn title=dom-Node-prefix><code>prefix</code></dfn> attribute must return the prefix that is associated with the node, if there is one and it's not the empty string, or null otherwise.
<!- - support setting? - - On setting, it must run the following steps:

<ol>
 <li><p>Let <var title>prefix</var> be the value being assigned.
 <li>
  <p>If <var title>prefix</var> is not null, run the following substeps:
  <ol>
   <li><p>If <var title>prefix</var> does not match the
   <code data-anolis-spec=xml>Name</code> production in XML, throw an
   <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code>
   exception and terminate these steps.
   <li><p>If <var title>prefix</var> does not match the <code
   data-anolis-spec=xmlns>NCName</code> production in Namespaces in XML, throw a
   <code title=dom-DOMException-NAMESPACE_ERR>NAMESPACE_ERR</code> exception and
   terminate these steps.
  </ol>
 <li><p>Actually this does not match any browser. Let's try to drop it instead.
</ol>- ->

<p>The <dfn title=dom-Node-localName><code>localName</code></dfn> attribute
must return the local name that is associated with the node, if it has one,
and null otherwise.-->

<p>The <dfn title="dom-Node-nodeName" id="dom-node-nodename"><code>nodeName</code></dfn> attribute
must return the following, depending on the <a href="#context-node">context node</a>:

<dl class="switch">
 <dt><code><a href="#element">Element</a></code>
 <dd><p>The <a href="#context-node">context node</a>'s
 <code title="dom-Element-tagName"><a href="#dom-element-tagname">tagName</a></code> attribute.

 <!--AttrExodus
 <dt><code>Attr</code>
 <dd><p>The <span>context node</span>'s
 <code title=dom-Attr-name>name</code> attribute.
 -->

 <dt><code><a href="#text">Text</a></code>
 <dd><p>"<code title="">#text</code>".

 <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>
 <dd><p>The <a href="#context-node">context node</a>'s
 <code title="dom-ProcessingInstruction-target"><a href="#dom-processinginstruction-target">target</a></code> attribute.

 <dt><code><a href="#comment">Comment</a></code>
 <dd><p>"<code title="">#comment</code>".

 <dt><code><a href="#document">Document</a></code>
 <dd><p>"<code title="">#document</code>".

 <dt><code><a href="#documenttype">DocumentType</a></code>
 <dd><p>The <a href="#context-node">context node</a>'s
 <code title="dom-DocumentType-name"><a href="#dom-documenttype-name">name</a></code> attribute.

 <dt><code><a href="#documentfragment">DocumentFragment</a></code>
 <dd><p>"<code title="">#document-fragment</code>".
</dl>

<hr>

<p>The <dfn title="dom-Node-baseURI" id="dom-node-baseuri"><code>baseURI</code></dfn> attribute must <span class="XXX" title="">...</span>

<!--AttrExodus
<hr>

<p>The <dfn title=dom-Node-hasAttributes><code>hasAttributes()</code></dfn>
method must return true if there are any attributes associated with the
<span>context node</span>, if it is an <code>Element</code> node, and false
otherwise.

<p>The <dfn title=dom-Node-attributes><code>attributes</code></dfn> attribute must return a <code>NamedNodeMap</code> of all the <code>Attr</code> nodes associated with the node of the <span>context node</span>, if it is an <code>Element</code> node, or null otherwise.
-->

<hr>

<p>The <dfn title="dom-Node-ownerDocument" id="dom-node-ownerdocument"><code>ownerDocument</code></dfn> attribute must return the <code><a href="#document">Document</a></code> node that the <a href="#context-node">context node</a> is associated with, or null if there is none.

<p>The <dfn title="dom-Node-parentNode" id="dom-node-parentnode"><code>parentNode</code></dfn>
attribute must run these steps:

<ol>
 <!-- AttrExodus
 <li><p>If the <span>context node</span> is an <code>Attr</code> node,
 return null and terminate these steps.
 -->

 <li><p>If the <a href="#context-node">context node</a> does not have a parent node, return
 null and terminate these steps.

 <li><p>Return the parent node of the <a href="#context-node">context node</a>.
</ol>

<!-- XXX needed? Minefield does not have this -->
<p>The <dfn title="dom-Node-parentElement" id="dom-node-parentelement"><code>parentElement</code></dfn> attribute must return the parent node of the <a href="#context-node">context node</a> if there is a parent and it is an <code><a href="#element">Element</a></code> node, or null otherwise.

<p>The <dfn title="dom-Node-hasChildNodes" id="dom-node-haschildnodes"><code>hasChildNodes()</code></dfn>
method must return false if the <a href="#context-node">context node</a>'s
<code title="dom-Node-firstChild"><a href="#dom-node-firstchild">firstChild</a></code> is null, or true
otherwise.

<p>The <dfn title="dom-Node-childNodes" id="dom-node-childnodes"><code>childNodes</code></dfn> attribute must return a <code><a href="#nodelist">NodeList</a></code> rooted at the <a href="#context-node">context node</a> matching only child nodes.

<p>The <dfn title="dom-Node-firstChild" id="dom-node-firstchild"><code>firstChild</code></dfn> attribute must return the first child node of the <a href="#context-node">context node</a>, or null if there is none.

<p>The <dfn title="dom-Node-lastChild" id="dom-node-lastchild"><code>lastChild</code></dfn> attribute must return the last child node of the <a href="#context-node">context node</a>, or null if there is none.

<p>The <dfn title="dom-Node-previousSibling" id="dom-node-previoussibling"><code>previousSibling</code></dfn>
attribute must run these steps:

<ol>
 <!-- AttrExodus
 <li><p>If the <span>context node</span> is an <code>Attr</code> node,
 return null and terminate these steps.
 -->

 <li><p>If the <a href="#context-node">context node</a> does not have a previous sibling
 node, return null and terminate these steps.

 <li><p>Return the previous sibling node of the <a href="#context-node">context node</a>.
</ol>

<p>The <dfn title="dom-Node-nextSibling" id="dom-node-nextsibling"><code>nextSibling</code></dfn> attribute must run these steps:

<ol>
 <!-- AttrExodus
 <li><p>If the <span>context node</span> is an <code>Attr</code> node,
 return null and terminate these steps.
 -->

 <li><p>If the <a href="#context-node">context node</a> does not have a next sibling node,
 return null and terminate these steps.

 <li><p>Return the next sibling node of the <a href="#context-node">context node</a>.
</ol>

<hr>

<p>These are the constants
<code title="dom-Node-compareDocumentPosition"><a href="#dom-node-comparedocumentposition">compareDocumentPosition()</a></code>
returns.

<ul>
 <li><dfn title="dom-Node-DOCUMENT_POSITION_DISCONNECTED" id="dom-node-document_position_disconnected"><code>DOCUMENT_POSITION_DISCONNECTED</code></dfn> (1);

 <li><dfn title="dom-Node-DOCUMENT_POSITION_PRECEDING" id="dom-node-document_position_preceding"><code>DOCUMENT_POSITION_PRECEDING</code></dfn> (2);

 <li><dfn title="dom-Node-DOCUMENT_POSITION_FOLLOWING" id="dom-node-document_position_following"><code>DOCUMENT_POSITION_FOLLOWING</code></dfn> (4);

 <li><dfn title="dom-Node-DOCUMENT_POSITION_CONTAINS" id="dom-node-document_position_contains"><code>DOCUMENT_POSITION_CONTAINS</code></dfn> (8);

 <li><dfn title="dom-Node-DOCUMENT_POSITION_CONTAINED_BY" id="dom-node-document_position_contained_by"><code>DOCUMENT_POSITION_CONTAINED_BY</code></dfn> (16);

 <li><dfn title="dom-Node-DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC" id="dom-node-document_position_implementation_specific"><code>DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC</code></dfn> (32).
</ul>

<p>The <dfn title="dom-Node-compareDocumentPosition" id="dom-node-comparedocumentposition"><code>compareDocumentPosition(<var title="">other</var>)</code></dfn> method must <span class="XXX" title="">...</span>
<!-- XXX @beverloo might figure this out; remove impl specific? -->

<hr>

<p>The <dfn title="dom-Node-nodeValue" id="dom-node-nodevalue"><code>nodeValue</code></dfn> attribute
must return the following, depending on the <a href="#context-node">context node</a>:

<dl class="switch">
 <!--AttrExodus <dt><code>Attr</code> -->
 <dt><code><a href="#text">Text</a></code>
 <dt><code><a href="#comment">Comment</a></code>
 <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>
 <dd><p>The <a href="#context-node">context node</a>'s
 <code title="dom-Node-textContent"><a href="#dom-node-textcontent">textContent</a></code> attribute.

 <dt>Any other node
 <dd><p>Null.
</dl>

<p>Setting the <code title="dom-Node-nodeValue"><a href="#dom-node-nodevalue">nodeValue</a></code> attribute
must do as described below, depending on the <a href="#context-node">context node</a>:

<dl class="switch">
 <!--AttrExodus <dt><code>Attr</code> -->
 <dt><code><a href="#text">Text</a></code>
 <dt><code><a href="#comment">Comment</a></code>
 <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>
 <dd><p>Set the <a href="#context-node">context node</a>'s
 <code title="dom-Node-textContent"><a href="#dom-node-textcontent">textContent</a></code> attribute to the given
 value.

 <dt>Any other node
 <dd><p>Do nothing.
</dl>

<p>The <dfn title="dom-Node-textContent" id="dom-node-textcontent"><code>textContent</code></dfn>
attribute must return the following, depending on the
<a href="#context-node">context node</a>:

<dl class="switch">
 <dt><code><a href="#documentfragment">DocumentFragment</a></code>
 <dt><code><a href="#element">Element</a></code>
 <!--AttrExodus <dt><code>Attr</code> -->
 <dd><p>The concatenation of the
 <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> of all the descendant
 <code><a href="#text">Text</a></code> nodes of the <a href="#context-node">context node</a>, in
 <a href="#tree-order">tree order</a>.

 <dt><code><a href="#text">Text</a></code>
 <dt><code><a href="#comment">Comment</a></code>
 <dd><p>The <a href="#context-node">context node</a>'s
 <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> attribute.

 <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>
 <dd><p>The <a href="#context-node">context node</a>'s
 <code title="dom-ProcessingInstruction-data"><a href="#dom-processinginstruction-data">data</a></code> attribute.

 <dt>Any other node
 <dd>Null.
</dl>

<p>Setting the <code title="dom-Node-textContent"><a href="#dom-node-textcontent">textContent</a></code>
attribute must do as described below, depending on the
<a href="#context-node">context node</a>:

<dl class="switch">
 <dt><code><a href="#documentfragment">DocumentFragment</a></code>
 <dt><code><a href="#element">Element</a></code>
 <!--AttrExodus <dt><code>Attr</code> -->
 <dd>
  <ol>
   <li><p>Remove all the descendent nodes of the <a href="#context-node">context node</a>.
   <li><p>Let <var title="">data</var> be the given value.
   <li><p>If <var title="">data</var> is not the empty string, append a new
   <code><a href="#text">Text</a></code> node to the <a href="#context-node">context node</a> whose
   <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> is set to <var title="">data</var>.
  </ol>

 <dt><code><a href="#text">Text</a></code>
 <dt><code><a href="#comment">Comment</a></code>
 <dd><p>Set <a href="#context-node">context node</a>'s
 <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> attribute to the given
 value.

 <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>
 <dd><p>Set the <a href="#context-node">context node</a>'s
 <code title="dom-ProcessingInstruction-data"><a href="#dom-processinginstruction-data">data</a></code> attribute to the
 given value.

 <dt>Any other node
 <dd>Do nothing.
</dl>

<p>The
<dfn title="dom-Node-insertBefore" id="dom-node-insertbefore"><code>insertBefore(<var title="">newChild</var>, <var title="">refChild</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If the <a href="#context-node">context node</a> is not a <code><a href="#document">Document</a></code>,
 <code><a href="#documentfragment">DocumentFragment</a></code> or <code><a href="#element">Element</a></code>, throw a
 <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>
 and terminate these steps.

 <li><p>If <var title="">refChild</var> is null, return the result of invoking
 <a href="#context-node">context node</a>'s
 <code title="dom-Node-appendChild"><a href="#dom-node-appendchild">appendChild</a></code> with
 <var title="">newChild</var> as argument and terminate these steps.

 <li><p>If <var title="">refChild</var> is not a child of the
 <a href="#context-node">context node</a>, then throw a
 <code title="dom-DOMException-NOT_FOUND_ERR"><a href="#dom-domexception-not_found_err">NOT_FOUND_ERR</a></code> exception
 and terminate these steps.

 <li><p>If <var title="">newChild</var> is the <a href="#context-node">context node</a> or an
 ancestor of the <a href="#context-node">context node</a> throw a
 <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>
 and terminate these steps.

 <!-- XXXhierarchy -->

 <li><p>If <var title="">newChild</var> is a <code><a href="#documenttype">DocumentType</a></code> node and its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is not null throw a
 <code title="dom-DOMException-NOT_SUPPORTED_ERR"><a href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <var title="">newChild</var> is a <code><a href="#documenttype">DocumentType</a></code> node set its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> to the
 <a href="#context-node">context node</a>'s
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code>.

 <li><p>If <var title="">newChild</var> is not a <code><a href="#documenttype">DocumentType</a></code> node let
 <var title="">newChild</var> be the result of invoking the
 <a href="#context-node">context node</a>'s
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code>
 <code title="dom-Document-adoptNode"><a href="#dom-document-adoptnode">adoptNode</a></code> method with
 <var title="">newChild</var> as its argument.

 <li><p>If <var title="">newChild</var> is a <code><a href="#documentfragment">DocumentFragment</a></code> node,
 insert the children of <var title="">newChild</var> in the
 <a href="#context-node">context node</a>, in <a href="#tree-order">tree order</a>, so that the last
 child becomes the previous sibling of <var title="">refChild</var>.

 <li><p>Otherwise insert <var title="">newChild</var> in the
 <a href="#context-node">context node</a> as the previous sibling of <var title="">refChild</var>.

 <li><p>Return <var title="">newChild</var>.
</ol>

<p>The
<dfn title="dom-Node-replaceChild" id="dom-node-replacechild"><code>replaceChild(<var title="">newChild</var>, <var title="">oldChild</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If the <a href="#context-node">context node</a> is not a <code><a href="#document">Document</a></code>,
 <code><a href="#documentfragment">DocumentFragment</a></code> or <code><a href="#element">Element</a></code>, throw a
 <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>
 and terminate these steps.

 <li><p>If <var title="">oldChild</var> is not a child of the
 <a href="#context-node">context node</a>, then throw a
 <code title="dom-DOMException-NOT_FOUND_ERR"><a href="#dom-domexception-not_found_err">NOT_FOUND_ERR</a></code> exception
 and terminate these steps.

 <li><p>If <var title="">newChild</var> is the <a href="#context-node">context node</a> or an
 ancestor of the <a href="#context-node">context node</a> throw a
 <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>
 and terminate these steps.

 <!-- XXXhierarchy -->

 <li><p>If <var title="">newChild</var> is a <code><a href="#documenttype">DocumentType</a></code> node and its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is not null throw a
 <code title="dom-DOMException-NOT_SUPPORTED_ERR"><a href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <var title="">newChild</var> is a <code><a href="#documenttype">DocumentType</a></code> node set its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> to the
 <a href="#context-node">context node</a>'s
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code>.

 <li><p>If <var title="">newChild</var> is not a <code><a href="#documenttype">DocumentType</a></code> node let
 <var title="">newChild</var> be the result of invoking the
 <a href="#context-node">context node</a>'s
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code>
 <code title="dom-Document-adoptNode"><a href="#dom-document-adoptnode">adoptNode</a></code> method with
 <var title="">newChild</var> as its argument.

 <li><p>Let <var title="">refChild</var> be <var title="">oldChild</var>'s
 <code title="dom-Node-nextSibling"><a href="#dom-node-nextsibling">nextSibling</a></code>.

 <li><p>Remove <var title="">oldChild</var> from the <a href="#context-node">context node</a>.

 <li><p>Return the result of invoking the <a href="#context-node">context node</a>'s
 <code title="dom-Node-insertBefore"><a href="#dom-node-insertbefore">insertBefore</a></code> method with
 <var title="">newChild</var> and <var title="">refChild</var> as arguments.
</ol>

<p>The
<dfn title="dom-Node-removeChild" id="dom-node-removechild"><code>removeChild(<var title="">oldChild</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If the <a href="#context-node">context node</a> is not a <code><a href="#document">Document</a></code>,
 <code><a href="#documentfragment">DocumentFragment</a></code> or <code><a href="#element">Element</a></code>, throw a
 <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>
 and terminate these steps.

 <li><p>If <var title="">oldChild</var> is not a child of the
 <a href="#context-node">context node</a>, then throw a
 <code title="dom-DOMException-NOT_FOUND_ERR"><a href="#dom-domexception-not_found_err">NOT_FOUND_ERR</a></code> exception
 and terminate these steps.
 <!-- Including other documents. -->

 <li><p>Remove <var title="">oldChild</var> from the <a href="#context-node">context node</a>.

 <li><p>Return <var title="">oldChild</var>.
</ol>

<p>The
<dfn title="dom-Node-appendChild" id="dom-node-appendchild"><code>appendChild(<var title="">newChild</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If the <a href="#context-node">context node</a> is not a <code><a href="#document">Document</a></code>,
 <code><a href="#documentfragment">DocumentFragment</a></code> or <code><a href="#element">Element</a></code>, throw a
 <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>
 and terminate these steps.

 <li><p>If <var title="">newChild</var> is the <a href="#context-node">context node</a> or an
 ancestor of the <a href="#context-node">context node</a> throw a
 <code title="dom-DOMException-HIERARCHY_REQUEST_ERR"><a href="#dom-domexception-hierarchy_request_err">HIERARCHY_REQUEST_ERR</a></code>
 and terminate these steps.

 <!-- XXXhierarchy -->

 <li><p>If <var title="">newChild</var> is a <code><a href="#documenttype">DocumentType</a></code> node and its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is not null throw a
 <code title="dom-DOMException-NOT_SUPPORTED_ERR"><a href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <var title="">newChild</var> is a <code><a href="#documenttype">DocumentType</a></code> node set its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> to the
 <a href="#context-node">context node</a>'s
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code>.

 <li><p>If <var title="">newChild</var> is not a <code><a href="#documenttype">DocumentType</a></code> node let
 <var title="">newChild</var> be the result of invoking the
 <a href="#context-node">context node</a>'s
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code>
 <code title="dom-Document-adoptNode"><a href="#dom-document-adoptnode">adoptNode</a></code> method with
 <var title="">newChild</var> as its argument.

 <li><p>Append <var title="">newChild</var> to the <a href="#context-node">context node</a>.

 <li><p>Return <var title="">newChild</var>.
</ol>

<hr>

<p>The
<dfn title="dom-Node-cloneNode" id="dom-node-clonenode"><code>cloneNode(<var title="">deep</var>)</code></dfn>
method must return a <a href="#clone">clone</a> of the <a href="#context-node">context node</a>,
with <var title="">new ownerDocument</var> being the <a href="#context-node">context node</a>'s
<code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code>, and the
<i><a href="#clone-children-flag">clone children flag</a></i> set if <var title="">deep</var> is true.

<p>The
<dfn title="dom-Node-isSameNode" id="dom-node-issamenode"><code>isSameNode(<var title="">node</var>)</code></dfn>
method must return true if <var title="">node</var> is a reference to the same
object as the <a href="#context-node">context node</a>, or false otherwise.

<p>The
<dfn title="dom-Node-isEqualNode" id="dom-node-isequalnode"><code>isEqualNode(<var title="">node</var>)</code></dfn>
method must return true if all of the following conditions are true, or
false otherwise:

<ul>
 <li><p><var title="">node</var> is not null.
 <li><p><var title="">node</var>'s <code title="dom-Node-nodeType"><a href="#dom-node-nodetype">nodeType</a></code> is the same as the <a href="#context-node">context node</a>'s <code title="dom-Node-nodeType"><a href="#dom-node-nodetype">nodeType</a></code>.
 <li><p><var title="">node</var>'s <code title="dom-Node-nodeName"><a href="#dom-node-nodename">nodeName</a></code> is the same as the <a href="#context-node">context node</a>'s <code title="dom-Node-nodeName"><a href="#dom-node-nodename">nodeName</a></code>.
 <li><p><var title="">node</var>'s <code title="dom-Node-nodeValue"><a href="#dom-node-nodevalue">nodeValue</a></code> is the same as the <a href="#context-node">context node</a>'s <code title="dom-Node-nodeValue"><a href="#dom-node-nodevalue">nodeValue</a></code>.
 <li>
  <p>The following are also equal, depending on <var title="">node</var>:
  <dl class="switch">
   <dt><code><a href="#documenttype">DocumentType</a></code>
   <dd><p>Its <a title="concept-doctype-name" href="#concept-doctype-name">name</a>,
   <a title="concept-doctype-publicid" href="#concept-doctype-publicid">public ID</a>, and
   <a title="concept-doctype-systemid" href="#concept-doctype-systemid">system ID</a>.

   <dt><code><a href="#element">Element</a></code>
   <dd><p>Its <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a>,
   <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a>,
   <a title="concept-element-local-name" href="#concept-element-local-name">local name</a>, and its
   associated collection of <code><a href="#attr">Attr</a></code> objects.

   <!--AttrExodus
   <dt><code>Attr</code>
   <dd><p><code title=dom-Attr-value>value</code>
   -->

   <dt><code><a href="#text">Text</a></code>
   <dt><code><a href="#comment">Comment</a></code>
   <dd><p>Its <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code>.

   <dt><code><a href="#processinginstruction">ProcessingInstruction</a></code>

   <dd><p>Its <a title="concept-PI-target" href="#concept-pi-target">target</a> and
   <a title="concept-PI-data" href="#concept-pi-data">data</a>.

   <dt>Any other node
   <dd><p>&mdash;
  </dl>
 <li><p><var title="">node</var>'s <code title="dom-Node-childNodes"><a href="#dom-node-childnodes">childNodes</a></code>' <code title="dom-NodeList-length"><a href="#dom-nodelist-length">length</a></code> is the same as the <a href="#context-node">context node</a>'s <code title="dom-Node-childNodes"><a href="#dom-node-childnodes">childNodes</a></code>' <code title="dom-NodeList-length"><a href="#dom-nodelist-length">length</a></code>.
 <li><p>Calling <code title="dom-Node-isEqualNode"><a href="#dom-node-isequalnode">isEqualNode</a></code> on each child node of the <a href="#context-node">context node</a>, with the child node of the same index in <var title="">node</var> as argument returns true for every child node.
</ul>

<hr>

<p>To <dfn id="locate-a-namespace-prefix">locate a namespace prefix</dfn> for an <var title="">element</var> using
<var title="">namespace</var> run these steps:

<ol>
 <li><p>If <var title="">element</var>'s
 <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> is
 <var title="">namespace</var> and its
 <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a> is not
 null return its
 <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a> and
 terminate these steps.

 <li><p>If, in <var title="">element</var>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code>, there is an
 <code><a href="#attr">Attr</a></code> whose
 <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a> is
 "<code title="">xmlns</code>" and <a title="concept-attr-value" href="#concept-attr-value">value</a>
 is <var title="">namespace</var> then return its
 <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> and terminate these
 steps.

 <li><p>Return the result of running <a href="#locate-a-namespace-prefix">locate a namespace prefix</a>
 on its <code title="dom-Node-parentElement"><a href="#dom-node-parentelement">parentElement</a></code> using
 <var title="">namespace</var>, if that is not null, or null otherwise.
</ol>

<p>To <dfn id="locate-a-namespace">locate a namespace</dfn> for a <var title="">node</var> using
<var title="">prefix</var> depends on the <var title="">node</var>:

<dl class="switch">
 <dt><code><a href="#element">Element</a></code>
 <dd>
  <ol>
   <li><p>If its <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> is
   not null and its
   <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a> is
   <var title="">prefix</var> return
   <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> and terminate
   these steps.

   <li><p>If, in its <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code>, there
   is an <code><a href="#attr">Attr</a></code>

   whose <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a>
   is "<code title="">xmlns</code>" and
   <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
   <var title="">prefix</var> or

   whose <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a>
   is null and <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
   "<code title="">xmlns</code>":

    <ol>
     <li><p>Let <var title="">value</var> be its
     <a title="concept-attr-value" href="#concept-attr-value">value</a> if it is not the empty
     string, or null otherwise.

     <li><p>Return <var title="">value</var> and terminate these steps.
    </ol>

   <li><p>Return the result of running <a href="#locate-a-namespace">locate a namespace</a> on
   its <code title="dom-Node-parentElement"><a href="#dom-node-parentelement">parentElement</a></code> using
   <var title="">prefix</var>, if that is not null, or null otherwise.
  </ol>

 <!--AttrExodus <code>Attr</code> -->
 <dt><code><a href="#document">Document</a></code>
 <dd><p>Return the result of running <a href="#locate-a-namespace">locate a namespace</a> on its
 <code title="dom-Document-documentElement"><a href="#dom-document-documentelement">documentElement</a></code> using
 <var title="">prefix</var>, if
 <code title="dom-Document-documentElement"><a href="#dom-document-documentelement">documentElement</a></code> is
 not null, or null otherwise.

 <dt><code><a href="#documenttype">DocumentType</a></code>
 <dt><code><a href="#documentfragment">DocumentFragment</a></code>
 <dd><p>Return null.

 <dt>Any other node
 <dd><p>Return the result of running <a href="#locate-a-namespace">locate a namespace</a> on its
 <code title="dom-Node-parentElement"><a href="#dom-node-parentelement">parentElement</a></code> using
 <var title="">prefix</var>, if that is not null, or null otherwise.
</dl>

<p>The
<dfn title="dom-Node-lookupPrefix" id="dom-node-lookupprefix"><code>lookupPrefix(<var title="">namespace</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If <var title="">namespace</var> is the empty string return null.

 <li>
  <p>Otherwise it depends on the <a href="#context-node">context node</a>:

  <dl class="switch">
   <dt><code><a href="#element">Element</a></code>
   <dd><p>Return the result of
   <a title="locate a namespace prefix" href="#locate-a-namespace-prefix">locating a namespace prefix</a>
   for the node using <var title="">namespace</var>.

   <!--AttrExodus <code>Attr</code> -->
   <dt><code><a href="#document">Document</a></code>
   <dd><p>Return the result of
   <a title="locate a namespace prefix" href="#locate-a-namespace-prefix">locating a namespace prefix</a>
   for its <code title="dom-Document-documentElement"><a href="#dom-document-documentelement">documentElement</a></code>, if
   that is not null, or null otherwise.

   <dt><code><a href="#documenttype">DocumentType</a></code>
   <dt><code><a href="#documentfragment">DocumentFragment</a></code>
   <dd><p>Return null.

   <dt>Any other node
   <dd><p>Return the result of
   <a title="locate a namespace prefix" href="#locate-a-namespace-prefix">locating a namespace prefix</a>
   for its <code title="dom-Node-parentNode"><a href="#dom-node-parentnode">parentNode</a></code>, if that is an
   <code><a href="#element">Element</a></code> node, or null otherwise.
  </dl>
</ol>

<p>The
<dfn title="dom-Node-lookupNamespaceURI" id="dom-node-lookupnamespaceuri"><code>lookupNamespaceURI(<var title="">prefix</var>)</code></dfn>
method must return the result of running <a href="#locate-a-namespace">locate a namespace</a> for
the <a href="#context-node">context node</a> using <var title="">prefix</var>.

<p>The
<dfn title="dom-Node-isDefaultNamespace" id="dom-node-isdefaultnamespace"><code>isDefaultNamespace(<var title="">namespace</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>Let <var title="">defaultNamespace</var> be the result of invoking
 <code title="dom-Node-lookupNamespaceURI"><a href="#dom-node-lookupnamespaceuri">lookupNamespaceURI</a></code> with null
 as argument on the <a href="#context-node">context node</a>.

 <li><p>If <var title="">defaultNamespace</var> is null let it be the empty
 string.

 <li><p>Return true if <var title="">defaultNamespace</var> is <var title="">namespace</var>,
 or false otherwise.
</ol>


<h3 id="interface-documentfragment"><span class="secno">5.2 </span>Interface <code><a href="#documentfragment">DocumentFragment</a></code></h3>
<pre class="idl">interface <dfn id="documentfragment">DocumentFragment</dfn> : <a href="#node">Node</a> {
};</pre>


<h3 id="interface-document"><span class="secno">5.3 </span>Interface <code><a href="#document">Document</a></code></h3>
<pre class="idl">interface <dfn id="document">Document</dfn> : <a href="#node">Node</a> {
  readonly attribute <a href="#domimplementation">DOMImplementation</a> <a title="dom-Document-implementation" href="#dom-document-implementation">implementation</a>;
           attribute DOMString <a title="dom-Document-documentURI" href="#dom-document-documenturi">documentURI</a>;
  readonly attribute DOMString <a title="dom-Document-compatMode" href="#dom-document-compatmode">compatMode</a>;

  readonly attribute <a href="#documenttype">DocumentType</a> <a title="dom-Document-doctype" href="#dom-document-doctype">doctype</a>;
  readonly attribute <a href="#element">Element</a> <a title="dom-Document-documentElement" href="#dom-document-documentelement">documentElement</a>;
  <a href="#nodelist">NodeList</a> <a title="dom-Document-getElementsByTagName" href="#dom-document-getelementsbytagname">getElementsByTagName</a>(DOMString <var title="">qualifiedName</var>);
  <a href="#nodelist">NodeList</a> <a title="dom-Document-getElementsByTagNameNS" href="#dom-document-getelementsbytagnamens">getElementsByTagNameNS</a>(DOMString <var title="">namespace</var>, DOMString <var title="">localName</var>);
  <a href="#nodelist">NodeList</a> <a title="dom-Document-getElementsByClassName" href="#dom-document-getelementsbyclassname">getElementsByClassName</a>(DOMString <var title="">classNames</var>);
  <a href="#element">Element</a> <a title="dom-Document-getElementById" href="#dom-document-getelementbyid">getElementById</a>(DOMString <var title="">elementId</var>);

  <a href="#element">Element</a> <a title="dom-Document-createElement" href="#dom-document-createelement">createElement</a>([TreatNullAs=EmptyString] DOMString <var title="">localName</var>);
  <a href="#element">Element</a> <a title="dom-Document-createElementNS" href="#dom-document-createelementns">createElementNS</a>(DOMString <var title="">namespace</var>, DOMString <var title="">qualifiedName</var>);
  <a href="#documentfragment">DocumentFragment</a> <a title="dom-Document-createDocumentFragment" href="#dom-document-createdocumentfragment">createDocumentFragment</a>();
  <a href="#text">Text</a> <a title="dom-Document-createTextNode" href="#dom-document-createtextnode">createTextNode</a>(DOMString <var title="">data</var>);
  <a href="#comment">Comment</a> <a title="dom-Document-createComment" href="#dom-document-createcomment">createComment</a>(DOMString <var title="">data</var>);
  <a href="#processinginstruction">ProcessingInstruction</a> <a title="dom-Document-createProcessingInstruction" href="#dom-document-createprocessinginstruction">createProcessingInstruction</a>(DOMString <var title="">target</var>, DOMString <var title="">data</var>);<!--
  CDATASection createCDATASection(DOMString data);
  EntityReference createEntityReference(DOMString name);
  <span>Attr</span> <span title=dom-Document-createAttribute>createAttribute</span>(DOMString name);
  <span>Attr</span> <span title=dom-Document-createAttributeNS>createAttributeNS</span>(DOMString namespace, DOMString qualifiedName);
    If adding this, search for [createAttribute]-->

  <a href="#node">Node</a> <a title="dom-Document-importNode" href="#dom-document-importnode">importNode</a>(<a href="#node">Node</a> <var title="">node</var>, boolean <var title="">deep</var>);
  <a href="#node">Node</a> <a title="dom-Document-adoptNode" href="#dom-document-adoptnode">adoptNode</a>(<a href="#node">Node</a> <var title="">node</var>);<!--
  readonly attribute DOMString xmlEncoding;
           attribute boolean xmlStandalone;
           attribute DOMString <span title=dom-Document-xmlVersion>xmlVersion</span>;
           attribute boolean strictErrorChecking;
  readonly attribute DOMConfiguration domConfig;
  void normalizeDocument();
  Node renameNode(Node n, DOMString namespace, DOMString qualifiedName);-->
};</pre>

<p>A <code><a href="#document">Document</a></code> node is assumed to be an <dfn id="xml-document">XML document</dfn>
unless it is flagged as being an <dfn id="html-document">HTML document</dfn>. Whether a
document is an <a href="#html-document">HTML document</a> or an <a href="#xml-document">XML document</a>
affects the behavior of certain APIs.

<p>A <code><a href="#document">Document</a></code> node is always set to one of three modes:
<dfn title="concept-no-quirks-mode" id="concept-no-quirks-mode">no-quirks mode</dfn>, the default;
<dfn title="concept-quirks-mode" id="concept-quirks-mode">quirks mode</dfn>, used typically for legacy
documents; and
<dfn title="concept-limited-quirks-mode" id="concept-limited-quirks-mode">limited-quirks mode</dfn>, also known
as "almost standards" mode. Unless
<a href="#other-applicable-specifications">other applicable specifications</a> define otherwise, the
<code><a href="#document">Document</a></code> must be in
<a title="concept-no-quirks-mode" href="#concept-no-quirks-mode">no-quirks mode</a>.

<p class="note">The mode is only ever changed from the default if the
<code><a href="#document">Document</a></code> node is created by the
<a class="external" href="http://www.whatwg.org/html/#html-parser">HTML parser</a>, based on the presence,
absence, or value of the DOCTYPE string.
<a class="informative" href="#refsHTML">[HTML]</a>

<hr>

<dl class="domintro">
 <dt><var title="">document</var> . <code title="dom-Document-compatMode"><a href="#dom-document-compatmode">compatMode</a></code>
 <dd>
  <p>Returns the string "<code title="">CSS1Compat</code>" if the <a href="#context-node">context
  node</a> is in <a title="concept-no-quirks-mode" href="#concept-no-quirks-mode">no-quirks mode</a> or
  <a title="concept-limited-quirks-mode" href="#concept-limited-quirks-mode">limited-quirks mode</a>, and
  "<code title="">BackCompat</code>", if the <code><a href="#document">Document</a></code> is in
  <a title="concept-quirks-mode" href="#concept-quirks-mode">quirks mode</a>.
</dl>

<p>The <dfn title="dom-Document-implementation" id="dom-document-implementation"><code>implementation</code></dfn> attribute must return the <code><a href="#domimplementation">DOMImplementation</a></code> object that is associated with the <code><a href="#document">Document</a></code> node.

<p class="XXX"><dfn title="dom-Document-documentURI" id="dom-document-documenturi">documentURI</dfn>
Should document.documentURI really exist? be readonly?

<p>The <dfn title="dom-Document-compatMode" id="dom-document-compatmode"><code>compatMode</code></dfn> IDL
attribute must return the literal string "<code title="">CSS1Compat</code>" unless
the <a href="#context-node">context node</a> is in <a title="concept-quirks-mode" href="#concept-quirks-mode">quirks mode</a>, in which case it must instead
return the literal string "<code title="">BackCompat</code>".

<!-- <dfn title=dom-Document-xmlVersion>xmlVersion</dfn>
http://lists.w3.org/Archives/Public/www-dom/2003JulSep/0049.html -->

<hr>

<dl class="domintro">
 <dt><var title="">collection</var> = <var title="">document</var> . <code title="dom-Document-getElementsByClassName"><a href="#dom-document-getelementsbyclassname">getElementsByClassName(<var title="">classes</var>)</a></code>
 <dt><var title="">collection</var> = <var title="">element</var> . <code title="dom-Element-getElementsByClassName"><a href="#dom-element-getelementsbyclassname">getElementsByClassName(<var title="">classes</var>)</a></code>
 <dd>
  <p>Returns a <code><a href="#nodelist">NodeList</a></code> of the elements in the object on which the
  method was invoked (a <code><a href="#document">Document</a></code> or an <code><a href="#element">Element</a></code>) that
  have all the classes given by <var title="">classes</var>.
  <p>The <var title="">classes</var> argument is interpreted as a space-separated
  list of classes.
</dl>

<p>The <dfn title="dom-Document-doctype" id="dom-document-doctype"><code>doctype</code></dfn> attribute must return the child of the <code><a href="#document">Document</a></code> node that is a <code><a href="#documenttype">DocumentType</a></code> node, if there is one, or null otherwise.

<p>The
<dfn title="dom-Document-documentElement" id="dom-document-documentelement"><code>documentElement</code></dfn>
attribute must return the child of the <code><a href="#document">Document</a></code> node that is an
<code><a href="#element">Element</a></code> node, if there is one, or null otherwise.

<p>The <dfn title="dom-Document-getElementsByTagName" id="dom-document-getelementsbytagname"><code>getElementsByTagName(<var title="">localName</var>)</code></dfn> method must run these steps:

<ol>
 <li><p>If <var title="">localName</var> is "<code>*</code>" (U+002A),
 return a <code><a href="#nodelist">NodeList</a></code> rooted at the <a href="#context-node">context node</a>,
 whose filter matches only <code><a href="#element">Element</a></code> nodes.

 <li>
  <p>Otherwise, if the <a href="#context-node">context node</a> is an
  <a href="#html-document">HTML document</a>, return a <code><a href="#nodelist">NodeList</a></code> rooted at the
  <a href="#context-node">context node</a>, whose filter matches only the following nodes:

  <ul>
   <li><code><a href="#element">Element</a></code> nodes in the <a href="#html-namespace">HTML namespace</a> whose <a title="concept-element-local-name" href="#concept-element-local-name">local name</a> is
   <var title="">localName</var> <a href="#converted-to-lowercase">converted to lowercase</a>.

   <li><code><a href="#element">Element</a></code> nodes, <em>not</em> in the
   <a href="#html-namespace">HTML namespace</a>, whose
   <a title="concept-element-local-name" href="#concept-element-local-name">local name</a> is
   <var title="">localName</var>.
  </ul>

 <li><p>Otherwise, return a <code><a href="#nodelist">NodeList</a></code> rooted at the
 <a href="#context-node">context node</a>, whose filter matches only <code><a href="#element">Element</a></code>
 nodes whose <a title="concept-element-local-name" href="#concept-element-local-name">local name</a> is
 <var title="">localName</var>.
</ol>
<p>When invoked with the same argument the same <code><a href="#nodelist">NodeList</a></code> object may be returned as returned by an earlier call.

<p class="note">Thus, in an <a href="#html-document">HTML document</a>,
<code title="">document.getElementsByTagName("FOO")</code> will match
<code title="">FOO</code> elements that are not in the
<a href="#html-namespace">HTML namespace</a>, and <code title="">foo</code> elements that are in
the <a href="#html-namespace">HTML namespace</a>, but not <code title="">FOO</code> elements
that are in the <a href="#html-namespace">HTML namespace</a>.


<p>The <dfn title="dom-Document-getElementsByTagNameNS" id="dom-document-getelementsbytagnamens"><code>getElementsByTagNameNS(<var title="">namespace</var>, <var title="">localName</var>)</code></dfn> method must run these steps:
<ol>
 <li><p>If both <var title="">namespace</var> and <var title="">localName</var> are
 "<code>*</code>" (U+002A) return a <code><a href="#nodelist">NodeList</a></code> rooted at the
 <a href="#context-node">context node</a>, whose filter matches only <code><a href="#element">Element</a></code>
 nodes.
 <li><p>Otherwise, if just <var title="">namespace</var> is "<code>*</code>"
 (U+002A), return a <code><a href="#nodelist">NodeList</a></code> rooted at the
 <a href="#context-node">context node</a>, whose filter matches only <code><a href="#element">Element</a></code>
 nodes whose <a title="concept-element-local-name" href="#concept-element-local-name">local name</a> is
 <var title="">localName</var>.
 <li><p>Otherwise, if just <var title="">localName</var> is "<code>*</code>"
 (U+002A), return a <code><a href="#nodelist">NodeList</a></code> rooted at the
 <a href="#context-node">context node</a>, whose filter matches only <code><a href="#element">Element</a></code>
 nodes whose <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> is
 <var title="">namespace</var>.
 <li><p>Otherwise, return a <code><a href="#nodelist">NodeList</a></code> rooted at the
 <a href="#context-node">context node</a>, whose filter matches only <code><a href="#element">Element</a></code> nodes whose <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> is
 <var title="">namespace</var> and
 <a title="concept-element-local-name" href="#concept-element-local-name">local name</a> is
 <var title="">localName</var>.
</ol>
<p>When invoked with the same argument the same <code><a href="#nodelist">NodeList</a></code> object may be returned as returned by an earlier call.



<p>The <dfn title="dom-Document-getElementsByClassName" id="dom-document-getelementsbyclassname"><code>getElementsByClassName(<var title="">classNames</var>)</code></dfn> method takes a string that contains a
<a href="#set-of-space-separated-tokens">set of space-separated tokens</a> representing <a title="concept-class" href="#concept-class">classes</a>. When called, the method must return a <a title="concept-collection-live" href="#concept-collection-live">live</a> <code><a href="#nodelist">NodeList</a></code> object
containing all the elements in the <a href="#context-node">context node</a>, in <a href="#tree-order">tree
order</a>, that have all the <a title="concept-class" href="#concept-class">classes</a>
specified in the <var title="">classNames</var> argument, having obtained the
<a title="concept-class" href="#concept-class">classes</a> by <a title="split a string on
spaces" href="#split-a-string-on-spaces">splitting the string on spaces</a>. (Duplicates are ignored.) If
there are no tokens specified in the argument, then the method must return an
empty <code><a href="#nodelist">NodeList</a></code>. If the document is in <a title="concept-quirks-mode" href="#concept-quirks-mode">quirks mode</a>, then the comparisons for the <a title="concept-class" href="#concept-class">classes</a> must be done in an <a href="#ascii-case-insensitive">ASCII
case-insensitive</a> manner, otherwise, the comparisons must be done in a
<a href="#case-sensitive">case-sensitive</a> manner.
<p>When invoked with the same argument the same <code><a href="#nodelist">NodeList</a></code> object may be returned as returned by an earlier call.

<div class="example">
 <p>Given the following XHTML fragment:

 <pre>&lt;div id="example"&gt;
  &lt;p id="p1" class="aaa bbb"/&gt;
  &lt;p id="p2" class="aaa ccc"/&gt;
  &lt;p id="p3" class="bbb ccc"/&gt;
&lt;/div&gt;</pre>

 <p>A call to
 <code title="dom-Element-getElementsByClassName"><a href="#dom-element-getelementsbyclassname">document.getElementById('example').getElementsByClassName('aaa')</a></code>
 would return a <code><a href="#nodelist">NodeList</a></code> with the two paragraphs
 <code title="">p1</code> and <code title="">p2</code> in it.

 <p>A call to
 <code title="dom-Element-getElementsByClassName"><a href="#dom-element-getelementsbyclassname">getElementsByClassName('ccc&nbsp;bbb')</a></code>
 would only return one node, however, namely <code title="">p3</code>. A call to
 <code title="dom-Element-getElementsByClassName"><a href="#dom-element-getelementsbyclassname">document.getElementById('example').getElementsByClassName('bbb&nbsp;&nbsp;ccc&nbsp;')</a></code>
 would return the same thing.

 <p>A call to
 <code title="dom-Element-getElementsByClassName"><a href="#dom-element-getelementsbyclassname">getElementsByClassName('aaa,bbb')</a></code>
 would return no nodes; none of the elements above are in the
 <code title="">aaa,bbb</code> class.
</div>

<!-- v2:
>         * xGetParentElementByClassName(rootElement, className, tagName) -
> Navigates upwards until we hit a parent element with the given class name and
> optional tag name.
-->

<p>The
<dfn title="dom-Document-getElementById" id="dom-document-getelementbyid"><code>getElementById(<var title="">elementId</var>)</code></dfn>
method must return the first <code><a href="#element">Element</a></code> node, in
<a href="#tree-order">tree order</a>, in the <a href="#context-node">context node</a> whose
<a title="concept-ID" href="#concept-id">ID</a> is <var title="">elementId</var>, or null if there
is none.

<hr>

<p>The <dfn title="dom-Document-createElement" id="dom-document-createelement"><code>createElement(<var title="">localName</var>)</code></dfn> method must run the these steps:

<ol>
 <li><p>If <var title="">localName</var> does not match the <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Name">Name</a></code> production in XML, throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.

 <li><p>If the <a href="#context-node">context node</a> is an <a href="#html-document">HTML document</a>,
 let <var title="">localName</var> be <a href="#converted-to-lowercase">converted to lowercase</a>.
 <!-- XXX why restrict this to HTML documents? -->

 <li><p>Return a new <code><a href="#element">Element</a></code> node with no attributes,
 <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> set to the
 <a href="#html-namespace">HTML namespace</a>,
 <a title="concept-element-local-name" href="#concept-element-local-name">local name</a> set to
 <var title="">localName</var>, and
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to the
 <a href="#context-node">context node</a>.
</ol>

<p>The
<dfn title="dom-Document-createElementNS" id="dom-document-createelementns"><code>createElementNS(<var title="">namespace</var>, <var title="">qualifiedName</var>)</code></dfn>
method must run these steps:
<ol>
 <li><p>If <var title="">qualifiedName</var> does not match the
 <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Name">Name</a></code> production in XML, throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.
 <li><p>If <var title="">qualifiedName</var> does not match the
 <code class="external"><a href="http://www.w3.org/TR/xml-names/#NT-QName">QName</a></code> production in Namespaces in XML,
 throw a <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code>
 exception and terminate these steps.
 <li><p>If <var title="">qualifiedName</var> contains a "<code>:</code>" (U+003E),
 then split the string on it and let <var title="">prefix</var> be the part before
 and <var title="">localName</var> the part after. Otherwise, let <var title="">prefix</var>
 be null and <var title="">localName</var> be <var title="">qualifiedName</var>.
 <li><p>If <var title="">prefix</var> is not null and <var title="">namespace</var> is an
 empty string, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.
 <li><p>If <var title="">prefix</var> is "<code title="">xml</code>" and
 <var title="">namespace</var> is not the <a href="#xml-namespace">XML namespace</a>, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.
 <li><p>If <var title="">qualifiedName</var> or <var title="">prefix</var> is
 "<code title="">xmlns</code>" and <var title="">namespace</var> is not the
 <a href="#xmlns-namespace">XMLNS namespace</a>, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.
 <li><p>If <var title="">namespace</var> is the <a href="#xmlns-namespace">XMLNS namespace</a> and
 neither <var title="">qualifiedName</var> nor <var title="">prefix</var> is
 "<code title="">xmlns</code>", throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.
 <li><p>Return a new <code><a href="#element">Element</a></code> node with no attributes,
 <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> set to <var title="">namespace</var>,
 <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a> set to
 <var title="">prefix</var>, <a title="concept-element-local-name" href="#concept-element-local-name">local name</a>
 set to <var title="">localName</var>, and
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to the
 <a href="#context-node">context node</a>.
</ol>

<p>The
<dfn title="dom-Document-createDocumentFragment" id="dom-document-createdocumentfragment"><code>createDocumentFragment()</code></dfn>
method must return a new <code><a href="#documentfragment">DocumentFragment</a></code> node with its
<code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to the
<a href="#context-node">context node</a>.

<p>The <dfn title="dom-Document-createTextNode" id="dom-document-createtextnode"><code>createTextNode(<var title="">data</var>)</code></dfn> method must return a new <code><a href="#text">Text</a></code> node with its <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> attribute set to <var title="">data</var> and <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to the <a href="#context-node">context node</a>.
<p class="note">No check is performed that the text node contains characters that
match the <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Char">Char</a></code> production in XML.

<p>The <dfn title="dom-Document-createComment" id="dom-document-createcomment"><code>createComment(<var title="">data</var>)</code></dfn> method must return a new <code><a href="#comment">Comment</a></code> node with its <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> attribute set to <var title="">data</var> and <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to the <a href="#context-node">context node</a>.
<p class="note">No check is performed that the comment contains characters that
match the <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Char">Char</a></code> production in XML or that it
contains two adjacent hyphens or ends with a hyphen.

<p>The <dfn title="dom-Document-createProcessingInstruction" id="dom-document-createprocessinginstruction"><code>createProcessingInstruction(<var title="">target</var>, <var title="">data</var>)</code></dfn> method must run these steps:

<ol>
 <li><p>If the <a href="#context-node">context node</a> is an <a href="#html-document">HTML document</a>, throw
 a <code title="dom-DOMException-NOT_SUPPORTED_ERR"><a href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <var title="">target</var> does not match the <!--<code
 data-anolis-spec=xml>PITarget</code>--> <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Name">Name</a></code>
 production in XML, throw an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps. <!-- DOM3 didn't check for "xml" -->

 <li><p>If <var title="">data</var> contains the string "<code title="">?&gt;</code>",
 throw an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps. <!-- Gecko does this. -->

 <!--<li><p>If <var title>target</var> contains a U+003A COLON (":") character, throw a <code title=dom-DOMException-NAMESPACE_ERR>NAMESPACE_ERR</code> exception and terminate these steps.--> <!-- DOM3 didn't check this -->

 <li><p>Return a new <code><a href="#processinginstruction">ProcessingInstruction</a></code>, with
 <a title="concept-PI-target" href="#concept-pi-target">target</a> set to <var title="">target</var>,
 <a title="concept-PI-data" href="#concept-pi-data">data</a> set to <var title="">data</var>, and
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to the
 <a href="#context-node">context node</a>.
</ol>

<p class="note">No check is performed that the processing instruction target
contains "xml" or the colon, or that the data contains characters that match the
<code class="external"><a href="http://www.w3.org/TR/xml/#NT-Char">Char</a></code> production in XML.

<!--
[createAttribute]
<p>The <dfn title=dom-Document-createAttribute><code>createAttribute(<var title>name</var>)</code></dfn> method must run these steps:
<ol>
 <li><p>If <var title>name</var> does not match the <code data-anolis-spec=xml>Name</code> production in XML, throw an
 <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code>
 exception and terminate these steps.
 <li><p>Return a new <code>Attr</code> node with its <code title=dom-Node-namespaceURI>namespaceURI</code> set to null, <code title=dom-Node-prefix>prefix</code> set to null, <code title=dom-Node-localName>localName</code> set to <var title>name</var>, and <code title=dom-Node-ownerDocument>ownerDocument</code> set to the <span>context node</span>.
</ol>-->
<!-- this is different from DOM3 -->
<!--<p class=note>No check is performed that the local name will match the <code
data-anolis-spec=xmlns>NCName</code> production in Namespaces in XML.-->

<hr>

<p>The
<dfn title="dom-Document-importNode" id="dom-document-importnode"><code>importNode(<var title="">node</var>, <var title="">deep</var>)</code></dfn>
method must return a <a href="#clone">clone</a> of <var title="">node</var>, with
<var title="">new ownerDocument</var> being the <a href="#context-node">context node</a>, and the
<i><a href="#clone-children-flag">clone children flag</a></i> set if <var title="">deep</var> is true.

<p>The
<dfn title="dom-Document-adoptNode" id="dom-document-adoptnode"><code>adoptNode(<var title="">node</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If <var title="">node</var> is a <code><a href="#document">Document</a></code> node or a
 <code><a href="#documenttype">DocumentType</a></code> node, throw a
 <code title="dom-DOMException-NOT_SUPPORTED_ERR"><a href="#dom-domexception-not_supported_err">NOT_SUPPORTED_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <var title="">node</var> is an <code><a href="#element">Element</a></code> node, it is
 <a href="#affected-by-a-base-url-change">affected by a base URL change</a>.

 <li><p>If <var title="">node</var>'s <code title="dom-Node-parentNode"><a href="#dom-node-parentnode">parentNode</a></code> is not null, remove
 <var title="">node</var> from its parent.

 <li><p>Set <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> for
 <var title="">node</var> and all its descendent nodes<!--AttrExodus as well as any associated
 <code>Attr</code> nodes--> to the <a href="#context-node">context node</a>.

 <li><p>Return <var title="">node</var>.
</ol>

<hr>

<h4 id="interface-domimplementation"><span class="secno">5.3.1 </span>Interface <code><a href="#domimplementation">DOMImplementation</a></code></h4>
<p>User agents must create a new <code><a href="#domimplementation">DOMImplementation</a></code> object whenever a new <code><a href="#document">Document</a></code> node is created and associate it with the that <code><a href="#document">Document</a></code> node.

<pre class="idl">interface <dfn id="domimplementation">DOMImplementation</dfn> {
  boolean <a title="dom-DOMImplementation-hasFeature" href="#dom-domimplementation-hasfeature">hasFeature</a>(DOMString feature, [TreatNullAs=EmptyString] DOMString version);

  <a href="#documenttype">DocumentType</a> <a title="dom-DOMImplementation-createDocumentType" href="#dom-domimplementation-createdocumenttype">createDocumentType</a>([TreatNullAs=EmptyString] DOMString qualifiedName, DOMString publicId, DOMString systemId);
  <a href="#document">Document</a> <a title="dom-DOMImplementation-createDocument" href="#dom-domimplementation-createdocument">createDocument</a>([TreatNullAs=EmptyString] DOMString namespace, [TreatNullAs=EmptyString] DOMString qualifiedName, <a href="#documenttype">DocumentType</a> doctype);<!--
  DOMObject getFeature(DOMString feature, DOMString version);-->
  <a href="#document">Document</a> <a title="dom-DOMImplementation-createHTMLDocument" href="#dom-domimplementation-createhtmldocument">createHTMLDocument</a>(DOMString title);
};</pre>

<dl class="domintro">
 <dt><var title="">hasSupport</var> = <var title="">document</var> . <code title="dom-Document-implementation"><a href="#dom-document-implementation">implementation</a></code> . <code title="dom-DOMImplementation-hasFeature"><a href="#dom-domimplementation-hasfeature">hasFeature</a></code>(
 <var title="">feature</var>, <var title="">version</var> )

 <dd>
  <p>Returns whether the user agent supports the version <var title="">version</var> of <var title="">feature</var>. The empty string means any
  version.
</dl>

<div class="impl">

<p>The <dfn title="dom-DOMImplementation-hasFeature" id="dom-domimplementation-hasfeature"><code>hasFeature(<var title="">feature</var>, <var title="">version</var>)</code></dfn> method must return
true if the user agent <a title="concept-support-DOMfeatureversion" href="#concept-support-domfeatureversion">supports</a>
the (<var title="">feature</var>, <var title="">version</var>) tuple and false
otherwise.

</div>

<hr>

<dl class="domintro">
 <dt><var title="">doctype</var> = <var title="">document</var> . <code title="dom-Document-implementation"><a href="#dom-document-implementation">implementation</a></code> . <code title="dom-DOMImplementation-createDocumentType"><a href="#dom-domimplementation-createdocumenttype">createDocumentType</a></code>(
 <var title="">qualifiedName</var>, <var title="">publicId</var>, <var title="">systemId</var> )

 <dd>
  <p>Returns a new <code><a href="#documenttype">DocumentType</a></code>, with the given <var title="">qualifiedName</var>, <var title="">publicId</var>, and <var title="">systemId</var>. If <var title="">qualifiedName</var> does not match the <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Name">Name</a></code> production in XML, an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
  exception is thrown, and if it does not match the <code class="external"><a href="http://www.w3.org/TR/xml-names/#NT-NCName">NCName</a></code> production in Namespaces in XML, a <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception is thrown.


 <dt><var title="">doc</var> = <var title="">document</var> . <code title="dom-Document-implementation"><a href="#dom-document-implementation">implementation</a></code> . <code title="dom-DOMImplementation-createDocument"><a href="#dom-domimplementation-createdocument">createDocument</a></code>( <var title="">namespace</var>, <var title="">qualifiedName</var>, <var title="">doctype</var> )

 <dd>
  <p>Returns a new <code><a href="#document">Document</a></code>, with a new root
  <code><a href="#element">Element</a></code> whose <code title="dom-Node-localName"><a href="#dom-node-localname">localName</a></code> is
  <var title="">qualifiedName</var> and whose <code title="dom-Node-namespaceURI"><a href="#dom-node-namespaceuri">namespaceURI</a></code> is <var title="">namespace</var> (unless <var title="">qualifiedName</var> is the empty
  string), and with <var title="">doctype</var>, if it is given, as its <code><a href="#documenttype">DocumentType</a></code>.

  <p>This method throws the same exceptions as the <code title="dom-Document-createElementNS"><a href="#dom-document-createelementns">createElementNS</a></code> method, when called
  with the same arguments. If <var title="">doctype</var> comes from another
  <code><a href="#document">Document</a></code>, a <code title="dom-DOMException-WRONG_DOCUMENT_ERR"><a href="#dom-domexception-wrong_document_err">WRONG_DOCUMENT_ERR</a></code> exception
  is thrown.


 <dt><var title="">doc</var> = <var title="">document</var> . <code title="dom-Document-implementation"><a href="#dom-document-implementation">implementation</a></code> . <code title="dom-DOMImplementation-createHTMLDocument"><a href="#dom-domimplementation-createhtmldocument">createHTMLDocument</a></code>(
 <var title="">title</var> )

 <dd>
  <p>Returns a new <code><a href="#document">Document</a></code>, with a basic DOM already
  constructed with an appropriate <code title="">title</code> element.
</dl>

<div class="impl">

<p>The <dfn title="dom-DOMImplementation-createDocumentType" id="dom-domimplementation-createdocumenttype"><code>createDocumentType(<var title="">qualifiedName</var>, <var title="">publicId</var>, <var title="">systemId</var>)</code></dfn> method must run the following steps:

<ol>
 <li><p>If <var title="">qualifiedName</var> does not match the <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Name">Name</a></code> production in XML, throw an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.
 <li><p>If <var title="">qualifiedName</var> does not match the <code class="external"><a href="http://www.w3.org/TR/xml-names/#NT-NCName">NCName</a></code> production in Namespaces in XML, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception and
 terminate these steps.
 <!--<li><p>If <var title>publicId</var> contains a character that does not match the <code data-anolis-spec=xml>PubidChar</code> production in XML, throw an
 <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code>
 exception and terminate these steps. --> <!-- DOM3 didn't check this -->
 <!--<li><p>If <var title>systemId</var> contains both a U+0022 QUOTATION MARK ('"') and a U+0027 APOSTROPHE ("'") character, throw an
 <code title=dom-DOMException-INVALID_CHARACTER_ERR>INVALID_CHARACTER_ERR</code>
 exception and terminate these steps.--> <!-- DOM3 didn't check this -->
 <li><p>Return a new <code><a href="#documenttype">DocumentType</a></code>, with <var title="">qualifiedName</var> as its <a title="concept-doctype-name" href="#concept-doctype-name">name</a>, <var title="">publicId</var> as its <a title="concept-doctype-publicid" href="#concept-doctype-publicid">public ID</a>, and <var title="">systemId</var>
 as its <a title="concept-doctype-systemid" href="#concept-doctype-systemid">system ID</a>, and with its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to null.
</ol>
<p class="note">No check is performed that the <var title="">publicId</var> matches the <code title="">PublicChar</code> production in XML or that the <var title="">systemId</var> does not contain both a quotation mark (") and an apostrophe (').

<p>The <dfn title="dom-DOMImplementation-createDocument" id="dom-domimplementation-createdocument"><code>createDocument(<var title="">namespace</var>, <var title="">qualifiedName</var>, <var title="">doctype</var>)</code></dfn> method must run the following steps:

<ol>
 <li><p>Let <var title="">document</var> be a new <code><a href="#document">Document</a></code> node.

 <li><p>Let <var title="">element</var> be null.

 <li><p>If <var title="">qualifiedName</var> is not the empty string, set
 <var title="">element</var> to the result of invoking the
 <code title="dom-Document-createElementNS"><a href="#dom-document-createelementns">createElementNS</a></code> method with the
 arguments <var title="">namespace</var> and <var title="">qualifiedName</var> on
 <var title="">document</var>. If that threw an exception, terminate these steps.

 <li>
  <p>If <var title="">doctype</var> is not null, run the following substeps:

  <ol>
   <li><p>If the <var title="">doctype</var>'s
   <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is not null, throw a
   <code title="dom-DOMException-WRONG_DOCUMENT_ERR"><a href="#dom-domexception-wrong_document_err">WRONG_DOCUMENT_ERR</a></code>
   exception and terminate the overall set of steps.

   <li><p>Set the <var title="">doctype</var>'s
   <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> to
   <var title="">document</var>.

   <li><p>Append <var title="">doctype</var> to <var title="">document</var>.
  </ol>

 <li><p>If <var title="">element</var> is not null, append <var title="">element</var>
 to <var title="">document</var>.

 <li><p>Return <var title="">document</var>.
</ol>

<p>The <dfn title="dom-DOMImplementation-createHTMLDocument" id="dom-domimplementation-createhtmldocument"><code>createHTMLDocument(<var title="">title</var>)</code></dfn> method, when invoked, must run the following
steps:

<ol>
 <li><p>Let <var title="">doc</var> be a newly created <code><a href="#document">Document</a></code>
 object.

 <li><p>Mark <var title="">doc</var> as being an <a href="#html-document">HTML document</a>.

 <li><p>Create a new <code><a href="#documenttype">DocumentType</a></code>, with "<code title="">html</code>" as its <a title="concept-doctype-name" href="#concept-doctype-name">name</a> and with its <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> set to <var title="">doc</var>. Append the newly created node to <var title="">doc</var>.

 <li><p>Create an <code title="">html</code> element in the <a href="#html-namespace">HTML
 namespace</a>, and append it to <var title="">doc</var>.

 <li><p>Create a <code title="">head</code> element in the <a href="#html-namespace">HTML
 namespace</a>, and append it to the <code title="">html</code> element created in the previous step.

 <li><p>Create a <code title="">title</code> element in the <a href="#html-namespace">HTML
 namespace</a>, and append it to the <code title="">head</code> element created in the previous step.

 <li><p>Create a <code><a href="#text">Text</a></code> node, and set its <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> attribute to the string given by the
 method's argument (which could be the empty string). Append it to the
 <code title="">title</code> element created in the previous step.

 <li><p>Create a <code title="">body</code> element in the <a href="#html-namespace">HTML
 namespace</a>, and append it to the <code title="">html</code> element created
 in the earlier step.

 <li><p>Return <var title="">doc</var>.
</ol>

</div>

<!-- AttrExodus
<h3>Interface <code>Attr</code></h3>

<p>The tentative plan is to let <code>Attr</code> no longer have
child nodes and turn it into a very lightweight object that no longer
inherits from <code>Node</code> &mdash;
<a href=http://lists.w3.org/Archives/Public/public-webapps/2010JulSep/0797.html>http://lists.w3.org/Archives/Public/public-webapps/2010JulSep/0797.html</a>

<pre class=idl>interface <dfn>Attr</dfn> : <span>Node</span> {
  readonly attribute DOMString <span title=dom-Attr-name>name</span>;
  readonly attribute boolean <span title=dom-Attr-specified>specified</span>;
           attribute DOMString <span title=dom-Attr-value>value</span>;
  readonly attribute <span>Element</span> <span title=dom-Attr-ownerElement>ownerElement</span>;<!- -
  readonly attribute TypeInfo schemaTypeInfo;
  readonly attribute boolean isId;- ->
};</pre>

<p><code>Attr</code> nodes represent <dfn
title=concept-attribute>attributes</dfn>. They have a <dfn
title=concept-attribute-name>name</dfn> and an <dfn
title=concept-attribute-element>element</dfn> associated with them when they are
created<!- -, or when they are passed as the argument to the <code
title=dom-Element-setAttributeNode>setAttributeNode</code> method.
[createAttribute]- ->. <code>Attr</code> nodes are not considered part of the
document tree, so their <code title=dom-Node-parentNode>parentNode</code>, <code
title=dom-Node-previousSibling>previousSibling</code> and <code
title=dom-Node-nextSibling>nextSibling</code> attributes return null. Also, its
child nodes can not be manipulated directly through the <code
title=dom-Node-insertBefore>insertBefore</code>, <code
title=dom-Node-replaceChild>replaceChild</code> and <code
title=dom-Node-appendChild>appendChild</code> methods.

<p>The <dfn title=dom-Attr-name><code>name</code></dfn> attribute must return
the <span title=concept-attribute-name>name</span> associated with the
<span>context node</span>.

<p>The <dfn title=dom-Attr-specified><code>specified</code></dfn> attribute must
return true.

<p>The <dfn title=dom-Attr-value><code>value</code></dfn> attribute must return the value of the <span>context node</span>'s
<code title=dom-Node-textContent>textContent</code> attribute and on
setting, must set the <span>context node</span>'s
<code title=dom-Node-textContent>textContent</code> attribute to the given
value.

<p>The <dfn title=dom-Attr-ownerElement><code>ownerElement</code></dfn>
attribute must return the <span title=concept-attribute-element>element</span>
associated with the <span>context node</span><!- -, if there is one, or null
otherwise [createAttribute]- ->.
-->


<h3 id="interface-element"><span class="secno">5.4 </span>Interface <code><a href="#element">Element</a></code></h3>
<pre class="idl">interface <dfn id="element">Element</dfn> : <a href="#node">Node</a> {
  readonly attribute DOMString <a title="dom-Element-namespaceURI" href="#dom-element-namespaceuri">namespaceURI</a>;
  readonly attribute DOMString <a title="dom-Element-prefix" href="#dom-element-prefix">prefix</a>;
  readonly attribute DOMString <a title="dom-Element-localName" href="#dom-element-localname">localName</a>;
  readonly attribute DOMString <a title="dom-Element-tagName" href="#dom-element-tagname">tagName</a>;

  readonly attribute <a href="#attr">Attr</a>[] <a title="dom-Element-attributes" href="#dom-element-attributes">attributes</a>;
  DOMString? <a title="dom-Element-getAttribute" href="#dom-element-getattribute">getAttribute</a>(DOMString <var title="">qualifiedName</var>);
  DOMString? <a title="dom-Element-getAttributeNS" href="#dom-element-getattributens">getAttributeNS</a>(DOMString <var title="">namespace</var>, DOMString <var title="">localName</var>);
  void <a title="dom-Element-setAttribute" href="#dom-element-setattribute">setAttribute</a>(DOMString <var title="">qualifiedName</var>, DOMString <var title="">value</var>);
  void <a title="dom-Element-setAttributeNS" href="#dom-element-setattributens">setAttributeNS</a>(DOMString <var title="">namespace</var>, DOMString <var title="">qualifiedName</var>, DOMString <var title="">value</var>);
  void <a title="dom-Element-removeAttribute" href="#dom-element-removeattribute">removeAttribute</a>(DOMString <var title="">qualifiedName</var>);
  void <a title="dom-Element-removeAttributeNS" href="#dom-element-removeattributens">removeAttributeNS</a>(DOMString <var title="">namespace</var>, DOMString <var title="">localName</var>);
  boolean <a title="dom-Element-hasAttribute" href="#dom-element-hasattribute">hasAttribute</a>(DOMString <var title="">qualifiedName</var>);
  boolean <a title="dom-Element-hasAttributeNS" href="#dom-element-hasattributens">hasAttributeNS</a>(DOMString <var title="">namespace</var>, DOMString <var title="">localName</var>);
<!--
  <span>Attr</span> <span title=dom-Element-getAttributeNode>getAttributeNode</span>(DOMString name);
  <span>Attr</span> <span title=dom-Element-getAttributeNodeNS>getAttributeNodeNS</span>(DOMString namespace, DOMString localName);
  <span>Attr</span> <span title=dom-Element-setAttributeNode>setAttributeNode</span>(Attr newAttr);
  <span>Attr</span> <span title=dom-Element-removeAttributeNode>removeAttributeNode</span>(Attr oldAttr);
-->
  readonly attribute <a href="#htmlcollection">HTMLCollection</a> <a title="dom-Element-children" href="#dom-element-children">children</a>;
  <a href="#nodelist">NodeList</a> <a title="dom-Element-getElementsByTagName" href="#dom-element-getelementsbytagname">getElementsByTagName</a>(DOMString <var title="">qualifiedName</var>);
  <a href="#nodelist">NodeList</a> <a title="dom-Element-getElementsByTagNameNS" href="#dom-element-getelementsbytagnamens">getElementsByTagNameNS</a>(DOMString <var title="">namespace</var>, DOMString <var title="">localName</var>);
  <a href="#nodelist">NodeList</a> <a title="dom-Element-getElementsByClassName" href="#dom-element-getelementsbyclassname">getElementsByClassName</a>(DOMString <var title="">classNames</var>);<!--
  readonly attribute TypeInfo schemaTypeInfo;
  void setIdAttribute(DOMString name, boolean isId);
  void setIdAttributeNS(DOMString namespace, DOMString localName, boolean isId);
  void setIdAttributeNode(Attr idAttr, boolean isId);-->
};</pre>

<p><code><a href="#element">Element</a></code> nodes have an associated <dfn title="concept-element-namespace" id="concept-element-namespace">namespace</dfn>, <dfn title="concept-element-namespace-prefix" id="concept-element-namespace-prefix">namespace prefix</dfn>, <dfn title="concept-element-local-name" id="concept-element-local-name">local name</dfn>.

<p>When an <code><a href="#element">Element</a></code> node is created its <a title="concept-element-local-name" href="#concept-element-local-name">local name</a> is always given. Unless explicitly given when an <code><a href="#element">Element</a></code> node is created, its <a title="concept-element-namespace" href="#concept-element-namespace">namespace</a> and <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a> are null.

<p><code><a href="#element">Element</a></code> nodes also have an associated collection of
<code><a href="#attr">Attr</a></code> objects, often called attributes.

<p><code><a href="#element">Element</a></code> nodes can have a
<dfn title="concept-id" id="concept-id">unique identifier (ID)</dfn> and
<dfn title="concept-class" id="concept-class">classes</dfn> associated with them.

<p class="XXX">I think rather than leaving this up to markup specifications we
should just state that id="" sets the ID and class="" sets the classes. We
can then also define Element.id, Element.className, and Element.classList
here. It would simplify a lot of stuff.

<p>Specifications may define <dfn id="base-url-change-steps">base URL change steps</dfn>.

<p>When an <code><a href="#element">Element</a></code> node is <dfn id="affected-by-a-base-url-change">affected by a base URL
change</dfn>, the user agent must run the <a href="#base-url-change-steps">base URL change steps</a>, as
defined in <a href="#other-applicable-specifications">other applicable specifications</a>.

<hr>

<p>The <dfn title="dom-Element-namespaceURI" id="dom-element-namespaceuri"><code>namespaceURI</code></dfn>
attribute must return the <a href="#context-node">context node</a>'s
<a title="concept-element-namespace" href="#concept-element-namespace">namespace</a>.

<p>The <dfn title="dom-Element-prefix" id="dom-element-prefix"><code>prefix</code></dfn> attribute must return the <a href="#context-node">context node</a>'s
<a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a>.

<p>The <dfn title="dom-Element-localName" id="dom-element-localname"><code>localName</code></dfn>
attribute must return the <a href="#context-node">context node</a>'s
<a title="concept-element-local-name" href="#concept-element-local-name">local name</a>.

<p>The <dfn title="dom-Element-tagName" id="dom-element-tagname"><code>tagName</code></dfn> attribute
must run these steps:
<ol>
 <li><p>If <a href="#context-node">context node</a>'s
 <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a> is not
 null, let <var title="">qualified name</var> be its
 <a title="concept-element-namespace-prefix" href="#concept-element-namespace-prefix">namespace prefix</a>, followed
 by a "<code>:</code>" (U+003A), followed by its
 <a title="concept-element-local-name" href="#concept-element-local-name">local name</a>. Otherwise, let
 <var title="">qualified name</var> be its
 <a title="concept-element-local-name" href="#concept-element-local-name">local name</a>.

 <li><p>If the <a href="#context-node">context node</a> is in the <a href="#html-namespace">HTML namespace</a> and
 its <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is an
 <a href="#html-document">HTML document</a>, let <var title="">qualified name</var> be
 <a href="#converted-to-uppercase">converted to uppercase</a>.

 <li><p>Return <var title="">qualified name</var>.
</ol>

<hr>

<!-- all members in this subsection are affected by AttrExodus -->

<p>The <dfn title="dom-Element-attributes" id="dom-element-attributes"><code>attributes</code></dfn>
attribute must return a read only array<!--XXX WebIDL--> of the
<a href="#context-node">context node</a>'s associated <code><a href="#attr">Attr</a></code> objects.

<p>The <dfn title="dom-Element-getAttribute" id="dom-element-getattribute"><code>getAttribute(<var title="">name</var>)</code></dfn> method must run these steps:
<ol>
 <li><p>If the <a href="#context-node">context node</a> is in the
 <a href="#html-namespace">HTML namespace</a> and its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is an
 <a href="#html-document">HTML document</a>, let <var title="">name</var> be <a href="#converted-to-lowercase">converted to lowercase</a>.

 <li><p>Return the <a title="concept-attr-value" href="#concept-attr-value">value</a> of the first
 <code><a href="#attr">Attr</a></code> in the <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> whose
 <a title="concept-attr-qualified-name" href="#concept-attr-qualified-name">qualified name</a> is
 <var title="">name</var>, if the <code><a href="#attr">Attr</a></code> is present, or null otherwise.
</ol>

<p>The
<dfn title="dom-Element-getAttributeNS" id="dom-element-getattributens"><code>getAttributeNS(<var title="">namespace</var>, <var title="">localName</var>)</code></dfn>
method must return the <a title="concept-attr-value" href="#concept-attr-value">value</a> of the
<code><a href="#attr">Attr</a></code> in the <a href="#context-node">context node</a>'s
<code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> whose
<a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a> is
<var title="">namespace</var> and
<a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
<var title="">localName</var>, if the <code><a href="#attr">Attr</a></code> is present, or null
otherwise.

<p>The
<dfn title="dom-Element-setAttribute" id="dom-element-setattribute"><code>setAttribute(<var title="">qualifiedName</var>, <var title="">value</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If <var title="">qualifiedName</var> does not match the
 <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Name">Name</a></code> production in XML, throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.

 <li><p>If the <a href="#context-node">context node</a> is in the <a href="#html-namespace">HTML namespace</a>
 and its <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is an
 <a href="#html-document">HTML document</a>, let <var title="">qualifiedName</var> be
 <a href="#converted-to-lowercase">converted to lowercase</a>.

 <!-- https://bugzilla.mozilla.org/show_bug.cgi?id=315805 -->
 <li><p>If "<code title="">xmlns</code>" is a <a href="#prefix-match">prefix match</a> for
 <var title="">qualifiedName</var>, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> and
 terminate these steps.

 <li><p>If the <a href="#context-node">context node</a> does not have an <code><a href="#attr">Attr</a></code>
 object whose <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
 <var title="">qualifiedName</var>, create an <code><a href="#attr">Attr</a></code> object, whose
 <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
 <var title="">qualifiedName</var> and <a title="concept-attr-value" href="#concept-attr-value">value</a>
 is <var title="">value</var>. Append this object to the
 <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code>.

 <li><p>Otherwise, set the <a title="concept-attr-value" href="#concept-attr-value">value</a> of
 the first <code><a href="#attr">Attr</a></code> object in the <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> whose
 <a title="concept-attr-qualified-name" href="#concept-attr-qualified-name">qualified name</a> is
 <var title="">qualifiedName</var>, to <var title="">value</var>.
</ol>

<p>The
<dfn title="dom-Element-setAttributeNS" id="dom-element-setattributens"><code>setAttributeNS(<var title="">namespace</var>, <var title="">qualifiedName</var>, <var title="">value</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If <var title="">qualifiedName</var> does not match the
 <code class="external"><a href="http://www.w3.org/TR/xml/#NT-Name">Name</a></code> production in XML, throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <var title="">qualifiedName</var> does not match the
 <code class="external"><a href="http://www.w3.org/TR/xml-names/#NT-QName">QName</a></code> production in Namespaces in XML,
 throw a <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <var title="">qualifiedName</var> contains a "<code>:</code>" (U+003E),
 then split the string on it and let <var title="">prefix</var> be the part before
 and <var title="">localName</var> the part after. Otherwise, let
 <var title="">prefix</var> be null and <var title="">localName</var> be
 <var title="">qualifiedName</var>.

 <li><p>If <var title="">namespace</var> is the empty string, let
 <var title="">namespace</var> be null.

 <li><p>If <var title="">prefix</var> is not null and <var title="">namespace</var> is
 null, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.

 <li><p>If <var title="">prefix</var> is "<code title="">xml</code>" and
 <var title="">namespace</var> is not the <a href="#xml-namespace">XML namespace</a>, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.

 <li><p>If <var title="">qualifiedName</var> or <var title="">prefix</var> is
 "<code title="">xmlns</code>" and <var title="">namespace</var> is not the
 <a href="#xmlns-namespace">XMLNS namespace</a>, throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.

 <li><p>If <var title="">namespace</var> is the <a href="#xmlns-namespace">XMLNS namespace</a> and
 neither <var title="">qualifiedName</var> nor <var title="">prefix</var> is
 "<code title="">xmlns</code>", throw a
 <code title="dom-DOMException-NAMESPACE_ERR"><a href="#dom-domexception-namespace_err">NAMESPACE_ERR</a></code> exception
 and terminate these steps.

 <li><p>If the <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> does not contain an
 <code><a href="#attr">Attr</a></code> object whose
 <a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a> is
 <var title="">namespace</var> and
 <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
 <var title="">localName</var>, create an <code><a href="#attr">Attr</a></code> object, whose
 <a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a> is
 <var title="">namespace</var>,
 <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a> is
 <var title="">prefix</var>, <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a>
 is <var title="">localName</var>, and <a title="concept-attr-value" href="#concept-attr-value">value</a>
 is <var title="">value</var>. Append this object to the
 <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code>.

 <li><p>Otherwise, set the <a title="concept-attr-value" href="#concept-attr-value">value</a> of
 the <code><a href="#attr">Attr</a></code> object in the <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> whose
 <a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a> is
 <var title="">namespace</var>, and
 <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
 <var title="">localName</var>, to <var title="">value</var>, and set its
 <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a> to
 <var title="">prefix</var>.
</ol>

<p>The
<dfn title="dom-Element-removeAttribute" id="dom-element-removeattribute"><code>removeAttribute(<var title="">qualifiedName</var>)</code></dfn>
method must run the following steps:
<ol>
 <li><p>If the <a href="#context-node">context node</a> is in the <a href="#html-namespace">HTML namespace</a>
 and its <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is an
 <a href="#html-document">HTML document</a>, let <var title="">qualifiedName</var> be
 <a href="#converted-to-lowercase">converted to lowercase</a>.

 <li><p>Remove the first <code><a href="#attr">Attr</a></code> object in the
 <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> whose
 <a title="concept-attr-qualified-name" href="#concept-attr-qualified-name">qualified name</a> is
 <var title="">qualifiedName</var>.
</ol>

<p>The
<dfn title="dom-Element-removeAttributeNS" id="dom-element-removeattributens"><code>removeAttributeNS(<var title="">namespace</var>, <var title="">localName</var>)</code></dfn>
method must remove the <code><a href="#attr">Attr</a></code> object in the
<a href="#context-node">context node</a>'s
<code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> whose
<a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a> is
<var title="">namespace</var> and
<a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
<var title="">localName</var>

<p>The
<dfn title="dom-Element-hasAttribute" id="dom-element-hasattribute"><code>hasAttribute(<var title="">qualifiedName</var>)</code></dfn>
method must run these steps:
<ol>
 <li><p>If the <a href="#context-node">context node</a> is in the
 <a href="#html-namespace">HTML namespace</a> and its
 <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> is an
 <a href="#html-document">HTML document</a>, let <var title="">qualifiedName</var> be
 <a href="#converted-to-lowercase">converted to lowercase</a>.

 <li><p>Return true if <a href="#context-node">context node</a>'s
 <code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> contains an
 <code><a href="#attr">Attr</a></code> whose
 <a title="concept-attr-qualified-name" href="#concept-attr-qualified-name">qualified name</a> is
 <var title="">qualifiedName</var>, or false otherwise.
</ol>

<p>The
<dfn title="dom-Element-hasAttributeNS" id="dom-element-hasattributens"><code>hasAttributeNS(<var title="">namespace</var>, <var title="">localName</var>)</code></dfn>
method must return true if <a href="#context-node">context node</a>'s
<code title="dom-Element-attributes"><a href="#dom-element-attributes">attributes</a></code> contains an
<code><a href="#attr">Attr</a></code> whose <a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a>
is <var title="">namespace</var> and
<a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is
<var title="">localName</var>, or false otherwise.

<!--<dfn title=dom-Element-getAttributeNode>getAttributeNode</dfn>: when the
Element.getAttributeNode() method is invoked on an HTML element, the name
argument must be converted to ASCII lowercase before the element's attributes
are examined. (In HTML documents.) -->

<!-- <dfn title=dom-Element-setAttributeNode>setAttributeNode</dfn>: when an
Attr node is set on an HTML element using Element.setAttributeNode(), it must
have its name converted to ASCII lowercase before the element is affected.
(In HTML documents.) -->

<hr>

<p>The <dfn title="dom-Element-children" id="dom-element-children"><code>children</code></dfn> attribute
must return an <code><a href="#htmlcollection">HTMLCollection</a></code>
<a title="concept-collection" href="#concept-collection">collection</a>, rooted at the
<a href="#context-node">context node</a>, whose filter matches only <code><a href="#element">Element</a></code>
nodes whose <code title="dom-Node-parentNode"><a href="#dom-node-parentnode">parentNode</a></code> is the
<a href="#context-node">context node</a>.

<p>The
<dfn title="dom-Element-getElementsByTagName" id="dom-element-getelementsbytagname"><code>getElementsByTagName(<var title="">qualifiedName</var>)</code></dfn>
method on the <code><a href="#element">Element</a></code> interface must return a
<a title="concept-collection-live" href="#concept-collection-live">live</a> <code><a href="#nodelist">NodeList</a></code> with the nodes that the
<code title="dom-Document-getElementsByTagName"><a href="#dom-document-getelementsbytagname">getElementsByTagName</a></code>
method would return when called on the <a href="#context-node">context node</a>'s
<code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> and passed the same
argument, excluding any elements that are not descendants of the
<a href="#context-node">context node</a> on which the method was invoked.
<p>When invoked with the same argument the same <code><a href="#nodelist">NodeList</a></code> object
may be returned as returned by an earlier call.


<p>The
<dfn title="dom-Element-getElementsByTagNameNS" id="dom-element-getelementsbytagnamens"><code>getElementsByTagNameNS(<var title="">namespace</var>, <var title="">localName</var>)</code></dfn>
method on the <code><a href="#element">Element</a></code> interface must return a
<a title="concept-collection-live" href="#concept-collection-live">live</a> <code><a href="#nodelist">NodeList</a></code> with
the nodes that the
<code title="dom-Document-getElementsByTagNameNS"><a href="#dom-document-getelementsbytagnamens">getElementsByTagNameNS</a></code>
method would return when called on the <a href="#context-node">context node</a>'s
<code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> and
passed the same arguments, excluding any elements that are not descendants
of the <a href="#context-node">context node</a> on which the method was invoked.
<p>When invoked with the same argument the same <code><a href="#nodelist">NodeList</a></code> object
may be returned as returned by an earlier call.


<p>The <dfn title="dom-Element-getElementsByClassName" id="dom-element-getelementsbyclassname"><code>getElementsByClassName(<var title="">classNames</var>)</code></dfn> method on the <code><a href="#element">Element</a></code>
interface must return a <a title="concept-collection-live" href="#concept-collection-live">live</a>
<code><a href="#nodelist">NodeList</a></code> with the nodes that the <code title="dom-Document-getElementsByClassName"><a href="#dom-document-getelementsbyclassname">getElementsByClassName</a></code>
method would return when called on the <a href="#context-node">context node</a>'s
<code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> and
passed the same argument, excluding any elements that are not descendants of
the <a href="#context-node">context node</a> on which the method was invoked.
<p>When invoked with the same argument the same <code><a href="#nodelist">NodeList</a></code> object
may be returned as returned by an earlier call.


<h4 id="interface-attr"><span class="secno">5.4.1 </span>Interface <code><a href="#attr">Attr</a></code></h4>
<pre class="idl">interface <dfn id="attr">Attr</dfn> {
  readonly attribute DOMString? <a title="dom-Attr-namespaceURI" href="#dom-attr-namespaceuri">namespaceURI</a>;
  readonly attribute DOMString? <a title="dom-Attr-prefix" href="#dom-attr-prefix">prefix</a>;
  readonly attribute DOMString <a title="dom-Attr-localName" href="#dom-attr-localname">localName</a>;
  readonly attribute DOMString <a title="dom-Attr-name" href="#dom-attr-name">name</a>;
           attribute DOMString <a title="dom-Attr-value" href="#dom-attr-value">value</a>;
};</pre>

<p>Just like <code><a href="#element">Element</a></code> nodes, <code><a href="#attr">Attr</a></code> objects have an associated <dfn title="concept-attr-namespace" id="concept-attr-namespace">namespace</dfn>, <dfn title="concept-attr-namespace-prefix" id="concept-attr-namespace-prefix">namespace prefix</dfn>, <dfn title="concept-attr-local-name" id="concept-attr-local-name">local name</dfn>, and <dfn title="concept-attr-qualified-name" id="concept-attr-qualified-name">qualified name</dfn>.

<p>When an <code><a href="#attr">Attr</a></code> object is created its <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a> is always given. Unless explicitly given when an <code><a href="#attr">Attr</a></code> object is created, its <a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a> and <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a> are null and its <a title="concept-attr-qualified-name" href="#concept-attr-qualified-name">qualified name</a> is its <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a>, followed by a "<code>:</code>" (U+003A), followed by its <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a>, if its <a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a> is not null, or otherwise <a title="concept-attr-qualified-name" href="#concept-attr-qualified-name">qualified name</a> is just its <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a>.

<p><code><a href="#attr">Attr</a></code> objects also have an associated
<dfn title="concept-attr-value" id="concept-attr-value">value</dfn>, which is always given when an
<code><a href="#attr">Attr</a></code> object is created.

<hr>

<p>The <dfn title="dom-Attr-namespaceURI" id="dom-attr-namespaceuri"><code>namespaceURI</code></dfn>
attribute must return the
<a title="concept-attr-namespace" href="#concept-attr-namespace">namespace</a>.

<p>The <dfn title="dom-Attr-prefix" id="dom-attr-prefix"><code>prefix</code></dfn> attribute must
return the
<a title="concept-attr-namespace-prefix" href="#concept-attr-namespace-prefix">namespace prefix</a>.

<p>The <dfn title="dom-Attr-localName" id="dom-attr-localname"><code>localName</code></dfn> attribute
must return the <a title="concept-attr-local-name" href="#concept-attr-local-name">local name</a>.

<p>The <dfn title="dom-Attr-name" id="dom-attr-name"><code>name</code></dfn> attribute must
return the <a title="concept-attr-qualified-name" href="#concept-attr-qualified-name">qualified name</a>.

<p>The <dfn title="dom-Attr-value" id="dom-attr-value"><code>value</code></dfn> attribute must
return the <a title="concept-attr-value" href="#concept-attr-value">value</a>.

<p>Setting the <code title="dom-Attr-value"><a href="#dom-attr-value">value</a></code> attribute must set
<a title="concept-attr-value" href="#concept-attr-value">value</a> to the given value.

<h3 id="interface-documenttype"><span class="secno">5.5 </span>Interface <code><a href="#documenttype">DocumentType</a></code></h3>
<pre class="idl">interface <dfn id="documenttype">DocumentType</dfn> : <a href="#node">Node</a> {
  readonly attribute DOMString <a title="dom-DocumentType-name" href="#dom-documenttype-name">name</a>;<!--
  readonly attribute NamedNodeMap entities;
  readonly attribute NamedNodeMap notations;-->
  readonly attribute DOMString <a title="dom-DocumentType-publicId" href="#dom-documenttype-publicid">publicId</a>;
  readonly attribute DOMString <a title="dom-DocumentType-systemId" href="#dom-documenttype-systemid">systemId</a>;<!--
  readonly attribute DOMString internalSubset;-->
};</pre>

<p><code><a href="#documenttype">DocumentType</a></code> nodes have an associated <dfn title="concept-doctype-name" id="concept-doctype-name">name</dfn>, <dfn title="concept-doctype-publicid" id="concept-doctype-publicid">public ID</dfn>, and <dfn title="concept-doctype-systemid" id="concept-doctype-systemid">system ID</dfn>.

<p>When a <code><a href="#documenttype">DocumentType</a></code> node is created <a title="concept-doctype-name" href="#concept-doctype-name">name</a> is always given. Unless explicitly given when a <code><a href="#documenttype">DocumentType</a></code> node is created, its <a title="concept-doctype-publicid" href="#concept-doctype-publicid">public ID</a> and <a title="concept-doctype-systemid" href="#concept-doctype-systemid">system ID</a> are the empty string.

<p>The <dfn title="dom-DocumentType-name" id="dom-documenttype-name"><code>name</code></dfn> attribute must return the <a href="#context-node">context node</a>'s <a title="concept-doctype-name" href="#concept-doctype-name">name</a>.

<p>The <dfn title="dom-DocumentType-publicId" id="dom-documenttype-publicid"><code>publicId</code></dfn>
attribute must return the <a href="#context-node">context node</a>'s <a title="concept-doctype-publicid" href="#concept-doctype-publicid">public ID</a>.

<p>The <dfn title="dom-DocumentType-systemId" id="dom-documenttype-systemid"><code>systemId</code></dfn>
attribute must return the <a href="#context-node">context node</a>'s <a title="concept-doctype-systemid" href="#concept-doctype-systemid">system ID</a>.


<h3 id="interface-processinginstruction"><span class="secno">5.6 </span>Interface <code><a href="#processinginstruction">ProcessingInstruction</a></code></h3>
<pre class="idl">interface <dfn id="processinginstruction">ProcessingInstruction</dfn> : <a href="#node">Node</a> {
  readonly attribute DOMString <a title="dom-ProcessingInstruction-target" href="#dom-processinginstruction-target">target</a>;
           attribute DOMString <a title="dom-ProcessingInstruction-data" href="#dom-processinginstruction-data">data</a>;
};</pre>

<p><code><a href="#processinginstruction">ProcessingInstruction</a></code> nodes have an associated <dfn title="concept-PI-target" id="concept-pi-target">target</dfn> and <dfn title="concept-PI-data" id="concept-pi-data">data</dfn>. When a <code><a href="#processinginstruction">ProcessingInstruction</a></code> node is created both are given.

<p>The <dfn title="dom-ProcessingInstruction-target" id="dom-processinginstruction-target"><code>target</code></dfn>
attribute must return the <a href="#context-node">context node</a>'s <a title="concept-PI-target" href="#concept-pi-target">target</a>.

<p>The <dfn title="dom-ProcessingInstruction-data" id="dom-processinginstruction-data"><code>data</code></dfn>
attribute must return the <a href="#context-node">context node</a>'s <a title="concept-PI-data" href="#concept-pi-data">data</a>, and on setting, set the
<a href="#context-node">context node</a>'s <a title="concept-PI-data" href="#concept-pi-data">data</a> to the new value.


<h3 id="interface-characterdata"><span class="secno">5.7 </span>Interface <code><a href="#characterdata">CharacterData</a></code></h3>
<pre class="idl">interface <dfn id="characterdata">CharacterData</dfn> : <a href="#node">Node</a> {
  [TreatNullAs=EmptyString] attribute DOMString <a title="dom-CharacterData-data" href="#dom-characterdata-data">data</a>;
  readonly attribute unsigned long <a title="dom-CharacterData-length" href="#dom-characterdata-length">length</a>;
  DOMString <a title="dom-CharacterData-substringData" href="#dom-characterdata-substringdata">substringData</a>(unsigned long <var title="">offset</var>, unsigned long <var title="">count</var>);
  void <a title="dom-CharacterData-appendData" href="#dom-characterdata-appenddata">appendData</a>(DOMString <var title="">data</var>);
  void <a title="dom-CharacterData-insertData" href="#dom-characterdata-insertdata">insertData</a>(unsigned long <var title="">offset</var>, DOMString <var title="">data</var>);
  void <a title="dom-CharacterData-deleteData" href="#dom-characterdata-deletedata">deleteData</a>(unsigned long <var title="">offset</var>, unsigned long <var title="">count</var>);
  void <a title="dom-CharacterData-replaceData" href="#dom-characterdata-replacedata">replaceData</a>(unsigned long <var title="">offset</var>, unsigned long <var title="">count</var>, DOMString <var title="">data</var>);
};</pre>

<p>The <dfn title="dom-CharacterData-data" id="dom-characterdata-data"><code>data</code></dfn> attribute must return the data of the node, and on setting, must change the node's data to the new value.

<p>The <dfn title="dom-CharacterData-length" id="dom-characterdata-length"><code>length</code></dfn> attribute must return the number of UTF-16 code units represented by the node's data.

<p>The
<dfn title="dom-CharacterData-substringData" id="dom-characterdata-substringdata"><code>substringData(<var title="">offset</var>, <var title="">count</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>If <var title="">offset</var> is greater than the
 <a href="#context-node">context node</a>'s <code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code>,
 throw an <code title="dom-DOMException-INDEX_SIZE_ERR"><a href="#dom-domexception-index_size_err">INDEX_SIZE_ERR</a></code>
 exception and terminate these steps.

 <li><p>If <span title=""><var title="">offset</var>+<var title="">count</var></span> is
 greater than the <a href="#context-node">context node</a>'s <code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code>, return a <code class="external"><a href="#domstring">DOMString</a></code> whose value is the UTF-16 code units
 from the <var title="">offset</var>th UTF-16 code unit to the end of <var title="">data</var>.

 <li><p>Return a <code class="external"><a href="#domstring">DOMString</a></code> whose value is
 the UTF-16 code units from the <var title="">offset</var>th UTF-16 code unit to
 the <span title=""><var title="">offset</var>+<var title="">count</var></span>th UTF-16
 code unit in <var title="">data</var>.
</ol>

<p>The <dfn title="dom-CharacterData-appendData" id="dom-characterdata-appenddata"><code>appendData(<var title="">data</var>)</code></dfn> method must append <var title="">data</var> to the <a href="#context-node">context node</a>'s data.

<p>The <dfn title="dom-CharacterData-insertData" id="dom-characterdata-insertdata"><code>insertData(<var title="">offset</var>, <var title="">data</var>)</code></dfn> method must run these steps:

<ol>
 <li><p>If <var title="">offset</var> is greater than the <a href="#context-node">context node</a>'s
 <code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code>, throw an
 <code title="dom-DOMException-INDEX_SIZE_ERR"><a href="#dom-domexception-index_size_err">INDEX_SIZE_ERR</a></code> exception
 and terminate these steps.

 <li><p>Insert <var title="">data</var> into the <a href="#context-node">context node</a>'s data
 after <var title="">offset</var> UTF-16 code units.
</ol>

<p>The <dfn title="dom-CharacterData-deleteData" id="dom-characterdata-deletedata"><code>deleteData(<var title="">offset</var>, <var title="">count</var>)</code></dfn> method must run these steps:

<ol>
 <li><p>If <var title="">offset</var> is greater than the <a href="#context-node">context node</a>'s
 <code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code>, throw an
 <code title="dom-DOMException-INDEX_SIZE_ERR"><a href="#dom-domexception-index_size_err">INDEX_SIZE_ERR</a></code> exception
 and terminate these steps.

 <li><p>If <var title="">offset</var>+<var title="">count</var> is greater than the
 <a href="#context-node">context node</a>'s
 <code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code> let <var title="">count</var> be
 <code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code>-<var title="">offset</var>.

 <li><p>Starting from <var title="">offset</var> UTF-16 code units remove
 <var title="">count</var> UTF-16 code units from the <a href="#context-node">context node</a>'s
 data.
</ol>

<p>The
<dfn title="dom-CharacterData-replaceData" id="dom-characterdata-replacedata"><code>replaceData(<var title="">offset</var>, <var title="">count</var>, <var title="">data</var>)</code></dfn>
method must act as if the
<code title="dom-CharacterData-deleteData"><a href="#dom-characterdata-deletedata">deleteData()</a></code> method is invoked
with <var title="">offset</var> and <var title="">count</var> as arguments followed by
the <code title="dom-CharacterData-insertData"><a href="#dom-characterdata-insertdata">insertData()</a></code> method with
<var title="">offset</var> and <var title="">data</var> as arguments and re-throw any
exceptions these methods might have thrown.


<h3 id="interface-text"><span class="secno">5.8 </span>Interface <code><a href="#text">Text</a></code></h3>
<pre class="idl">interface <dfn id="text">Text</dfn> : <a href="#characterdata">CharacterData</a> {
  <a href="#text">Text</a> <a title="dom-Text-splitText" href="#dom-text-splittext">splitText</a>(unsigned long <var title="">offset</var>);<!--
  readonly attribute boolean isElementContentWhitespace;-->
  readonly attribute DOMString <a title="dom-Text-wholeText" href="#dom-text-wholetext">wholeText</a>;
  <a href="#text">Text</a> <a title="dom-Text-replaceWholeText" href="#dom-text-replacewholetext">replaceWholeText</a>(DOMString <var title="">data</var>);
};</pre>

<p>The
<dfn title="dom-Text-splitText" id="dom-text-splittext"><code>splitText(<var title="">offset</var>)</code></dfn>
method must run the following steps:

<ol>
  <li>If <var title="">offset</var> is greater than the <a href="#context-node">context node</a>'s
  <code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code>, throw an
  <code title="dom-DOMException-INDEX_SIZE_ERR"><a href="#dom-domexception-index_size_err">INDEX_SIZE_ERR</a></code> exception
  and terminate these steps.

  <li>Let <var title="">length</var> be the <a href="#context-node">context node</a>'s
  <span title=""><code title="dom-CharacterData-length"><a href="#dom-characterdata-length">length</a></code> &minus;
  <var title="">offset</var></span>.

  <li>Call the <a href="#context-node">context node</a>'s
  <code title="dom-CharacterData-substringData"><a href="#dom-characterdata-substringdata">substringData</a></code> method with
  <var title="">offset</var> and <var title="">length</var> as its arguments.
  If this threw an exception, terminate these steps. Otherwise, let
  <var title="">new data</var> be the value returned.

  <li>Call the <a href="#context-node">context node</a>'s
  <code title="dom-CharacterData-deleteData"><a href="#dom-characterdata-deletedata">deleteData</a></code> method with
  <var title="">offset</var> and <var title="">length</var> as its arguments.
  If this threw an exception, terminate these steps.

  <li>Let <var title="">new node</var> be a new <code><a href="#text">Text</a></code> object, with the
  same <code title="dom-Node-ownerDocument"><a href="#dom-node-ownerdocument">ownerDocument</a></code> as the
  <a href="#context-node">context node</a>. Set <var title="">new node</var>'s
  <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> to <var title="">new data</var>.

  <li>Let <var title="">parent</var> be the <a href="#context-node">context node</a>'s
  <code title="dom-Node-parentNode"><a href="#dom-node-parentnode">parentNode</a></code>. If <var title="">parent</var>
  is null, return <var title="">new node</var> and terminate these steps.

  <li>Call <var title="">parent</var>'s
  <code title="dom-Node-insertBefore"><a href="#dom-node-insertbefore">insertBefore</a></code> method with
  <var title="">new node</var> and the <a href="#context-node">context node</a>'s
  <code title="dom-Node-nextSibling"><a href="#dom-node-nextsibling">nextSibling</a></code> as its argument.

  <li>Return <var title="">new node</var>.
</ol>

<p>The <dfn id="contiguous-text-nodes">contiguous <code>Text</code> nodes</dfn> of a node are the node
itself, the previous sibling <code><a href="#text">Text</a></code> node (if any) and its
<a href="#contiguous-text-nodes">contiguous <code>Text</code> nodes</a>, and the next sibling
<code><a href="#text">Text</a></code> node (if any) and its
<a href="#contiguous-text-nodes">contiguous <code>Text</code> nodes</a>, avoiding any
duplicates.

<p>The <dfn title="dom-Text-wholeText" id="dom-text-wholetext"><code>wholeText</code></dfn>
attribute must return a concatenation of the
<code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> of the
<a href="#contiguous-text-nodes">contiguous <code>Text</code> nodes</a> of the
<a href="#context-node">context node</a>, in <a href="#tree-order">tree order</a>.

<p>The
<dfn title="dom-Text-replaceWholeText" id="dom-text-replacewholetext"><code>replaceWholeText(<var title="">data</var>)</code></dfn>
method must run these steps:

<ol>
 <li><p>Remove the <a href="#contiguous-text-nodes">contiguous <code>Text</code> nodes</a> of the
 <a href="#context-node">context node</a>.
 <li><p>If <var title="">data</var> is not the empty string, insert a new
 <code><a href="#text">Text</a></code> node whose
 <code title="dom-CharacterData-data"><a href="#dom-characterdata-data">data</a></code> is <var title="">data</var> at the
 place of the removed nodes, return the new <code><a href="#text">Text</a></code> node, and
 then terminate these steps.
 <li><p>Return null.
</ol>

<p class="XXX">Can we remove replaceWholeText() in favor of making wholeText no longer readonly? Do we even need this wholeText business?

<!-- isElementContentWhitespace: Mozilla returns true if the node contains only
space, tab, newline -->


<h3 id="interface-comment"><span class="secno">5.9 </span>Interface <code><a href="#comment">Comment</a></code></h3>
<pre class="idl">interface <dfn id="comment">Comment</dfn> : <a href="#characterdata">CharacterData</a> {
};</pre>



<h2 id="collections"><span class="secno">6 </span>Collections</h2>
<p>A <dfn title="concept-collection" id="concept-collection">collection</dfn> is an object that
represents a lists of DOM nodes. A
<a title="concept-collection" href="#concept-collection">collection</a> can be either
<dfn title="concept-collection-live" id="concept-collection-live">live</dfn> or
<dfn title="concept-collection-static" id="concept-collection-static">static</dfn>. Unless otherwise stated,
a <a title="concept-collection" href="#concept-collection">collection</a> must be
<a title="concept-collection-live" href="#concept-collection-live">live</a>.

<p>If a <a title="concept-collection" href="#concept-collection">collection</a> is <a title="concept-collection-live" href="#concept-collection-live">live</a>, then the attributes and methods
on that object must operate on the actual underlying data, not a snapshot of
the data.

<p>When a <a title="concept-collection" href="#concept-collection">collection</a> is created, a
filter and a root are associated with it.

<p>The <a title="concept-collection" href="#concept-collection">collection</a> then
<dfn title="represented by the collection" id="represented-by-the-collection">represents</dfn> a view of the
subtree rooted at the <a title="concept-collection" href="#concept-collection">collection's</a>
root, containing only nodes that match the given filter. The view is linear.
In the absence of specific requirements to the contrary, the nodes within
the <a title="concept-collection" href="#concept-collection">collection</a> must be sorted in
<a href="#tree-order">tree order</a>.

<p>An attribute that returns a
<a title="concept-collection-live" href="#concept-collection-live">live</a>
<a title="concept-collection" href="#concept-collection">collection</a> must return the same object
every time it is retrieved.


<h3 id="interface-nodelist"><span class="secno">6.1 </span>Interface <code><a href="#nodelist">NodeList</a></code></h3>
<p>A <code><a href="#nodelist">NodeList</a></code> object is a kind of
<a title="concept-collection" href="#concept-collection">collection</a>.

<pre class="idl">interface <dfn id="nodelist">NodeList</dfn> {
  getter <a href="#node">Node</a> <a title="dom-NodeList-item" href="#dom-nodelist-item">item</a>(unsigned long index);
  readonly attribute unsigned long <a title="dom-NodeList-length" href="#dom-nodelist-length">length</a>;
};</pre>

<p>The <dfn title="dom-NodeList-item" id="dom-nodelist-item"><code>item(<var title="">index</var>)</code></dfn> method must return the <var title="">index</var>th
node in the <a title="concept-collection" href="#concept-collection">collection</a>. If there is no
<var title="">index</var>th node in the <a title="concept-collection" href="#concept-collection">collection</a>, then the method must return null.

<p>The <dfn title="dom-NodeList-length" id="dom-nodelist-length"><code>length</code></dfn> attribute must return the number of nodes <a href="#represented-by-the-collection">represented by the collection</a>.

<p><code><a href="#nodelist">NodeList</a></code>s are enumerable. <span class="XXX" title="">Explain? <code title="">for ... in</code></span>


<h3 id="interface-htmlcollection"><span class="secno">6.2 </span>Interface <code><a href="#htmlcollection">HTMLCollection</a></code></h3>
<p>The <code><a href="#htmlcollection">HTMLCollection</a></code> interface represents a generic <a title="concept-collection" href="#concept-collection">collection</a> of elements.

<p class="note">This interface is called <code><a href="#htmlcollection">HTMLCollection</a></code> for
historical reasons. The various getters on this interface return <code class="external"><a href="http://dev.w3.org/2006/webapi/WebIDL/#idl-object">object</a></code> for interfaces that inherit from
it, which return other objects for historical reasons.

<pre class="idl">interface <dfn id="htmlcollection">HTMLCollection</dfn> {
  readonly attribute unsigned long <a title="dom-HTMLCollection-length" href="#dom-htmlcollection-length">length</a>;
  caller getter <a href="#element">Element</a> <a title="dom-HTMLCollection-item" href="#dom-htmlcollection-item">item</a>(unsigned long index);
  caller getter object <a title="dom-HTMLCollection-namedItem" href="#dom-htmlcollection-nameditem">namedItem</a>(DOMString name); // only returns Element
};</pre>

<dl class="domintro">
 <dt><var title="">collection</var> . <code title="dom-HTMLCollection-length"><a href="#dom-htmlcollection-length">length</a></code>
 <dd>
  <p>Returns the number of elements in the collection.

 <dt><var title="">element</var> = <var title="">collection</var> . <code title="dom-HTMLCollection-item"><a href="#dom-htmlcollection-item">item</a></code>(<var title="">index</var>)
 <dt><var title="">collection</var>[<var title="">index</var>]
 <dt><var title="">collection</var>(<var title="">index</var>)
 <dd>
  <p>Returns the item with index <var title="">index</var> from the collection. The items are sorted in <a href="#tree-order">tree order</a>.
  <p>Returns null if <var title="">index</var> is out of range.

 <dt><var title="">element</var> = <var title="">collection</var> . <code title="dom-HTMLCollection-namedItem"><a href="#dom-htmlcollection-nameditem">namedItem</a></code>(<var title="">name</var>)
 <dt><var title="">collection</var>[<var title="">name</var>]
 <dt><var title="">collection</var>(<var title="">name</var>)
 <dd>
  <p>Returns the first item with <a title="concept-id" href="#concept-id">ID</a> or name <var title="">name</var>
  from the collection.
  <p>Returns null if no element with that <a title="concept-id" href="#concept-id">ID</a> or name could be found.
  <p>Only <code title="">a</code>, <code title="">applet</code>,
  <code title="">area</code>, <code title="">embed</code>,
  <code title="">form</code>, <code title="">frame</code>,
  <code title="">frameset</code>, <code title="">iframe</code>,
  <code title="">img</code>, and <code title="">object</code> elements in the
  <a href="#html-namespace">HTML namespace</a> can have a name for the purpose of this
  method; their name is given by the value of their
  <code title="">name</code> attribute.
</dl>

<p>The object's <a class="external" href="http://dev.w3.org/2006/webapi/WebIDL/#dfn-supported-property-indices">supported property indices</a>
are the numbers in the range zero to one less than the number of nodes
<a href="#represented-by-the-collection">represented by the collection</a>. If there are no such elements, then
there are no <a class="external" href="http://dev.w3.org/2006/webapi/WebIDL/#dfn-supported-property-indices">supported property indices</a>.

<p>The <dfn title="dom-HTMLCollection-length" id="dom-htmlcollection-length"><code>length</code></dfn> attribute
must return the number of nodes <a href="#represented-by-the-collection">represented by the collection</a>.

<p>The <dfn title="dom-HTMLCollection-item" id="dom-htmlcollection-item"><code>item(<var title="">index</var>)</code></dfn> method must return the <var title="">index</var>th node in the collection. If there is no <var title="">index</var>th node in the collection, then the method must
return null.

<p>The <a class="external" href="http://dev.w3.org/2006/webapi/WebIDL/#dfn-supported-property-names">supported property names</a> consist
of the values of the <code title="">name</code> attributes of each <code title="">a</code>, <code title="">applet</code>, <code title="">area</code>, <code title="">embed</code>, <code title="">form</code>, <code title="">frame</code>, <code title="">frameset</code>, <code title="">iframe</code>, <code title="">img</code>, and
<code title="">object</code> element in the <a href="#html-namespace">HTML namespace</a>,
<a href="#represented-by-the-collection">represented by the collection</a> with a <code title="">name</code>
attribute, plus the list of <a title="concept-id" href="#concept-id">IDs</a> that the elements
<a href="#represented-by-the-collection">represented by the collection</a> have.

<p>The <dfn title="dom-HTMLCollection-namedItem" id="dom-htmlcollection-nameditem"><code>namedItem(<var title="">key</var>)</code></dfn> method must return the first node in the
<a title="concept-collection" href="#concept-collection">collection</a> that matches the following
requirements:

<ul>
 <li>It is an <code title="">a</code>, <code title="">applet</code>, <code title="">area</code>, <code title="">embed</code>, <code title="">form</code>, <code title="">frame</code>, <code title="">frameset</code>, <code title="">iframe</code>,
 <code title="">img</code>, or <code title="">object</code> element, in the <a href="#html-namespace">HTML
 namespace</a>, with a <code title="">name</code> attribute equal to <var title="">key</var>, or,

 <li>It is an element with an <a title="concept-id" href="#concept-id">ID</a>
 equal to <var title="">key</var>.
</ul>

<p>If no such elements are found, then the method must return
null.

<!-- AttrExodus
<h3>Interface <code>NamedNodeMap</code></h3>
<p>Since <code title=dom-Node-attributes>attributes</code> is the
only remaining API using this interface and the tentative plan is to change
<code>Attr</code> we also plan to remove this interface and replace it with
a lightweight <code>AttrMap</code> or some such &mdash;
<a href=http://lists.w3.org/Archives/Public/public-webapps/2010JulSep/0797.html>http://lists.w3.org/Archives/Public/public-webapps/2010JulSep/0797.html</a>

<p>A <code>NamedNodeMap</code> object is a kind of <span
title=concept-collection>collection</span>, whose primary purpose is to expose
<code>Node</code>s by name.

<pre class=idl>interface <dfn>NamedNodeMap</dfn> {
  <span>Node</span> <span title=dom-NamedNodeMap-getNamedItem>getNamedItem</span>(DOMString name);
  <span>Node</span> <span title=dom-NamedNodeMap-setNamedItem>setNamedItem</span>(<span>Node</span> arg);
  <span>Node</span> <span title=dom-NamedNodeMap-removeNamedItem>removeNamedItem</span>(DOMString name);
  <span>Node</span> <span title=dom-NamedNodeMap-item>item</span>(unsigned long index);
  readonly attribute unsigned long <span title=dom-NamedNodeMap-length>length</span>;
  <span>Node</span> <span title=dom-NamedNodeMap-getNamedItemNS>getNamedItemNS</span>(DOMString namespace, DOMString localName);
  <span>Node</span> <span title=dom-NamedNodeMap-setNamedItemNS>setNamedItemNS</span>(<span>Node</span> arg);
  <span>Node</span> <span title=dom-NamedNodeMap-removeNamedItemNS>removeNamedItemNS</span>(DOMString namespace, DOMString localName);
};</pre>

<p><dfn title=dom-NamedNodeMap-getNamedItem>getNamedItem</dfn>

<p><dfn title=dom-NamedNodeMap-setNamedItem>setNamedItem</dfn>

<p><dfn title=dom-NamedNodeMap-removeNamedItem>removeNamedItem</dfn>

<p><dfn title=dom-NamedNodeMap-item>item</dfn>

<p>The <dfn title=dom-NamedNodeMap-length><code>length</code></dfn> attribute must return the number of nodes <span>represented by the collection</span>.

<p><dfn title=dom-NamedNodeMap-getNamedItemNS>getNamedItemNS</dfn>

<p><dfn title=dom-NamedNodeMap-setNamedItemNS>setNamedItemNS</dfn>

<p><dfn title=dom-NamedNodeMap-removeNamedItemNS>removeNamedItemNS</dfn>
-->


<h2 id="lists"><span class="secno">7 </span>Lists</h2>

<h3 id="interface-domstringlist"><span class="secno">7.1 </span>Interface <code><a href="#domstringlist">DOMStringList</a></code></h3>

<p class="XXX">Only HTMLPropertiesCollection.names, DataTranser.types, Clipboard.types, and Document.styleSheetSets seem to use this API. Should they use something like DOMString[] instead if Web IDL introduces that?

<pre class="idl">interface <dfn id="domstringlist">DOMStringList</dfn> {
  readonly attribute unsigned long <a title="dom-DOMStringList-length" href="#dom-domstringlist-length">length</a>;
  getter DOMString <a title="dom-DOMStringList-item" href="#dom-domstringlist-item">item</a>(unsigned long <var title="">index</var>);
  boolean <a title="dom-DOMStringList-contains" href="#dom-domstringlist-contains">contains</a>(DOMString <var title="">string</var>);
};</pre>

<p>The <code><a href="#domstringlist">DOMStringList</a></code> interface represents an interface to an
ordered list of strings.

<dl class="domintro">
 <dt><var title="">stringlist</var> . <code title="dom-DOMStringList-length"><a href="#dom-domstringlist-length">length</a></code>
 <dd><p>Returns the number of tokens in the string.

 <dt><var title="">string</var> = <var title="">stringlist</var> . <code title="dom-DOMStringList-item"><a href="#dom-domstringlist-item">item</a></code>(<var title="">index</var>)
 <dt><var title="">stringlist</var>[<var title="">index</var>]
 <dd>
  <p>Returns the string with index <var title="">index</var>.
  <p>Returns null if <var title="">index</var> is out of range.

 <dt><var title="">hasstring</var> = <var title="">stringlist</var> . <code title="dom-DOMStringList-contains"><a href="#dom-domstringlist-contains">contains</a></code>(<var title="">string</var>)
 <dd><p>Returns true if the <var title="">string</var> is present; false
 otherwise.
</dl>

<p>The <dfn title="dom-DOMStringList-length" id="dom-domstringlist-length"><code>length</code></dfn>
attribute must return the number of strings in the list.

<p>The object's
<a class="external" href="http://dev.w3.org/2006/webapi/WebIDL/#dfn-supported-property-indices">supported property indices</a> are the
numbers in the range zero to
<code title="dom-DOMTokenList-length"><a href="#dom-domtokenlist-length">length</a></code>&minus;1, unless the
<code title="dom-DOMTokenList-length"><a href="#dom-domtokenlist-length">length</a></code> is zero, in which case
there are no
<a class="external" href="http://dev.w3.org/2006/webapi/WebIDL/#dfn-supported-property-indices">supported property indices</a>.

<p>The
<dfn title="dom-DOMStringList-item" id="dom-domstringlist-item"><code>item(<var title="">index</var>)</code></dfn>
method must return the <var title="">index</var>th string in the list. If
<var title="">index</var> is equal to or greater than the number of strings, then the
method must return null.

<p>The
<dfn title="dom-DOMStringList-contains" id="dom-domstringlist-contains"><code>contains(<var title="">string</var>)</code></dfn>
method must return true if the list of strings contains <var title="">string</var>,
or false otherwise.


<h3 id="interface-domtokenlist"><span class="secno">7.2 </span>Interface <code><a href="#domtokenlist">DOMTokenList</a></code></h3>
<p>The <code><a href="#domtokenlist">DOMTokenList</a></code> interface represents an interface
to an underlying string that consists of a <a href="#set-of-space-separated-tokens">set of
space-separated tokens</a>.

<p class="note"><code><a href="#domtokenlist">DOMTokenList</a></code> objects are always
<a href="#case-sensitive">case-sensitive</a>, even when the underlying string might
ordinarily be treated in a case-insensitive manner.

<pre class="idl">interface <dfn id="domtokenlist">DOMTokenList</dfn> {
  readonly attribute unsigned long <a title="dom-DOMTokenList-length" href="#dom-domtokenlist-length">length</a>;
  getter DOMString <a title="dom-DOMTokenList-item" href="#dom-domtokenlist-item">item</a>(unsigned long index);
  boolean <a title="dom-DOMTokenList-contains" href="#dom-domtokenlist-contains">contains</a>(DOMString token);
  void <a title="dom-DOMTokenList-add" href="#dom-domtokenlist-add">add</a>(DOMString token);
  void <a title="dom-DOMTokenList-remove" href="#dom-domtokenlist-remove">remove</a>(DOMString token);
  boolean <a title="dom-DOMTokenList-toggle" href="#dom-domtokenlist-toggle">toggle</a>(DOMString token);
  <a title="dom-DOMTokenList-toString" href="#dom-domtokenlist-tostring">stringifier</a> DOMString ();
};</pre>

<dl class="domintro">
 <dt><var title="">tokenlist</var> . <code title="dom-DOMTokenList-length"><a href="#dom-domtokenlist-length">length</a></code>
 <dd>
  <p>Returns the number of tokens in the string.

 <dt><var title="">element</var> = <var title="">tokenlist</var> . <code title="dom-DOMTokenList-item"><a href="#dom-domtokenlist-item">item</a></code>(<var title="">index</var>)
 <dt><var title="">tokenlist</var>[<var title="">index</var>]
 <dd>
  <p>Returns the token with index <var title="">index</var>. The tokens are returned in the order they are found in the underlying string.
  <p>Returns null if <var title="">index</var> is out of range.

 <dt><var title="">hastoken</var> = <var title="">tokenlist</var> . <code title="dom-DOMTokenList-contains"><a href="#dom-domtokenlist-contains">contains</a></code>(<var title="">token</var>)
 <dd>
  <p>Returns true if the <var title="">token</var> is present; false otherwise.
  <p>Throws a <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception if <var title="">token</var> is empty.
  <p>Throws an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code> exception if <var title="">token</var> contains any spaces.

 <dt><var title="">tokenlist</var> . <code title="dom-DOMTokenList-add"><a href="#dom-domtokenlist-add">add</a></code>(<var title="">token</var>)
 <dd>
  <p>Adds <var title="">token</var>, unless it is already present.
  <p>Throws a <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception if <var title="">token</var> is empty.
  <p>Throws an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code> exception if <var title="">token</var> contains any spaces.

 <dt><var title="">tokenlist</var> . <code title="dom-DOMTokenList-remove"><a href="#dom-domtokenlist-remove">remove</a></code>(<var title="">token</var>)
 <dd>
  <p>Removes <var title="">token</var> if it is present.
  <p>Throws a <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception if <var title="">token</var> is empty.
  <p>Throws an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code> exception if <var title="">token</var> contains any spaces.

 <dt><var title="">hastoken</var> = <var title="">tokenlist</var> . <code title="dom-DOMTokenList-toggle"><a href="#dom-domtokenlist-toggle">toggle</a></code>(<var title="">token</var>)
 <dd>
  <p>Adds <var title="">token</var> if it is not present, or removes
  it if it is. Returns true if <var title="">token</var> is now
  present (it was added); returns false if it is not (it was
  removed).
  <p>Throws a <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception if <var title="">token</var> is empty.
  <p>Throws an <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code> exception if <var title="">token</var> contains any spaces.
</dl>

<div class="impl">

<p>The <dfn title="dom-DOMTokenList-length" id="dom-domtokenlist-length"><code>length</code></dfn>
attribute must return the number of tokens that result from <a title="split a string on spaces" href="#split-a-string-on-spaces">splitting the underlying string on
spaces</a>. This is the <var title="dom-DOMTokenList-length"><a href="#dom-domtokenlist-length">length</a></var>.

<p>The object's <a class="external" href="http://dev.w3.org/2006/webapi/WebIDL/#dfn-supported-property-indices">supported property indices</a>
are the numbers in the range zero to
<span title=""><var title="dom-DOMTokenList-length"><a href="#dom-domtokenlist-length">length</a></var>&minus;1</span>,
unless the <var title="dom-DOMTokenList-length"><a href="#dom-domtokenlist-length">length</a></var> is zero, in which
case there are no
<a class="external" href="http://dev.w3.org/2006/webapi/WebIDL/#dfn-supported-property-indices">supported property indices</a>.

<p>The
<dfn title="dom-DOMTokenList-item" id="dom-domtokenlist-item"><code>item(<var title="">index</var>)</code></dfn>
method must
<a title="split a string on spaces" href="#split-a-string-on-spaces">split the underlying string on spaces</a>,
preserving the order of the tokens as found in the underlying string, and then
return the <var title="">index</var>th item in this list. If <var title="">index</var>
is equal to or greater than the number of tokens, then the method must return null.

<p class="example">For example, if the string is "<code title="">a b a c</code>"
then there are four tokens: the token with index 0 is "<code title="">a</code>",
the token with index 1 is "<code title="">b</code>", the token with index 2 is
"<code title="">a</code>", and the token with index 3 is "<code title="">c</code>".

<p>The
<dfn title="dom-DOMTokenList-contains" id="dom-domtokenlist-contains"><code>contains(<var title="">token</var>)</code></dfn>
method must run the following algorithm:

<ol>
 <li>If the <var title="">token</var> argument is the empty string, then throw a
 <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception and
 terminate these steps.

 <li>If the <var title="">token</var> argument contains any
 <a title="space character" href="#space-character">space characters</a>, then throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.

 <li>Otherwise,
 <a title="split a string on spaces" href="#split-a-string-on-spaces">split the underlying string on spaces</a>
 to get the list of tokens in the object's underlying string.

 <li>If the token indicated by <var title="">token</var> is a
 <a href="#case-sensitive">case-sensitive</a> match for one of the tokens in the object's
 underlying string then return true and terminate these steps.

 <li>Otherwise, return false.
</ol>

<p>The
<dfn title="dom-DOMTokenList-add" id="dom-domtokenlist-add"><code>add(<var title="">token</var>)</code></dfn>
method must run the following algorithm:

<ol>
 <li>If the <var title="">token</var> argument is the empty string, then throw a
 <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception and
 terminate these steps.

 <li>If the <var title="">token</var> argument contains any
 <a title="space character" href="#space-character">space characters</a>, then throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.

 <li>Otherwise,
 <a title="split a string on spaces" href="#split-a-string-on-spaces">split the underlying string on spaces</a>
 to get the list of tokens in the object's underlying string.

 <li>If the given <var title="">token</var> is a <a href="#case-sensitive">case-sensitive</a> match
 for one of the tokens in the <code><a href="#domtokenlist">DOMTokenList</a></code> object's underlying
 string then terminate these steps.

 <li>Otherwise, if the <code><a href="#domtokenlist">DOMTokenList</a></code> object's underlying string is
 not the empty string and the last character of that string is not a
 <a href="#space-character">space character</a>, then append a U+0020 SPACE character to the end
 of that string.

 <li>Append the value of <var title="">token</var> to the end of the
 <code><a href="#domtokenlist">DOMTokenList</a></code> object's underlying string.
</ol>

<p>The
<dfn title="dom-DOMTokenList-remove" id="dom-domtokenlist-remove"><code>remove(<var title="">token</var>)</code></dfn>
method must run the following algorithm:

<ol>
 <li>If the <var title="">token</var> argument is the empty string, then throw a
 <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception and
 terminate these steps.

 <li>If the <var title="">token</var> argument contains any
 <a title="space character" href="#space-character">space characters</a>, then throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.

 <li>Otherwise,
 <a title="remove a token from a string" href="#remove-a-token-from-a-string">remove the given <var title="">token</var> from the underlying string</a>.
</ol>

<p>The
<dfn title="dom-DOMTokenList-toggle" id="dom-domtokenlist-toggle"><code>toggle(<var title="">token</var>)</code></dfn>
method must run the following algorithm:

<ol>
 <li>If the <var title="">token</var> argument is the empty string, then throw a
 <code title="dom-DOMException-SYNTAX_ERR"><a href="#dom-domexception-syntax_err">SYNTAX_ERR</a></code> exception and
 terminate these steps.

 <li>If the <var title="">token</var> argument contains any
 <a title="space character" href="#space-character">space characters</a>, then throw an
 <code title="dom-DOMException-INVALID_CHARACTER_ERR"><a href="#dom-domexception-invalid_character_err">INVALID_CHARACTER_ERR</a></code>
 exception and terminate these steps.

 <li>Otherwise,
 <a title="split a string on spaces" href="#split-a-string-on-spaces">split the underlying string on spaces</a>
 to get the list of tokens in the object's underlying string.

 <li>If the given <var title="">token</var> is a <a href="#case-sensitive">case-sensitive</a> match
 for one of the tokens in the <code><a href="#domtokenlist">DOMTokenList</a></code> object's underlying
 string then
 <a title="remove a token from a string" href="#remove-a-token-from-a-string">remove the given <var title="">token</var> from the underlying string</a>,
 return false and terminate these steps.

 <li>Otherwise, if the <code><a href="#domtokenlist">DOMTokenList</a></code> object's underlying string is
 not the empty string and the last character of that string is not a
 <a href="#space-character">space character</a>, then append a U+0020 SPACE character to the end
 of that string.

 <li>Append the value of <var title="">token</var> to the end of the
 <code><a href="#domtokenlist">DOMTokenList</a></code> object's underlying string.

 <li>Return true.
</ol>

<p>Objects implementing the <code><a href="#domtokenlist">DOMTokenList</a></code> interface must
<dfn title="dom-DOMTokenList-toString" id="dom-domtokenlist-tostring">stringify</dfn> to the object's
underlying string representation.

</div>


<h3 id="interface-domsettabletokenlist"><span class="secno">7.3 </span>Interface <code><a href="#domsettabletokenlist">DOMSettableTokenList</a></code></h3>

<p>The <code><a href="#domsettabletokenlist">DOMSettableTokenList</a></code> interface is the same as the
<code><a href="#domtokenlist">DOMTokenList</a></code> interface, except that it allows the
underlying string to be directly changed.

<pre class="idl">interface <dfn id="domsettabletokenlist">DOMSettableTokenList</dfn> : <a href="#domtokenlist">DOMTokenList</a> {
            attribute DOMString <a title="dom-DOMSettableTokenList-value" href="#dom-domsettabletokenlist-value">value</a>;
};</pre>

<dl class="domintro">
 <dt><var title="">tokenlist</var> . <code title="dom-DOMSettableTokenList-value"><a href="#dom-domsettabletokenlist-value">value</a></code>
 <dd>
  <p>Returns the underlying string.
  <p>Can be set, to change the underlying string.
</dl>

<div class="impl">

<p>An object implementing the <code><a href="#domsettabletokenlist">DOMSettableTokenList</a></code>
interface must act as defined for the <code><a href="#domtokenlist">DOMTokenList</a></code>
interface, except for the <code title="dom-DOMSettableTokenList-value"><a href="#dom-domsettabletokenlist-value">value</a></code> attribute defined
here.

<p>The <dfn title="dom-DOMSettableTokenList-value" id="dom-domsettabletokenlist-value"><code>value</code></dfn>
attribute must return the underlying string and, on setting must replace the underlying string with the new value.

</div>



<h2 id="historical"><span class="secno">8 </span>Historical</h2>
<!-- XXX make this Differences from DOM Level 3 Core? -->

<p><dfn id="domstring"><code>DOMString</code></dfn> and
<dfn id="domtimestamp"><code>DOMTimeStamp</code></dfn> originally defined in DOM Level 3 Core
are now defined in Web IDL.

<p>The remainder of interfaces and interface members listed in this section
are part of DOM Level 3 Core. Implementations conforming to this
specification will however not support them.

<p>Interfaces:
<ul class="brief">
 <li><dfn id="cdatasection"><code>CDATASection</code></dfn>
 <li><dfn id="domconfiguration"><code>DOMConfiguration</code></dfn>
 <li><dfn id="domerror"><code>DOMError</code></dfn>
 <li><dfn id="domerrorhandler"><code>DOMErrorHandler</code></dfn>
 <li><dfn id="domimplementationlist"><code>DOMImplementationList</code></dfn>
 <li><dfn id="domimplementationsource"><code>DOMImplementationSource</code></dfn>
 <li><dfn id="domlocator"><code>DOMLocator</code></dfn>
 <li><dfn id="domobject"><code>DOMObject</code></dfn>
 <li><dfn id="domuserdata"><code>DOMUserData</code></dfn>
 <li><dfn id="entity"><code>Entity</code></dfn>
 <li><dfn id="entityreference"><code>EntityReference</code></dfn>
 <li><dfn id="namednodemap"><code>NamedNodeMap</code></dfn> <!--AttrExodus-->
 <li><dfn id="namelist"><code>NameList</code></dfn>
 <li><dfn id="notation"><code>Notation</code></dfn>
 <li><dfn id="typeinfo"><code>TypeInfo</code></dfn>
 <li><dfn id="userdatahandler"><code>UserDataHandler</code></dfn>
</ul>

<p>Interface members:
<dl>
 <dt><code><a href="#node">Node</a></code>
 <dd>
  <!--AttrExodus-->
  <p><dfn title="dom-Node-hasAttributes" id="dom-node-hasattributes"><code>hasAttributes()</code></dfn>
  <p><dfn title="dom-Node-attributes" id="dom-node-attributes"><code>attributes</code></dfn>

  <!--NodeExodus-->
  <p><dfn title="dom-Node-namespaceURI" id="dom-node-namespaceuri"><code>namespaceURI</code></dfn>
  <p><dfn title="dom-Node-prefix" id="dom-node-prefix"><code>prefix</code></dfn>
  <p><dfn title="dom-Node-localName" id="dom-node-localname"><code>localName</code></dfn>


  <p><dfn title="dom-Node-normalize" id="dom-node-normalize"><code>normalize()</code></dfn>
  <p><dfn title="dom-Node-isSupported" id="dom-node-issupported"><code>isSupported</code></dfn>
  <p><dfn title="dom-Node-getFeature" id="dom-node-getfeature"><code>getFeature()</code></dfn>
  <p><dfn title="dom-Node-getUserData" id="dom-node-getuserdata"><code>getUserData()</code></dfn>
  <p><dfn title="dom-Node-setUserData" id="dom-node-setuserdata"><code>setUserData()</code></dfn>

 <dt><code><a href="#document">Document</a></code>
 <dd>
  <p><dfn title="dom-Document-createCDATASection" id="dom-document-createcdatasection"><code>createCDATASection()</code></dfn>
  <p><dfn title="dom-Document-createAttribute" id="dom-document-createattribute"><code>createAttribute()</code></dfn>
  <p><dfn title="dom-Document-createAttributeNS" id="dom-document-createattributens"><code>createAttributeNS()</code></dfn>
  <p><dfn title="dom-Document-inputEncoding" id="dom-document-inputencoding"><code>inputEncoding</code></dfn>
  <p><dfn title="dom-Document-xmlEncoding" id="dom-document-xmlencoding"><code>xmlEncoding</code></dfn>
  <p><dfn title="dom-Document-xmlStandalone" id="dom-document-xmlstandalone"><code>xmlStandalone</code></dfn>
  <p><dfn title="dom-Document-xmlVersion" id="dom-document-xmlversion"><code>xmlVersion</code></dfn>
  <p><dfn title="dom-Document-strictErrorChecking" id="dom-document-stricterrorchecking"><code>strictErrorChecking</code></dfn>
  <p><dfn title="dom-Document-domConfig" id="dom-document-domconfig"><code>domConfig</code></dfn>
  <p><dfn title="dom-Document-normalizeDocument" id="dom-document-normalizedocument"><code>normalizeDocument()</code></dfn>
  <p><dfn title="dom-Document-renameNode" id="dom-document-renamenode"><code>renameNode()</code></dfn>

 <dt><code><a href="#domimplementation">DOMImplementation</a></code>
 <dd>
  <p><dfn title="dom-DOMImplementation-getFeature" id="dom-domimplementation-getfeature"><code>getFeature()</code></dfn>

 <dt><code><a href="#attr">Attr</a></code>
 <dd>
  <p>No longer inherits from <code><a href="#node">Node</a></code> and therefore completely
  changed.
  <!--AttrExodus
  <p><dfn title=dom-Attr-schemaTypeInfo><code>schemaTypeInfo</code></dfn>
  <p><dfn title=dom-Attr-isId><code>isId</code></dfn>
  -->

 <dt><code><a href="#element">Element</a></code>
 <dd>
  <p><dfn title="dom-Element-getAttributeNode" id="dom-element-getattributenode"><code>getAttributeNode()</code></dfn>
  <p><dfn title="dom-Element-getAttributeNodeNS" id="dom-element-getattributenodens"><code>getAttributeNodeNS()</code></dfn>
  <p><dfn title="dom-Element-setAttributeNode" id="dom-element-setattributenode"><code>setAttributeNode()</code></dfn>
  <p><dfn title="dom-Element-removeAttributeNode" id="dom-element-removeattributenode"><code>removeAttributeNode()</code></dfn>
  <p><dfn title="dom-Element-schemaTypeInfo" id="dom-element-schematypeinfo"><code>schemaTypeInfo</code></dfn>
  <p><dfn title="dom-Element-setIdAttribute" id="dom-element-setidattribute"><code>setIdAttribute()</code></dfn>
  <p><dfn title="dom-Element-setIdAttributeNS" id="dom-element-setidattributens"><code>setIdAttributeNS()</code></dfn>
  <p><dfn title="dom-Element-setIdAttributeNode" id="dom-element-setidattributenode"><code>setIdAttributeNode()</code></dfn>

 <dt><code><a href="#documenttype">DocumentType</a></code>
 <dd>
  <p><dfn title="dom-DocumentType-entities" id="dom-documenttype-entities"><code>entities</code></dfn>
  <p><dfn title="dom-DocumentType-notations" id="dom-documenttype-notations"><code>notations</code></dfn>
  <p><dfn title="dom-DocumentType-internalSubset" id="dom-documenttype-internalsubset"><code>internalSubset</code></dfn>

 <dt><code><a href="#text">Text</a></code>
 <dd>
  <p><dfn title="dom-Text-isElementContentWhitespace" id="dom-text-iselementcontentwhitespace"><code>isElementContentWhitespace</code></dfn>
</dl>



<h2 class="no-num" id="references">References</h2>
<h3 class="no-num" id="normative-references">Normative references</h3>
<div id="anolis-references-normative"><dl><dt id="refsRFC2119">[RFC2119]
<dd><cite><a href="http://www.ietf.org/rfc/rfc2119.txt">Key words for use in RFCs to Indicate Requirement Levels</a></cite>, S. Bradner. IETF.

<dt id="refsWEBIDL">[WEBIDL]
<dd><cite><a href="http://dev.w3.org/2006/webapi/WebIDL/">Web IDL</a></cite>, C. McCormack and S. Weinig. W3C.

<dt id="refsXML">[XML]
<dd><cite><a href="http://www.w3.org/TR/xml/">Extensible Markup Language</a></cite>, T. Bray, J. Paoli, C. Sperberg-McQueen et al.. W3C.

<dt id="refsXMLNS">[XMLNS]
<dd><cite><a href="http://www.w3.org/TR/xml-names/">Namespaces in XML</a></cite>, T. Bray, D. Hollander, A. Layman et al.. W3C.

</dl></div>

<h3 class="no-num" id="informative-references">Informative references</h3>
<div id="anolis-references-informative"><dl><dt id="refsHTML">[HTML]
<dd><cite><a href="http://www.whatwg.org/specs/web-apps/current-work/multipage">HTML</a></cite>, I. Hickson. WHATWG.

</dl></div>



<h2 class="no-num" id="acknowledgements">Acknowledgements</h2>

<p>Thanks to

Dethe Elza,
Jonas Sicking, and
Henri Sivonen

for their useful comments.

<p>Special thanks to Geoffrey Sneddon, and Simon Pieters for editing the initial version of this specification and their useful comments.

<p>Special thanks also to Ian Hickson for first specifying some parts of
this specification in HTML and his useful comments.
<a class="informative" href="#refsHTML">[HTML]</a>
